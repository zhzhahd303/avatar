/*

 Adobe Visitor API for JavaScript version: 5.0.1
 Copyright 2020 Adobe, Inc. All Rights Reserved
 More info available at https://marketing.adobe.com/resources/help/en_US/mcvid/
*/
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.Visitor.resetAdobeMCID=function(){var dl=window.__dataLayer||{},privacy=dl.privacy||{},noniab=privacy.noniab||false,curConsent,groupsToCheck,csentChanged;if(noniab)csentChanged=sessionStorage.getItem("s_ensNIABCChged");else{curConsent=localStorage.getItem("_dcf")||null;groupsToCheck=Bootstrapper.Visitor.prevDCF}if(localStorage.getItem("_firstDcf")){localStorage.removeItem("_firstDcf");
return}if(!Bootstrapper.Visitor.MCIDBase)return;if(noniab){sessionStorage.removeItem("s_ensNIABCChged");if(!csentChanged)return}else if(!groupsToCheck||groupsToCheck===curConsent)return;var site=dl.site||{},_host=location.hostname,baseDomain=site.baseDomain?"."+site.baseDomain:null,mhDevEnv=/(dev\d+|qa)\.fe\.mh\.disney\.io|pre\.matterhorn\.disney\.io/.test(_host);if(site.portal&&site.portal==="matterhorn"&&mhDevEnv)baseDomain=".disney.io";var cMCID=Bootstrapper.Visitor.MCIDBase||"",fDomain=baseDomain||
_host.replace("www.",".");if(!fDomain.startsWith("."))fDomain="."+fDomain;document.cookie=cMCID+"\x3d; Max-Age\x3d0; path\x3d/; domain\x3d"+fDomain;document.cookie="s_ecid\x3d; Max-Age\x3d0; path\x3d/; domain\x3d"+fDomain;document.cookie="s_vi\x3d; Max-Age\x3d0; path\x3d/; domain\x3d"+fDomain;document.cookie="s_fid\x3d; Max-Age\x3d0; path\x3d/; domain\x3d"+fDomain};var dl=window.__dataLayer||{},privacy=dl.privacy||{},gatewayCheck=typeof window.gateway!=="undefined"&&window.gateway.environment,enablePINull=
false;if(gatewayCheck){if(privacy.noniab){Bootstrapper.Logging.logMsg("In Non IAB Privacy Mode");var otgroups=window.OnetrustActiveGroups||"";enablePINull=!otgroups||!(typeof otgroups==="string"&&otgroups.indexOf("C0002")>-1);Bootstrapper.Logging.logMsg("Should PI Nulling be Enabled: "+enablePINull)}else{Bootstrapper.Logging.logMsg("In IAB Privacy Mode");var purposeObj;if(localStorage.getItem("onetrustPurposes")!==undefined)purposeObj=JSON.parse(localStorage.getItem("onetrustPurposes"));var lsCheck=
!!window.localStorage.getItem("_dcf")&&localStorage.getItem("_dcf")==="0",ccCheck=Bootstrapper.Cookies&&typeof Bootstrapper.Cookies.get==="function"&&Bootstrapper.Cookies.get("_dcf")==="0",poCheck=purposeObj&&(!purposeObj[1]||!purposeObj[3]||!purposeObj[5]||!purposeObj[8]||!purposeObj[10]||!purposeObj[11]||!purposeObj[14]);enablePINull=!!(lsCheck||ccCheck||poCheck);Bootstrapper.Logging.logMsg("Should PI Nulling be Enabled: "+enablePINull)}var gpc=Bootstrapper.Cookies.get("s_ensNSL");if(gpc&&gpc===
"1")enablePINull=true}if(enablePINull){var ensWhiteList=(!!window.gateway.environment.whitelist?window.gateway.environment.whitelist:ensClientConfig.whitelist)[ensClientConfig.cookieTypes[0]],blockedList=localStorage.getItem("TWDC-DTCI_ENSIGHTEN_BLOCKED_URLS"),adobeTag={"tag":"demdex.net|hb.omtrdc.net|hb-api.omtrdc.net|s?w88.(espn|go|nationalgeographic).com|(a|b).fox.com","displayName":"Adobe Analytics"};if(blockedList){var bl;try{bl=JSON.parse(blockedList)}catch(e){}if(Array.isArray(bl)){var fromLS=
bl.filter(function(tag){return tag.displayName=="Adobe Analytics"});if(fromLS.length)adobeTag=fromLS[0]}}if(!adobeTag){var fromWL=ensWhiteList.filter(function(tag){return tag.displayName==="Adobe Analytics"});if(fromWL.length)adobeTag=fromWL[0]}adobeTag&&window.gateway.allowTag(adobeTag);Bootstrapper.piNull=1}Bootstrapper.Visitor.resetAdobeMCID();var extraParams=typeof Bootstrapper.getExtraParams==="function"?Bootstrapper.getExtraParams():{};if(extraParams.cds=="y")Bootstrapper.piNull=1},3812204,
[3812203],694683,[639377],24);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):window.ADB=t()}(this,function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?
"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}function a(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=
Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach(function(t){r(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function o(e){return(o=
Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function u(e,t){return!t||"object"!=typeof t&&"function"!=
typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(){var e=0;return{getUniqueId:function(){return e+=1}}}var h=Object.freeze({AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",
BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",StateStart:"stateStart",StateEnd:"stateEnd"}),f=Object.freeze({MediaResumed:"media.resumed",GranularAdTracking:"media.granularadtracking"}),p=Object.freeze({Video:"video",Audio:"audio"}),m=Object.freeze({FullScreen:"fullScreen",ClosedCaption:"closedCaptioning",Mute:"mute",PictureInPicture:"pictureInPicture",InFocus:"inFocus"}),_=Object.freeze({Show:"a.media.show",Season:"a.media.season",Episode:"a.media.episode",AssetId:"a.media.asset",
Genre:"a.media.genre",FirstAirDate:"a.media.airDate",FirstDigitalDate:"a.media.digitalDate",Rating:"a.media.rating",Originator:"a.media.originator",Network:"a.media.network",ShowType:"a.media.type",AdLoad:"a.media.adLoad",MVPD:"a.media.pass.mvpd",Authorized:"a.media.pass.auth",DayPart:"a.media.dayPart",Feed:"a.media.feed",StreamFormat:"a.media.format"}),v=Object.freeze({Artist:"a.media.artist",Album:"a.media.album",Label:"a.media.label",Author:"a.media.author",Station:"a.media.station",Publisher:"a.media.publisher"}),
k=Object.freeze({Advertiser:"a.media.ad.advertiser",CampaignId:"a.media.ad.campaign",CreativeId:"a.media.ad.creative",PlacementId:"a.media.ad.placement",SiteId:"a.media.ad.site",CreativeUrl:"a.media.ad.creativeURL"}),y=Object.freeze({VOD:"vod",Live:"live",Linear:"linear",Podcast:"podcast",Audiobook:"audiobook",AOD:"aod"}),g=Object.freeze({OptOut:"optout",OptIn:"optin",OptUnknown:"optunknown"}),S=function(e){return null==e},P=Object.freeze({Log:"log",Info:"info",Warn:"warn",Error:"error"}),I=function(e){return"boolean"==
typeof e},A=function(e){return"string"==typeof e},b=function(e){return A(e)&&e.length>0};function E(){return(new Date).getTime()}function C(e,t){if(window.console){var a;switch(e){case P.Log:a=window.console.log;break;case P.Info:a=window.console.info;break;case P.Warn:a=window.console.warn;break;case P.Error:a=window.console.error}if(a)a("MediaSDK: ["+function(){var e=new Date,t=function(e){return e<10?"00"+e:e<100?"0"+e:""+e}(e.getMilliseconds());return e.toTimeString()+"."+t}()+"] "+t)}}function M(e,
t){return setInterval(e,t)}var w=!1;function T(e){var t=e.debugLogging;I(t)&&(w=t)}function O(e,t,a){(w||e===P.Error)&&C(e,t+" "+a)}function R(e){var t=b(e)?"["+e+"]":"";return{log:function(e){!function(e,t){O(P.Log,e,t)}(t,e)},info:function(e){!function(e,t){O(P.Info,e,t)}(t,e)},warn:function(e){!function(e,t){O(P.Warn,e,t)}(t,e)},error:function(e){!function(e,t){O(P.Error,e,t)}(t,e)}}}var B=Object.freeze({AnalyticsTrackingServer:"analyticstrackingserver",AnalyticsSsl:"analyticsssl",Rsid:"rsid",
Vid:"vid",Aid:"aid",Mcid:"mid",McOrgId:"orgid",AamLocHint:"aamlochint",CustomerIds:"customerids",MediaTrackingServer:"mediatrackingserver",MediaChannel:"mediachannel",MediaPlayerName:"mediaplayername",MediaAppVersion:"mediaappversion",MediaSsl:"mediassl"}),z=Object.freeze({Get:"GET",Post:"POST"}),j=Object.freeze({SessionStart:"sessionStart",SessionComplete:"sessionComplete",SessionEnd:"sessionEnd",AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",
AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",Play:"play",Ping:"ping",BufferStart:"bufferStart",PauseStart:"pauseStart",BitrateChange:"bitrateChange",Error:"error",StateStart:"stateStart",StateEnd:"stateEnd"}),D=Object.freeze({Show:"media.show",Season:"media.season",Episode:"media.episode",AssetId:"media.assetId",Genre:"media.genre",FirstAirDate:"media.firstAirDate",FirstDigitalDate:"media.firstDigitalDate",Rating:"media.rating",Originator:"media.originator",
Network:"media.network",ShowType:"media.showType",AdLoad:"media.adLoad",MVPD:"media.pass.mvpd",Auth:"media.pass.auth",DayPart:"media.dayPart",Feed:"media.feed",StreamFormat:"media.streamFormat",Artist:"media.artist",Album:"media.album",Label:"media.label",Author:"media.author",Station:"media.station",Publisher:"media.publisher"}),V=Object.freeze({Advertiser:"media.ad.advertiser",CampaignId:"media.ad.campaignId",CreativeId:"media.ad.creativeId",SiteId:"media.ad.siteId",CreativeUrl:"media.ad.creativeURL",
PlacementId:"media.ad.placementId"}),q=Object.freeze({Id:"media.id",Name:"media.name",Length:"media.length",ContentType:"media.contentType",StreamType:"media.streamType",PlayerName:"media.playerName",Resume:"media.resume",Channel:"media.channel",Publisher:"media.publisher",SdkVersion:"media.sdkVersion"}),x=Object.freeze({AppInstallationId:"appInstallationId",AnalyticsTrackingServer:"analytics.trackingServer",AnalyticsRsid:"analytics.reportSuite",AnalyticsSsl:"analytics.enableSSL",AnalyticsVisitorId:"analytics.visitorId",
AnalyticsAid:"analytics.aid",VisitorMcOrgId:"visitor.marketingCloudOrgId",VisitorMcuserId:"visitor.marketingCloudUserId",VisitorAamLocHint:"visitor.aamLocationHint",VisitorCustomerIds:"visitor.customerIDs",VisitorCustomerKeyId:"id",VisitorCustomerKeyAuthState:"authState",MediaVersion:"media.libraryVersion"}),N=Object.freeze({Channel:"media.channel"}),F=Object.freeze({PodFriendlyName:"media.ad.podFriendlyName",PodIndex:"media.ad.podIndex",PodSecond:"media.ad.podSecond"}),L=Object.freeze({Name:"media.ad.name",
Id:"media.ad.id",Length:"media.ad.length",PodPosition:"media.ad.podPosition",PlayerName:"media.ad.playerName"}),G=Object.freeze({FriendlyName:"media.chapter.friendlyName",Length:"media.chapter.length",Offset:"media.chapter.offset",Index:"media.chapter.index"}),H=Object.freeze({StateName:"media.state.name"}),Q=Object.freeze({Bitrate:"media.qoe.bitrate",DroppedFrames:"media.qoe.droppedFrames",Fps:"media.qoe.framesPerSecond",StartupTime:"media.qoe.timeToStart",ErrorId:"media.qoe.errorID",ErrorSource:"media.qoe.errorSource",
ErrorSourcePlayer:"player",ErrorSourceExternal:"external"}),U=Object.freeze({EventType:"eventType",Params:"params",QoE:"qoeData",CustomMetadata:"customMetadata",PlayerTime:"playerTime"}),K=Object.freeze({Playhead:"playhead",Ts:"ts"}),W=function(e){return 0===Object.keys(e).length},Z=function(e){return"number"==typeof e&&!isNaN(e)},$=function(e){var t=parseInt(e,10);return Z(t)&&e===t},J=function(t){return!S(t)&&!Array.isArray(t)&&"object"===e(t)},X=function(e){return"function"==typeof e},Y=function(e,
t){if(!X(e))return t;try{return e()}catch(e){return t}};function ee(e){var t={};return J(e)&&Object.keys(e).forEach(function(a){var i=e[a],r=i.id,n=i.authState,s=void 0===n?0:n;b(r)&&(t[a]={id:r,authState:s})}),t}function te(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r({},U.EventType,e.eventType);i[U.PlayerTime]=(r(t={},K.Playhead,e.playhead),r(t,K.Ts,e.ts),t),W(e.customMetadata)||(i[U.CustomMetadata]=e.customMetadata),W(e.qoeData)||(i[U.QoE]=e.qoeData);var n=s({},e.params);
if(e.eventType===j.SessionStart){b(a[B.AnalyticsTrackingServer])&&(n[x.AnalyticsTrackingServer]=a[B.AnalyticsTrackingServer]),b(a[B.Rsid])&&(n[x.AnalyticsRsid]=a[B.Rsid]),I(a[B.AnalyticsSsl])&&(n[x.AnalyticsSsl]=a[B.AnalyticsSsl]),b(a[B.Vid])&&(n[x.AnalyticsVisitorId]=a[B.Vid]),b(a[B.Aid])&&(n[x.AnalyticsAid]=a[B.Aid]),b(a[B.McOrgId])&&(n[x.VisitorMcOrgId]=a[B.McOrgId]),b(a[B.Mcid])&&(n[x.VisitorMcuserId]=a[B.Mcid]),$(a[B.AamLocHint])&&(n[x.VisitorAamLocHint]=a[B.AamLocHint]);var o=ee(a[B.CustomerIds]);
if(J(o)&&!W(o)&&(n[x.VisitorCustomerIds]=o),!b(n[q.Channel])){var d=a[B.MediaChannel];n[q.Channel]=b(d)?d:"unknown"}var c=a[B.MediaPlayerName];n[q.PlayerName]=b(c)?c:"unknown",b(a[B.MediaAppVersion])&&(n[q.SdkVersion]=a[B.MediaAppVersion]),n[x.MediaVersion]="js-3.0.1"}else if(e.eventType===j.AdStart){var u=a[B.MediaPlayerName];n[L.PlayerName]=b(u)?u:"unknown"}W(n)||(i[U.Params]=n);var l=Y(function(){return JSON.stringify(i)},"");return l}function ae(e){try{var t=e.split("/");return t[4]?t[4]:""}catch(e){return""}}
var ie=[B.AnalyticsTrackingServer,B.AnalyticsSsl,B.Rsid,B.Vid,B.Aid,B.Mcid,B.McOrgId,B.AamLocHint,B.CustomerIds,B.MediaChannel,B.MediaAppVersion,B.MediaPlayerName,B.MediaTrackingServer,B.MediaSsl],re=function(){function e(a){t(this,e),this._logger=R("MediaSession("+a+")"),this._hits=[],this._ecParams=null,this._sessionId=null,this._creatingMCSession=!1,this._createSessionFailureCount=0,this._internalError=!1,this._doneQueuing=!1}return i(e,[{key:"queue",value:function(e){this._internalError||this._doneQueuing||
this._hits.push(e)}},{key:"process",value:function(e){this._internalError||0!==this._hits.length&&e.isReady()&&(this._ecParams||(this._ecParams=e.resolveKeys(ie)),S(this._sessionId)?this._startMCSession():this._flushPendingHits())}},{key:"end",value:function(){this._logger.log("end"),this._doneQueuing=!0}},{key:"abort",value:function(){this._logger.log("abort"),this._doneQueuing=!0,this._hits=[]}},{key:"doneProcessing",value:function(){return this._internalError||this._doneQueuing&&0===this._hits.length}},
{key:"_startMCSession",value:function(){var e=this;if(!this._creatingMCSession){var t=this._hits[0];if(t.eventType!==j.SessionStart)return this._logger.log("Dropping hit("+t.eventType+") as we expected sessionStart"),void this._hits.shift();var a,i=((a=this._ecParams)[B.MediaSsl]?"https":"http")+"://"+a[B.MediaTrackingServer]+"/api/v1/sessions",r=te(t,this._ecParams);this._creatingMCSession=!0,this._sendRequest(i,z.Post,r,function(t,a){var i,r=!1;do{if(201!==t)break;var n=a.location;if(!b(n))break;
if(!(i=ae(n)))break;r=!0}while(0);r?(e._logger.log("Media collection session created with session id :  "+i),e._sessionId=i,e._hits.shift()):(e._logger.log("Creating Media collection session failed"),e._createSessionFailureCount+=1,e._createSessionFailureCount>=3&&(e._logger.log("Internal error: Creating Media collection session failed 3 times"),e._internalError=!0)),e._creatingMCSession=!1})}}},{key:"_flushPendingHits",value:function(){var e=this;this._hits.splice(0,3).forEach(function(t){var a,
i,r=(a=e._ecParams,i=e._sessionId,(a[B.MediaSsl]?"https":"http")+"://"+a[B.MediaTrackingServer]+"/api/v1/sessions/"+i+"/events"),n=te(t,e._ecParams);e._sendRequest(r,z.Post,n,function(){})})}},{key:"_sendRequest",value:function(e,t,a,i){!function(e,t,a,i){if(void 0!==window.XMLHttpRequest){var r=new window.XMLHttpRequest;if("withCredentials"in r){var n=r;return n.open(t,e,!0),n.timeout=5E3,n.onload=function(){var e=n.status&&parseInt(n.status,10),t=n.responseText,a=function(e){var t={};try{e.trim().split(/[\r\n]+/).forEach(function(e){var a=
e.split(":",1)[0],i=e.substring(a.length+2);a.length>0&&(t[a.toLowerCase()]=i)})}catch(e){}return t}(n.getAllResponseHeaders());i(e,a,t)},n.onerror=function(){i(0)},void n.send(a)}i(0)}}(e,t,a,i)}}]),e}(),ne=function(){function e(){t(this,e),this._logger=R("MediaProcessor"),this._isConfigured=!1,this._privacyStatus=g.OptUnknown,this._sessionIdGenerator=l(),this._sessionMap={}}return i(e,[{key:"configure",value:function(e){var t=this;this._isConfigured||(this._ecResolver=e,this._privacyStatus=this._ecResolver.getPrivacyStatus(),
this._ecResolver.notifyPrivacyChange(this._onPrivacyChange.bind(this)),this._isConfigured=!0,this._processSessionTimer=M(function(){t._tick()},500),this._logger.log("Configured with resolver"))}},{key:"startSession",value:function(){if(this._privacyStatus===g.OptOut)return this._logger.log("Privacy is opted out. Not starting a session"),-1;var t=this._sessionIdGenerator.getUniqueId();return this._sessionMap[t]=e._createMediaSession(t),t}},{key:"processHit",value:function(e,t){if(-1!==e){var a=this._sessionMap[e];
S(a)||(this._logger.log("Process hit for session("+e+") \x3d\x3e "+t),a.queue(t))}}},{key:"endSession",value:function(e){if(-1!==e){var t=this._sessionMap[e];S(t)||t.end()}}},{key:"_tick",value:function(){var e=this;Object.keys(this._sessionMap).forEach(function(t){var a=e._sessionMap[t];a.process(e._ecResolver),a.doneProcessing()&&(e._logger.log("Removing session "+t+" from store as it has finished processing"),delete e._sessionMap[t])})}},{key:"_onPrivacyChange",value:function(e){var t=this;this._logger.log("Privacy switched to "+
e),this._privacyStatus=e,e===g.OptOut&&(this._logger.log("Aborting all active sessions"),Object.keys(this._sessionMap).forEach(function(e){t._sessionMap[e].abort()}))}}],[{key:"_createMediaSession",value:function(e){return new re(e)}}]),e}(),se=function(){function e(a){var i=a.id,r=a.name,n=a.position,s=a.length;if(t(this,e),!b(i))throw new TypeError("id is not a valid string");if(!b(r))throw new TypeError("name is not a valid string");if(!$(n)||n<1)throw new TypeError("position should be a valid integer greater than zero");
if(!Z(s)||s<0)throw new TypeError("length cannot be less than zero");this.id=i,this.name=r,this.position=n,this.length=s}return i(e,[{key:"equal",value:function(t){return!S(t)&&t instanceof e&&(this.id===t.id&&this.name===t.name&&this.position===t.position&&this.length===t.length)}},{key:"serialize",value:function(){var e;return r(e={},"ad.id",this.id),r(e,"ad.name",this.name),r(e,"ad.position",this.position),r(e,"ad.length",this.length),e}}],[{key:"deserialize",value:function(t){return J(t)?Y(function(){return new e({id:t["ad.id"],
name:t["ad.name"],position:t["ad.position"],length:t["ad.length"]})},null):null}}]),e}(),oe=function(){function e(a){var i=a.name,r=a.position,n=a.startTime;if(t(this,e),!b(i))throw new TypeError("name is not a valid string");if(!$(r)||r<1)throw new TypeError("position should be a valid integer greater than zero");if(!Z(n)||n<0)throw new TypeError("startTime cannot be less than zero");this.name=i,this.position=r,this.startTime=n}return i(e,[{key:"equal",value:function(t){return!S(t)&&t instanceof
e&&(this.name===t.name&&this.position===t.position&&this.startTime===t.startTime)}},{key:"serialize",value:function(){var e;return r(e={},"adbreak.name",this.name),r(e,"adbreak.position",this.position),r(e,"adbreak.starttime",this.startTime),e}}],[{key:"deserialize",value:function(t){return J(t)?Y(function(){return new e({name:t["adbreak.name"],position:t["adbreak.position"],startTime:t["adbreak.starttime"]})},null):null}}]),e}(),de=function(){function e(a){var i=a.name,r=a.position,n=a.startTime,
s=a.length;if(t(this,e),!b(i))throw new TypeError("name is not a valid string");if(!$(r)||r<1)throw new TypeError("position should be a valid integer greater than zero");if(!Z(n)||n<0)throw new TypeError("startTime cannot be less than zero");if(!Z(s)||s<0)throw new TypeError("length cannot be less than zero");this.name=i,this.position=r,this.startTime=n,this.length=s}return i(e,[{key:"equal",value:function(t){return!S(t)&&t instanceof e&&(this.name===t.name&&this.position===t.position&&this.startTime===
t.startTime&&this.length===t.length)}},{key:"serialize",value:function(){var e;return r(e={},"chapter.name",this.name),r(e,"chapter.position",this.position),r(e,"chapter.starttime",this.startTime),r(e,"chapter.length",this.length),e}}],[{key:"deserialize",value:function(t){return J(t)?Y(function(){return new e({name:t["chapter.name"],position:t["chapter.position"],startTime:t["chapter.starttime"],length:t["chapter.length"]})},null):null}}]),e}(),ce=new RegExp("^[a-zA-Z0-9_\\.]{1,64}$"),ue=function(){function e(a){var i=
a.name;if(t(this,e),!b(i))throw new TypeError("name is not a valid string");if(!ce.test(i))throw new TypeError("name should match '^[a-zA-Z0-9_\\.]{1,64}$' pattern");this.name=i}return i(e,[{key:"equal",value:function(t){return!S(t)&&t instanceof e&&this.name===t.name}},{key:"serialize",value:function(){return r({},"customstate.name",this.name)}}],[{key:"deserialize",value:function(t){return J(t)?Y(function(){return new e({name:t["customstate.name"]})},null):null}}]),e}(),le=function(){function e(a){var i=
a.id,r=a.name,n=a.streamType,s=a.mediaType,o=a.length,d=a.resumed,c=a.prerollWaitTime,u=a.granularAdTracking;if(t(this,e),!b(i))throw new TypeError("id is not a valid string");if(!b(r))throw new TypeError("name is not a valid string");if(!b(n))throw new TypeError("streamType is not a valid string");if(!Z(o)||o<0)throw new TypeError("length cannot be less than zero");this.id=i,this.name=r,this.streamType=n,this.mediaType=s!==p.Audio?p.Video:s,this.length=o,this.resumed=!!I(d)&&d,this.prerollWaitTime=
!$(c)||c<0?250:c,this.granularAdTracking=!!I(u)&&u}return i(e,[{key:"equal",value:function(t){return!S(t)&&t instanceof e&&(this.id===t.id&&this.name===t.name&&this.streamType===t.streamType&&this.mediaType===t.mediaType&&this.length===t.length&&this.resumed===t.resumed&&this.prerollWaitTime===t.prerollWaitTime&&this.granularAdTracking===t.granularAdTracking)}},{key:"serialize",value:function(){var e;return r(e={},"media.id",this.id),r(e,"media.name",this.name),r(e,"media.streamtype",this.streamType),
r(e,"media.type",this.mediaType),r(e,"media.length",this.length),r(e,"media.resumed",this.resumed),r(e,"media.prerollwaittime",this.prerollWaitTime),r(e,"media.granularadtracking",this.granularAdTracking),e}}],[{key:"deserialize",value:function(t){return J(t)?Y(function(){return new e({id:t["media.id"],name:t["media.name"],streamType:t["media.streamtype"],mediaType:t["media.type"],length:t["media.length"],resumed:t["media.resumed"],prerollWaitTime:t["media.prerollwaittime"],granularAdTracking:t["media.granularadtracking"]})},
null):null}}]),e}(),he=function(){function e(a){var i=a.bitrate,r=a.droppedFrames,n=a.fps,s=a.startupTime;if(t(this,e),!Z(i)||i<0)throw new TypeError("bitrate must not be less than zero");if(!Z(r)||r<0)throw new TypeError("dropped frames must not be less than zero");if(!Z(n)||n<0)throw new TypeError("fps must not be less than zero");if(!Z(s)||s<0)throw new TypeError("startupTime must not be less than zero");this.bitrate=i,this.droppedFrames=r,this.fps=n,this.startupTime=s}return i(e,[{key:"equal",
value:function(t){return!S(t)&&t instanceof e&&(this.bitrate===t.bitrate&&this.droppedFrames===t.droppedFrames&&this.fps===t.fps&&this.startupTime===t.startupTime)}},{key:"serialize",value:function(){var e;return r(e={},"qoe.bitrate",this.bitrate),r(e,"qoe.droppedframes",this.droppedFrames),r(e,"qoe.fps",this.fps),r(e,"qoe.startuptime",this.startupTime),e}}],[{key:"deserialize",value:function(t){return J(t)?Y(function(){return new e({bitrate:t["qoe.bitrate"],droppedFrames:t["qoe.droppedframes"],fps:t["qoe.fps"],
startupTime:t["qoe.startuptime"]})},null):null}}]),e}(),fe=R("Media");var pe=function(e){try{return JSON.stringify(e,null,4)}catch(e){return"[Error formatting object]"}},me=Object.freeze({Name:"event.name",Params:"event.params",Metadata:"event.metadata",TimeStamp:"event.ts",InternalEvent:"event.internal",Playhead:"event.playhead",ErrorId:"error.id"}),_e=Object.freeze(s({SessionStart:"sessionStart",SessionEnd:"sessionEnd",SessionComplete:"sessionComplete",Play:"play",Pause:"pause",Error:"error",QoEUpdate:"qoeUpdate",
PlayheadUpdate:"playheadUpdate"},h)),ve=function(){function e(a,i){if(t(this,e),S(a))throw new Error("id is not valid");this.id=a,this.description=i,this.predicates=[],this.actions=[]}return i(e,[{key:"addPredicate",value:function(e,t,a){if(!X(e))throw new Error("predicate is not a function");return this.predicates.push({predicate:e,val:t,message:a}),this}},{key:"addAction",value:function(e){if(!X(e))throw new Error("action is not a function");return this.actions.push(e),this}},{key:"runPredicates",
value:function(e){for(var t=0;t<this.predicates.length;++t){var a=this.predicates[t];if(a.predicate(e)!==a.val)return{success:!1,message:a.message}}return{success:!0,message:""}}},{key:"runActions",value:function(e){for(var t=0;t<this.actions.length;++t)if(!(0,this.actions[t])(e))return!1;return!0}}]),e}(),ke=function(){function e(a){if(t(this,e),!a)throw new Error("RuleEngine needs a logger");this.logger=a,this.rules={}}return i(e,[{key:"setEnterAction",value:function(e){if(!X(e))throw new Error("enterAction is not a function");
this.enterAction=e}},{key:"setExitAction",value:function(e){if(!X(e))throw new Error("exitAction is not a function");this.exitAction=e}},{key:"addRule",value:function(e){if(!(e instanceof ve))throw new Error("rule is not valid");this.rules[e.id]=e}},{key:"processRule",value:function(e,t){var a=this.rules[e];if(!a)return{success:!1,message:"Matching rule is not found"};var i=a.runPredicates(t);do{if(!i.success){this.logger.log("RuleEngine: Predicates failed for rule "+a.description+" : "+i.message);
break}if(this.enterAction&&!this.enterAction(a,t)){this.logger.log("RuleEngine: Enter action prevents further processing for rule "+a.description);break}if(!a.runActions(t)){this.logger.log("RuleEngine: Rule action prevents further processing for rule "+a.description);break}this.exitAction&&this.exitAction(a,t)}while(0);return i}}]),e}(),ye=Object.freeze({Init:0,Play:1,Pause:2,Buffer:3,Seek:4,Stall:5}),ge=function(){function e(a,i){t(this,e),this._mediaInfo=a,this._mediaMetadata=i,this._adBreakInfo=
null,this._adInfo=null,this._adMetadata=null,this._chapterInfo=null,this._chapterMetadata=null,this._qoeInfo=null,this._playhead=0,this._playstate=ye.Init,this._buffering=!1,this._seeking=!1,this._customStates=new Map}return i(e,[{key:"setAdBreakInfo",value:function(e){this._adBreakInfo=e}},{key:"clearAdBreakInfo",value:function(){this._adBreakInfo=null}},{key:"setAdInfo",value:function(e,t){this._adInfo=e,this._adMetadata=t}},{key:"clearAdInfo",value:function(){this._adInfo=null,this._adMetadata=
null}},{key:"setChapterInfo",value:function(e,t){this._chapterInfo=e,this._chapterMetadata=t}},{key:"clearChapterInfo",value:function(){this._chapterInfo=null,this._chapterMetadata=null}},{key:"enterPlaybackState",value:function(e){switch(e){case ye.Play:case ye.Pause:case ye.Stall:this._playstate=e;break;case ye.Buffer:this._buffering=!0;break;case ye.Seek:this._seeking=!0}}},{key:"exitPlaybackState",value:function(e){switch(e){case ye.Buffer:this._buffering=!1;break;case ye.Seek:this._seeking=!1}}},
{key:"isInPlaybackState",value:function(e){var t=!1;switch(e){case ye.Init:case ye.Play:case ye.Pause:case ye.Stall:t=this._playstate===e;break;case ye.Buffer:t=this._buffering;break;case ye.Seek:t=this._seeking}return t}},{key:"isIdle",value:function(){return!this.isInPlaybackState(ye.Play)||this.isInPlaybackState(ye.Seek)||this.isInPlaybackState(ye.Buffer)}},{key:"startCustomState",value:function(e){this._customStates.set(e.name,e)}},{key:"endCustomState",value:function(e){this._customStates.set(e.name,
null)}},{key:"isCustomStateActive",value:function(e){return!!this._customStates.get(e.name)}},{key:"getActiveCustomStates",value:function(){var e=[];return this._customStates.forEach(function(t){t&&e.push(t)}),e}},{key:"hasTrackedCustomState",value:function(e){return this._customStates.has(e.name)}},{key:"numTrackedCustomStates",value:function(){return this._customStates.size}},{key:"mediaInfo",get:function(){return this._mediaInfo}},{key:"mediaMetadata",get:function(){return this._mediaMetadata}},
{key:"isInAdBreak",get:function(){return!!this._adBreakInfo}},{key:"adBreakInfo",get:function(){return this._adBreakInfo}},{key:"isInAd",get:function(){return!!this._adInfo}},{key:"adInfo",get:function(){return this._adInfo}},{key:"adMetadata",get:function(){return this._adMetadata}},{key:"isInChapter",get:function(){return!!this._chapterInfo}},{key:"chapterInfo",get:function(){return this._chapterInfo}},{key:"chapterMetadata",get:function(){return this._chapterMetadata}},{key:"qoeInfo",get:function(){return this._qoeInfo},
set:function(e){this._qoeInfo=e}},{key:"playhead",get:function(){return this._playhead},set:function(e){this._playhead=e}}]),e}(),Se=function(){function e(a){var i=a.eventType,r=a.params,n=a.customMetadata,s=a.qoeData,o=a.playhead,d=a.ts;if(t(this,e),!A(i))throw new Error("eventType should be a valid string");if(!Z(o))throw new Error("playhead should be a valid number");if(!$(d)||d<0)throw new Error("ts should be a valid positive integer");this.eventType=i,this.params=J(r)?r:{},this.customMetadata=
J(n)?n:{},this.qoeData=J(s)?s:{},this.playhead=o,this.ts=d}return i(e,[{key:"toString",value:function(){return pe(this)}}]),e}(),Pe=function(){function e(a,i,r,n,s){t(this,e),this._logger=a,this._hitProcessor=i,this._config=r,this._media=n,this._refTs=s,this._previousState=ye.Init,this._previousStateTs=s,this._interval=1E4,this._lastQoeInfo=null,this._startSession()}return i(e,[{key:"setRefTS",value:function(e){this._refTs=e}},{key:"processMediaStart",value:function(){this._processMediaStart(!1)}},
{key:"processMediaComplete",value:function(){this._generateHit(j.SessionComplete),this._endSession()}},{key:"processMediaSkip",value:function(){this._generateHit(j.SessionEnd),this._endSession()}},{key:"processAdBreakStart",value:function(){var t=e._extractAdBreakParams(this._media);this._generateHit(j.AdBreakStart,t,{})}},{key:"processAdBreakComplete",value:function(){this._generateHit(j.AdBreakComplete)}},{key:"processAdBreakSkip",value:function(){this._generateHit(j.AdBreakComplete)}},{key:"processAdStart",
value:function(){e._isGranularAdTrackingEnabled(this._media)&&(this._interval=1E3);var t=e._extractAdParams(this._media),a=e._extractAdMetadata(this._media);this._generateHit(j.AdStart,t,a)}},{key:"processAdComplete",value:function(){this._interval=1E4,this._generateHit(j.AdComplete)}},{key:"processAdSkip",value:function(){this._interval=1E4,this._generateHit(j.AdSkip)}},{key:"processChapterStart",value:function(){var t=e._extractChapterParams(this._media),a=e._extractChapterMetadata(this._media);
this._generateHit(j.ChapterStart,t,a)}},{key:"processChapterComplete",value:function(){this._generateHit(j.ChapterComplete)}},{key:"processChapterSkip",value:function(){this._generateHit(j.ChapterSkip)}},{key:"processCustomStateStart",value:function(e){var t={};t[H.StateName]=e.name,this._generateHit(j.StateStart,t,{},{})}},{key:"processCustomStateEnd",value:function(e){var t={};t[H.StateName]=e.name,this._generateHit(j.StateEnd,t,{},{})}},{key:"processSessionAbort",value:function(){this.processMediaSkip()}},
{key:"processSessionRestart",value:function(){this._previousState=ye.Init,this._previousStateTs=this._refTs,this._lastQoeInfo=null,this._startSession(),this.processMediaStart(!0),this._media.isInChapter&&this.processChapterStart(),this._media.isInAdBreak&&this.processAdBreakStart(),this._media.isInAd&&this.processAdStart();var e,t=this._media.getActiveCustomStates();for(e=0;e<t.length;e++)this.processCustomStateStart(t[e]);this.processPlayback(!0)}},{key:"processBitrateChange",value:function(){var t=
e._extractQoeData(this._media);this._generateHit(j.BitrateChange,{},{},t)}},{key:"processError",value:function(t){var a=e._extractQoeData(this._media);a[Q.ErrorId]=t,a[Q.ErrorSource]=Q.ErrorSourcePlayer,this._generateHit(j.Error,{},{},a)}},{key:"processPlayback",value:function(t){if(this._isTracking){var a=this._getPlaybackState();if(this._previousState!==a||t){var i=e._playbackStateToMediaCollectionEvent(a);this._generateHit(i),this._previousState=a,this._previousStateTs=this._refTs}else a===this._previousState&&
this._refTs-this._previousStateTs>=this._interval&&(this._generateHit(j.Ping),this._previousStateTs=this._refTs)}}},{key:"_processMediaStart",value:function(t){var a={};a=e._extractMediaParams(this._media),t&&(a[q.Resume]=!0);var i=this._config[N.Channel];b(i)&&(a[N.Channel]=i);var r=e._extractMediaMetadata(this._media);this._generateHit(j.SessionStart,a,r)}},{key:"_generateHit",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?
arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=r;if(S(n)){var s=this._media.qoeInfo,o=!(S(s)||!S(this._lastQoeInfo)&&this._lastQoeInfo.equal(s));o&&(n=e._extractQoeData(this._media),this._lastQoeInfo=s)}if(this._isTracking){var d=this._media.playhead,c=this._refTs,u=new Se({eventType:t,params:a,customMetadata:i,qoeData:n,playhead:d,ts:c});this._hitProcessor.processHit(this._sessionId,u)}else this._logger.log("#_generateHit - Dropping hit as we have internally stopped tracking the session")}},
{key:"_getPlaybackState",value:function(){return this._media.isInPlaybackState(ye.Buffer)?ye.Buffer:this._media.isInPlaybackState(ye.Seek)?ye.Seek:this._media.isInPlaybackState(ye.Play)?ye.Play:this._media.isInPlaybackState(ye.Pause)?ye.Pause:this._media.isInPlaybackState(ye.Stall)?ye.Stall:ye.Init}},{key:"_startSession",value:function(){this._sessionId=this._hitProcessor.startSession(),this._isTracking=!0,this._logger.log("Start internal session("+this._sessionId+")")}},{key:"_endSession",value:function(){this._hitProcessor.endSession(this._sessionId),
this._isTracking=!1,this._logger.log("End internal session("+this._sessionId+")")}}],[{key:"_isGranularAdTrackingEnabled",value:function(e){var t=e.mediaInfo;return!S(t)&&t.granularAdTracking}},{key:"_extractMediaParams",value:function(t){var a={},i=t.mediaInfo;S(i)||(a[q.Id]=i.id,a[q.Name]=i.name,a[q.Length]=i.length,a[q.ContentType]=i.streamType,a[q.StreamType]=i.mediaType,a[q.Resume]=i.resumed);var r=t.mediaMetadata;return J(r)&&Object.keys(r).forEach(function(t){if(e._standardMediaMetadataMap.has(t)){var i=
e._standardMediaMetadataMap.get(t);a[i]=r[t]}}),a}},{key:"_extractMediaMetadata",value:function(t){var a={},i=t.mediaMetadata;return J(i)&&Object.keys(i).forEach(function(t){e._standardMediaMetadataMap.has(t)||(a[t]=i[t])}),a}},{key:"_extractAdBreakParams",value:function(e){var t={},a=e.adBreakInfo;return S(a)||(t[F.PodFriendlyName]=a.name,t[F.PodIndex]=a.position,t[F.PodSecond]=a.startTime),t}},{key:"_extractAdParams",value:function(t){var a={},i=t.adInfo;S(i)||(a[L.Name]=i.name,a[L.Id]=i.id,a[L.Length]=
i.length,a[L.PodPosition]=i.position);var r=t.adMetadata;return J(r)&&Object.keys(r).forEach(function(t){if(e._standardAdMetadataMap.has(t)){var i=e._standardAdMetadataMap.get(t);a[i]=r[t]}}),a}},{key:"_extractAdMetadata",value:function(t){var a={},i=t.adMetadata;return J(i)&&Object.keys(i).forEach(function(t){e._standardAdMetadataMap.has(t)||(a[t]=i[t])}),a}},{key:"_extractChapterParams",value:function(e){var t={},a=e.chapterInfo;return S(a)||(t[G.FriendlyName]=a.name,t[G.Index]=a.position,t[G.Length]=
a.length,t[G.Offset]=a.startTime),t}},{key:"_extractChapterMetadata",value:function(e){var t={},a=e.chapterMetadata;return J(a)&&Object.keys(a).forEach(function(e){t[e]=a[e]}),t}},{key:"_extractQoeData",value:function(e){var t={},a=e.qoeInfo;return J(a)&&(t[Q.Bitrate]=parseInt(a.bitrate,10),t[Q.Fps]=parseInt(a.fps,10),t[Q.DroppedFrames]=parseInt(a.droppedFrames,10),t[Q.StartupTime]=parseInt(a.startupTime,10)),t}},{key:"_playbackStateToMediaCollectionEvent",value:function(e){switch(e){case ye.Buffer:return j.BufferStart;
case ye.Seek:return j.PauseStart;case ye.Play:return j.Play;case ye.Pause:return j.PauseStart;case ye.Stall:return j.Play;case ye.Init:return j.Ping;default:return""}}}]),e}(),Ie=new Map;Ie.set(_.Show,D.Show),Ie.set(_.Season,D.Season),Ie.set(_.Episode,D.Episode),Ie.set(_.AssetId,D.AssetId),Ie.set(_.Genre,D.Genre),Ie.set(_.FirstAirDate,D.FirstAirDate),Ie.set(_.FirstDigitalDate,D.FirstDigitalDate),Ie.set(_.Rating,D.Rating),Ie.set(_.Originator,D.Originator),Ie.set(_.Network,D.Network),Ie.set(_.ShowType,
D.ShowType),Ie.set(_.AdLoad,D.AdLoad),Ie.set(_.MVPD,D.MVPD),Ie.set(_.Authorized,D.Auth),Ie.set(_.DayPart,D.DayPart),Ie.set(_.Feed,D.Feed),Ie.set(_.StreamFormat,D.StreamFormat),Ie.set(v.Artist,D.Artist),Ie.set(v.Album,D.Album),Ie.set(v.Label,D.Label),Ie.set(v.Author,D.Author),Ie.set(v.Station,D.Station),Ie.set(v.Publisher,D.Publisher),Pe._standardMediaMetadataMap=Ie;var Ae=new Map;Ae.set(k.Advertiser,V.Advertiser),Ae.set(k.CampaignId,V.CampaignId),Ae.set(k.CreativeId,V.CreativeId),Ae.set(k.PlacementId,
V.PlacementId),Ae.set(k.SiteId,V.SiteId),Ae.set(k.CreativeUrl,V.CreativeUrl),Pe._standardAdMetadataMap=Ae;var be="Media tracker is not in active tracking session, call 'API:trackSessionStart' to begin a new tracking session.",Ee="Media tracker is in active tracking session, call 'API:trackSessionEnd' or 'API:trackComplete' to end current tracking session.",Ce="Media tracker is tracking buffer events, call 'API:trackEvent(BufferComplete)' first to stop tracking buffer events.",Me="Media tracker is not tracking buffer events, call 'API:trackEvent(BufferStart)' before 'API:trackEvent(BufferComplete)'.",
we="Media tracker is tracking seek events, call 'API:trackEvent(SeekComplete)' first to stop tracking seek events.",Te="Media tracker is not tracking seek events, call 'API:trackEvent(SeekStart)' before 'API:trackEvent(SeekComplete)'.",Oe="Media tracker is not tracking any AdBreak, call 'API:trackEvent(AdBreakStart)' to begin tracking AdBreak",Re="Media tracker is not tracking any Ad, call 'API:trackEvent(AdStart)' to begin tracking Ad",Be="Media tracker is not tracking any Chapter, call 'API:trackEvent(ChapterStart)' to begin tracking Chapter",
ze="MediaInfo passed into 'API:trackSessionStart' is invalid.",je="AdBreakInfo passed into 'API:trackEvent(AdBreakStart)' is invalid.",De="Media tracker is currently tracking the AdBreak passed into 'API:trackEvent(AdBreakStart)'.",Ve="AdInfo passed into 'API:trackEvent(AdStart)' is invalid.",qe="StateInfo passed into 'API:trackEvent(StateStart|StateEnd)' is invalid.",xe="ErrorId passed into 'API:trackError()' is invalid.",Ne="Media tracker is currently tracking the Ad passed into 'API:trackEvent(AdStart)'.",
Fe="ChapterInfo passed into 'API:trackEvent(ChapterStart)' is invalid.",Le="Media tracker is currently tracking the Chapter passed into 'API:trackEvent(ChapterStart)'.",Ge="QoEInfo passed into 'API:updateQoEInfo' is invalid.",He="Media tracker is tracking an AdBreak but not tracking any Ad and will drop any calls to track player state (Play, Pause, Buffer or Seek) in this state.",Qe="Media tracker is already tracking a state with the same state name.",Ue="Media tracker is not already tracking a state with the same state name.",
Ke="Media tracker has reached maximum number of states per session (10).",We=new RegExp("^[a-zA-Z0-9_\\.]+$"),Ze=function(){function e(a,i,r){if(t(this,e),!a)throw new Error("hitProcessor should be valid");if(!i)throw new Error("logger should be valid");this._hitProcessor=a,this._logger=i,this._config=J(r)?r:{},this._resetStates(),this._setupRules()}return i(e,[{key:"track",value:function(t){var a=t[me.Name];return b(a)?$(t[me.TimeStamp])?(J(t[me.Params])||(t[me.Params]={}),t[me.Metadata]=e._cleanMetadata(t[me.Metadata]),
!!this._prerollDeferRule(a,t)||this._processRule(a,t)):(this._logger.log("#track - Event timestamp is missing in track event data. - "+a),!1):(this._logger.log("#track - Event name is missing in track event data"),!1)}},{key:"_resetStates",value:function(){this._media=null,this._hitGenerator=null,this._sessionRefTs=null,this._inPrerollInterval=!1,this._prerollRefTs=null,this._prerollQueuedRules=[],this._contentStarted=!1,this._contentStartRefTs=null,this._mediaIdle=!1,this._trackerIdle=!1,this._mediaIdleStartTs=
0}},{key:"_createHitGenerator",value:function(e){return new Pe(this._logger,this._hitProcessor,this._config,this._media,e)}},{key:"_processRule",value:function(e,t){return this._ruleEngine.processRule(e,t).success}},{key:"_setupRules",value:function(){this._ruleEngine=new ke(this._logger),this._ruleEngine.setEnterAction(this._cmdEnterAction.bind(this)),this._ruleEngine.setExitAction(this._cmdExitAction.bind(this));var e=this._isInMedia.bind(this),t=this._isInAdBreak.bind(this),a=this._isInAd.bind(this),
i=this._isInChapter.bind(this),r=this._isInTrackedState.bind(this),n=this._isValidMediaInfo.bind(this),s=this._isValidAdBreakInfo.bind(this),o=this._isValidAdInfo.bind(this),d=this._isValidChapterInfo.bind(this),c=this._isValidQoEInfo.bind(this),u=this._isValidStateInfo.bind(this),l=this._isValidErrorInfo.bind(this),h=this._isDifferentAdBreakInfo.bind(this),f=this._isDifferentAdInfo.bind(this),p=this._isDifferentChapterInfo.bind(this),m=this._allowPlayerStateChange.bind(this),_=this._allowStateTrack.bind(this),
v=this._isInBuffering.bind(this),k=this._isInSeeking.bind(this),y=this._cmdMediaStart.bind(this),g=this._cmdMediaSkip.bind(this),S=this._cmdMediaComplete.bind(this),P=this._cmdError.bind(this),I=this._cmdPlay.bind(this),A=this._cmdPause.bind(this),b=this._cmdBufferStart.bind(this),E=this._cmdBufferComplete.bind(this),C=this._cmdSeekStart.bind(this),M=this._cmdSeekComplete.bind(this),w=this._cmdAdStart.bind(this),T=this._cmdAdComplete.bind(this),O=this._cmdAdSkip.bind(this),R=this._cmdAdBreakStart.bind(this),
B=this._cmdAdBreakComplete.bind(this),z=this._cmdAdBreakSkip.bind(this),j=this._cmdChapterStart.bind(this),D=this._cmdChapterComplete.bind(this),V=this._cmdChapterSkip.bind(this),q=this._cmdStateStart.bind(this),x=this._cmdStateEnd.bind(this),N=this._cmdBitrateChange.bind(this),F=this._cmdQoEUpdate.bind(this),L=this._cmdPlayheadUpdate.bind(this),G=new ve(_e.SessionStart,"API:trackSessionStart");G.addPredicate(e,!1,Ee).addPredicate(n,!0,ze).addAction(y),this._ruleEngine.addRule(G);var H=new ve(_e.SessionComplete,
"API:trackComplete");H.addPredicate(e,!0,be).addAction(O).addAction(z).addAction(V).addAction(S),this._ruleEngine.addRule(H);var Q=new ve(_e.SessionEnd,"API:trackSessionEnd");Q.addPredicate(e,!0,be).addAction(O).addAction(z).addAction(V).addAction(g),this._ruleEngine.addRule(Q);var U=new ve(_e.Error,"API:trackError");U.addPredicate(e,!0,be).addPredicate(l,!0,xe).addAction(P),this._ruleEngine.addRule(U);var K=new ve(_e.Play,"API:trackPlay");K.addPredicate(e,!0,be).addPredicate(m,!0,He).addAction(M).addAction(E).addAction(I),
this._ruleEngine.addRule(K);var W=new ve(_e.Pause,"API:trackPause");W.addPredicate(e,!0,be).addPredicate(m,!0,He).addPredicate(v,!1,Ce).addPredicate(k,!1,we).addAction(A),this._ruleEngine.addRule(W);var Z=new ve(_e.BufferStart,"API:trackEvent(BufferStart)");Z.addPredicate(e,!0,be).addPredicate(m,!0,He).addPredicate(v,!1,Ce).addPredicate(k,!1,we).addAction(b),this._ruleEngine.addRule(Z);var $=new ve(_e.BufferComplete,"API:trackEvent(BufferComplete)");$.addPredicate(e,!0,be).addPredicate(m,!0,He).addPredicate(v,
!0,Me).addAction(E),this._ruleEngine.addRule($);var J=new ve(_e.SeekStart,"API:trackEvent(SeekStart)");J.addPredicate(e,!0,be).addPredicate(m,!0,He).addPredicate(k,!1,we).addPredicate(v,!1,Ce).addAction(C),this._ruleEngine.addRule(J);var X=new ve(_e.SeekComplete,"API:trackEvent(SeekComplete)");X.addPredicate(e,!0,be).addPredicate(m,!0,He).addPredicate(k,!0,Te).addAction(M),this._ruleEngine.addRule(X);var Y=new ve(_e.AdBreakStart,"API:trackEvent(AdBreakStart)");Y.addPredicate(e,!0,be).addPredicate(s,
!0,je).addPredicate(h,!0,De).addAction(O).addAction(z).addAction(R),this._ruleEngine.addRule(Y);var ee=new ve(_e.AdBreakComplete,"API:trackEvent(AdBreakComplete)");ee.addPredicate(e,!0,be).addPredicate(t,!0,Oe).addAction(O).addAction(B),this._ruleEngine.addRule(ee);var te=new ve(_e.AdStart,"API:trackEvent(AdStart)");te.addPredicate(e,!0,be).addPredicate(t,!0,Oe).addPredicate(o,!0,Ve).addPredicate(f,!0,Ne).addAction(O).addAction(w),this._ruleEngine.addRule(te);var ae=new ve(_e.AdComplete,"API:trackEvent(AdComplete)");
ae.addPredicate(e,!0,be).addPredicate(t,!0,Oe).addPredicate(a,!0,Re).addAction(T),this._ruleEngine.addRule(ae);var ie=new ve(_e.AdSkip,"API:trackEvent(AdSkip)");ie.addPredicate(e,!0,be).addPredicate(t,!0,Oe).addPredicate(a,!0,Re).addAction(O),this._ruleEngine.addRule(ie);var re=new ve(_e.ChapterStart,"API::trackEvent(chapterStart)");re.addPredicate(e,!0,be).addPredicate(d,!0,Fe).addPredicate(p,!0,Le).addAction(V).addAction(j),this._ruleEngine.addRule(re);var ne=new ve(_e.ChapterComplete,"API::trackEvent(chapterComplete)");
ne.addPredicate(e,!0,be).addPredicate(i,!0,Be).addAction(D),this._ruleEngine.addRule(ne);var se=new ve(_e.ChapterSkip,"API:trackEvent(chapterSkip)");se.addPredicate(e,!0,be).addPredicate(i,!0,Be).addAction(V),this._ruleEngine.addRule(se);var oe=new ve(_e.BitrateChange,"API:trackEvent(BitrateChange)");oe.addPredicate(e,!0,be).addAction(N),this._ruleEngine.addRule(oe);var de=new ve(_e.QoEUpdate,"API:trackEvent(QoEUpdate)");de.addPredicate(e,!0,be).addPredicate(c,!0,Ge).addAction(F),this._ruleEngine.addRule(de);
var ce=new ve(_e.PlayheadUpdate,"API:trackEvent(PlayheadUpdate)");ce.addPredicate(e,!0,be).addAction(L),this._ruleEngine.addRule(ce);var ue=new ve(_e.StateStart,"API:trackEvent(StateStart)");ue.addPredicate(e,!0,be).addPredicate(u,!0,qe).addPredicate(r,!1,Qe).addPredicate(_,!0,Ke).addAction(q),this._ruleEngine.addRule(ue);var le=new ve(_e.StateEnd,"API:trackEvent(StateEnd)");le.addPredicate(e,!0,be).addPredicate(u,!0,qe).addPredicate(r,!0,Ue).addAction(x),this._ruleEngine.addRule(le)}},{key:"_isInMedia",
value:function(){return!S(this._media)}},{key:"_isInAdBreak",value:function(){return this._media.isInAdBreak}},{key:"_isInAd",value:function(){return this._media.isInAd}},{key:"_isInChapter",value:function(){return this._media.isInChapter}},{key:"_isInBuffering",value:function(){return this._media.isInPlaybackState(ye.Buffer)}},{key:"_isInSeeking",value:function(){return this._media.isInPlaybackState(ye.Seek)}},{key:"_isInTrackedState",value:function(e){var t=ue.deserialize(e[me.Params]);return this._media.isCustomStateActive(t)}},
{key:"_isValidMediaInfo",value:function(e){return null!=le.deserialize(e[me.Params])}},{key:"_isValidAdBreakInfo",value:function(e){return null!=oe.deserialize(e[me.Params])}},{key:"_isValidAdInfo",value:function(e){return null!=se.deserialize(e[me.Params])}},{key:"_isValidStateInfo",value:function(e){return null!=ue.deserialize(e[me.Params])}},{key:"_isValidChapterInfo",value:function(e){return null!=de.deserialize(e[me.Params])}},{key:"_isValidQoEInfo",value:function(e){return null!=he.deserialize(e[me.Params])}},
{key:"_isValidErrorInfo",value:function(e){var t=e[me.Params];if(!J(t))return!1;var a=t[me.ErrorId];return b(a)}},{key:"_isDifferentAdBreakInfo",value:function(e){return!oe.deserialize(e[me.Params]).equal(this._media.adBreakInfo)}},{key:"_isDifferentAdInfo",value:function(e){return!se.deserialize(e[me.Params]).equal(this._media.adInfo)}},{key:"_isDifferentChapterInfo",value:function(e){return!de.deserialize(e[me.Params]).equal(this._media.chapterInfo)}},{key:"_allowPlayerStateChange",value:function(){return!this._media.isInAdBreak||
this._media.isInAd}},{key:"_allowStateTrack",value:function(e){var t=ue.deserialize(e[me.Params]);return this._media.hasTrackedCustomState(t)||this._media.numTrackedCustomStates()<10}},{key:"_cmdEnterAction",value:function(e,t){var a=this._getRefTs(t);return S(this._hitGenerator)||this._hitGenerator.setRefTS(a),!0}},{key:"_cmdExitAction",value:function(e,t){if(S(this._media))return!1;e.id===_e.AdStart&&(!this._media.isInPlaybackState(ye.Init)||this._media.isInPlaybackState(ye.Buffer)||this._media.isInPlaybackState(ye.Seek)||
this._media.enterPlaybackState(ye.Play)),e.id!==_e.BufferComplete&&e.id!==_e.SeekComplete||this._media.isInPlaybackState(ye.Init)&&this._media.enterPlaybackState(ye.Pause),this._cmdIdleDetection(t),this._cmdSessionTimeoutDetection(t),this._cmdContentStartDetection(t);var a=e.id===_e.AdStart||e.id===_e.AdBreakComplete;return this._hitGenerator.processPlayback(a),!0}},{key:"_cmdMediaStart",value:function(e){var t=le.deserialize(e[me.Params]),a=e[me.Metadata],i=this._getRefTs(e);return this._media=new ge(t,
a),this._hitGenerator=this._createHitGenerator(i),this._hitGenerator.processMediaStart(),this._sessionRefTs=i,this._inPrerollInterval=0!==t.prerollWaitTime,this._prerollRefTs=i,!0}},{key:"_cmdMediaComplete",value:function(){return this._hitGenerator.processMediaComplete(),this._resetStates(),!0}},{key:"_cmdMediaSkip",value:function(){return this._hitGenerator.processMediaSkip(),this._resetStates(),!0}},{key:"_cmdAdBreakStart",value:function(e){var t=oe.deserialize(e[me.Params]);return this._media.setAdBreakInfo(t),
this._hitGenerator.processAdBreakStart(),!0}},{key:"_cmdAdBreakComplete",value:function(){return this._hitGenerator.processAdBreakComplete(),this._media.clearAdBreakInfo(),!0}},{key:"_cmdAdBreakSkip",value:function(){return this._media.isInAdBreak&&(this._hitGenerator.processAdBreakSkip(),this._media.clearAdBreakInfo()),!0}},{key:"_cmdAdStart",value:function(e){var t=se.deserialize(e[me.Params]),a=e[me.Metadata];return this._media.setAdInfo(t,a),this._hitGenerator.processAdStart(),!0}},{key:"_cmdAdComplete",
value:function(){return this._hitGenerator.processAdComplete(),this._media.clearAdInfo(),!0}},{key:"_cmdAdSkip",value:function(){return this._media.isInAd&&(this._hitGenerator.processAdSkip(),this._media.clearAdInfo()),!0}},{key:"_cmdChapterStart",value:function(e){var t=de.deserialize(e[me.Params]),a=e[me.Metadata];return this._media.setChapterInfo(t,a),this._hitGenerator.processChapterStart(),!0}},{key:"_cmdChapterComplete",value:function(){return this._hitGenerator.processChapterComplete(),this._media.clearChapterInfo(),
!0}},{key:"_cmdChapterSkip",value:function(){return this._media.isInChapter&&(this._hitGenerator.processChapterSkip(),this._media.clearChapterInfo()),!0}},{key:"_cmdError",value:function(e){var t=e[me.Params][me.ErrorId];return this._hitGenerator.processError(t),!0}},{key:"_cmdBitrateChange",value:function(){return this._hitGenerator.processBitrateChange(),!0}},{key:"_cmdPlay",value:function(){return this._media.enterPlaybackState(ye.Play),!0}},{key:"_cmdPause",value:function(){return this._media.enterPlaybackState(ye.Pause),
!0}},{key:"_cmdBufferStart",value:function(){return this._media.enterPlaybackState(ye.Buffer),!0}},{key:"_cmdBufferComplete",value:function(){return this._media.isInPlaybackState(ye.Buffer)&&this._media.exitPlaybackState(ye.Buffer),!0}},{key:"_cmdSeekStart",value:function(){return this._media.enterPlaybackState(ye.Seek),!0}},{key:"_cmdSeekComplete",value:function(){return this._media.isInPlaybackState(ye.Seek)&&this._media.exitPlaybackState(ye.Seek),!0}},{key:"_cmdQoEUpdate",value:function(e){var t=
he.deserialize(e[me.Params]);return this._media.qoeInfo=t,!0}},{key:"_cmdPlayheadUpdate",value:function(e){var t=e[me.Params];if(J(t)){var a=t[me.Playhead];Z(a)&&a>=0&&(this._media.playhead=a)}return!0}},{key:"_cmdIdleDetection",value:function(e){var t=this._getRefTs(e);this._media.isIdle()?this._mediaIdle?!this._trackerIdle&&t-this._mediaIdleStartTs>=18E5&&(this._hitGenerator.processSessionAbort(),this._trackerIdle=!0):(this._mediaIdle=!0,this._mediaIdleStartTs=t):(this._trackerIdle&&(this._hitGenerator.processSessionRestart(),
this._trackerIdle=!1,this._sessionRefTs=t,this._contentStarted=!1,this._contentStartRefTs=null),this._mediaIdle=!1)}},{key:"_cmdSessionTimeoutDetection",value:function(e){var t=this._getRefTs(e);!this._trackerIdle&&t-this._sessionRefTs>=864E5&&(this._hitGenerator.processSessionAbort(),this._hitGenerator.processSessionRestart(),this._sessionRefTs=t,this._contentStarted=!1,this._contentStartRefTs=null)}},{key:"_cmdContentStartDetection",value:function(e){return!(!this._media.isIdle()&&!this._contentStarted)||
(this._media.isInAdBreak?(this._contentStartRefTs=null,!0):(null==this._contentStartRefTs&&(this._contentStartRefTs=this._getRefTs(e)),this._getRefTs(e)-this._contentStartRefTs>=1E3&&(this._hitGenerator.processPlayback(!0),this._contentStarted=!0),!0))}},{key:"_cmdStateStart",value:function(e){var t=ue.deserialize(e[me.Params]);return this._media.startCustomState(t),this._hitGenerator.processCustomStateStart(t),!0}},{key:"_cmdStateEnd",value:function(e){var t=ue.deserialize(e[me.Params]);return this._media.endCustomState(t),
this._hitGenerator.processCustomStateEnd(t),!0}},{key:"_getRefTs",value:function(e){var t=e[me.TimeStamp];return $(t)?t:null}},{key:"_prerollDeferRule",value:function(e,t){if(this._inPrerollInterval&&null!=this._media){var a=this._media.mediaInfo.prerollWaitTime;if(this._prerollQueuedRules.push({eventName:e,context:t}),this._getRefTs(t)-this._prerollRefTs>=a||e===_e.AdBreakStart||e===_e.MediaComplete||e===_e.MediaSkip){for(var i=this._prerollReorderRules(this._prerollQueuedRules),r=0;r<i.length;r++){var n=
i[r];this._processRule(n.eventName,n.context)}this._prerollQueuedRules=[],this._inPrerollInterval=!1}return!0}return!1}},{key:"_prerollReorderRules",value:function(e){for(var t=[],a=!1,i=0;i<e.length;++i)if(e[i].eventName===_e.AdBreakStart){a=!0;break}for(var r=a,n=0;n<e.length;n++){var s=e[n];s.eventName===_e.Play&&r||(s.eventName===_e.AdBreakStart&&(r=!1),t.push(s))}return t}}],[{key:"_cleanMetadata",value:function(e){var t={};return J(e)&&Object.keys(e).forEach(function(a){var i=e[a];We.test(a)&&
!S(i)&&(t[a]=String(i))}),t}}]),e}(),$e=function(){function e(a,i,r){t(this,e),this._logger=R("MediaTracker ("+i+")"),this._tracker=new Ze(a,this._logger,r),this._timer=null,this._lastEventTS=null,this._lastPlayheadParams=null}return i(e,[{key:"trackSessionStart",value:function(e,t){this._logger.log("trackSessionStart(info:"+pe(e)+" metadata:"+pe(t)+")"),this._trackInternal(_e.SessionStart,e,t)}},{key:"trackSessionEnd",value:function(){this._logger.log("trackSessionEnd"),this._trackInternal(_e.SessionEnd)}},
{key:"trackComplete",value:function(){this._logger.log("trackComplete"),this._trackInternal(_e.SessionComplete)}},{key:"trackPlay",value:function(){this._logger.log("trackPlay"),this._trackInternal(_e.Play)}},{key:"trackPause",value:function(){this._logger.log("trackPause"),this._trackInternal(_e.Pause)}},{key:"trackEvent",value:function(e,t,a){this._logger.log("trackEvent("+e+" info:"+pe(t)+" metadata:"+pe(a)+")"),this._trackInternal(e,t,a)}},{key:"trackError",value:function(e){this._logger.log("trackError("+
e+")");var t=r({},me.ErrorId,e);this._trackInternal(_e.Error,t)}},{key:"updatePlayhead",value:function(e){var t=r({},me.Playhead,e);this._trackInternal(_e.PlayheadUpdate,t)}},{key:"updateQoEObject",value:function(e){this._logger.log("updateQoEObject("+pe(e)+")"),this._trackInternal(_e.QoEUpdate,e)}},{key:"destroy",value:function(){this._logger.log("destroy()"),this._stopTimer(),this._tracker=null}},{key:"_trackInternal",value:function(e,t,a){var i,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];
if(this._tracker){var s=E(),o=(r(i={},me.Name,e),r(i,me.Params,t),r(i,me.Metadata,a),r(i,me.TimeStamp,s),r(i,me.InternalEvent,n),i),d=this._tracker.track(o);this._lastEventTS=s,e===_e.PlayheadUpdate&&(this._lastPlayheadParams=t),e===_e.SessionStart&&d?this._startTimer():e!==_e.SessionComplete&&e!==_e.SessionEnd||this._stopTimer()}else this._logger.warn("Dropping the call as the tracker instance is already destroyed")}},{key:"_startTimer",value:function(){var e=this;this._timer||(this._timer=M(function(){e._onTick()},
500))}},{key:"_stopTimer",value:function(){var e;this._timer&&(e=this._timer,clearInterval(e),this._timer=null)}},{key:"_onTick",value:function(){E()-this._lastEventTS>750&&this._trackInternal(_e.PlayheadUpdate,this._lastPlayheadParams,null,!0)}}]),e}(),Je=new ne,Xe=l();var Ye={configure:function(e){Je.configure(e)},getInstance:function(e){var t="tracker"+Xe.getUniqueId();return new $e(Je,t,e)},createMediaObject:function(e,t,a,i,r){var n=null;try{n=(new le({id:t,name:e,streamType:i,mediaType:r,length:a})).serialize()}catch(e){fe.error("Error creating MediaObject ("+
e.message+")")}return n},createAdBreakObject:function(e,t,a){var i=null;try{i=(new oe({name:e,position:t,startTime:a})).serialize()}catch(e){fe.error("Error creating AdBreakObject ("+e.message+")")}return i},createAdObject:function(e,t,a,i){var r=null;try{r=(new se({id:t,name:e,position:a,length:i})).serialize()}catch(e){fe.error("Error creating AdObject ("+e.message+")")}return r},createChapterObject:function(e,t,a,i){var r=null;try{r=(new de({name:e,position:t,length:a,startTime:i})).serialize()}catch(e){fe.error("Error creating ChapterObject ("+
e.message+")")}return r},createQoEObject:function(e,t,a,i){var r=null;try{r=(new he({bitrate:e,droppedFrames:i,fps:a,startupTime:t})).serialize()}catch(e){fe.error("Error creating QoEObject ("+e.message+")")}return r},createStateObject:function(e){var t=null;try{t=(new ue({name:e})).serialize()}catch(e){fe.error("Error creating StateObject ("+e.message+")")}return t},version:"js-3.0.1",Event:h,MediaType:p,PlayerState:m,StreamType:y,MediaObjectKey:f,VideoMetadataKeys:_,AudioMetadataKeys:v,AdMetadataKeys:k};
var et="ecid",tt="analytics",at="mediaanalytics",it=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(s,e);var a,n=(a=s,function(){var e,t=o(a);if(c()){var i=o(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return u(this,e)});function s(e,a){var i;if(t(this,s),i=n.call(this),
!e)throw new Error("Valid appmeasurement instance is required");if(!e.visitor)throw new Error("Valid visitor instance is required");return i._mediaConfig=a,i._appMeasurement=e,i._appMeasurementReady=!1,i._privacyResolved=!1,i._logger=R("WebECResolver"),i._fetchECParams(),i._fetchPrivacyStatus(),i._setupResolver(),i}return i(s,[{key:"resolveKeys",value:function(e){if(!e||0===e.length)return{};for(var t={},a=0;a<e.length;a++){var i=e[a],r=Object.prototype.hasOwnProperty.call(this._fnMap,i)?this._fnMap[i].call(this):
null;S(r)||(t[i]=r)}return t}},{key:"getPrivacyStatus",value:function(){return this._privacyStatus[at]}},{key:"notifyPrivacyChange",value:function(e){this._mediaPrivacyClb.push(e)}},{key:"isReady",value:function(){return!!this._privacyResolved&&(this._privacyStatus[at]===g.OptIn&&(this._privacyStatus[tt]!==g.OptIn||this._appMeasurementReady))}},{key:"_setupResolver",value:function(){var e=this,t={};t[B.Rsid]=function(){return e._appMeasurement.account},t[B.AnalyticsTrackingServer]=function(){return e._appMeasurement.ssl&&
e._appMeasurement.trackingServerSecure?e._appMeasurement.trackingServerSecure:e._appMeasurement.trackingServer},t[B.AnalyticsSsl]=function(){return e._appMeasurement.ssl},t[B.Vid]=function(){return e._appMeasurement.visitorID},t[B.Aid]=function(){var t=e._appMeasurement.analyticsVisitorID;if(""!==t)return t},t[B.Mcid]=function(){return e._appMeasurement.marketingCloudVisitorID},t[B.McOrgId]=function(){return e._appMeasurement.visitor.marketingCloudOrgID},t[B.AamLocHint]=function(){var t=parseInt(e._appMeasurement.audienceManagerLocationHint,
10);return isNaN(t)?void 0:t},t[B.CustomerIds]=function(){return e._appMeasurement.visitor.getCustomerIDs()},t[B.MediaTrackingServer]=function(){return e._mediaConfig.trackingServer},t[B.MediaChannel]=function(){return e._mediaConfig.channel},t[B.MediaAppVersion]=function(){return e._mediaConfig.appVersion},t[B.MediaPlayerName]=function(){return e._mediaConfig.playerName},t[B.MediaSsl]=function(){return e._mediaConfig.ssl},this._fnMap=t}},{key:"_fetchECParams",value:function(){this._appMeasurement.isReadyToTrack()?
this._onAppMeasurementReady():this._appMeasurement.callbackWhenReadyToTrack(this,this._onAppMeasurementReady,[])}},{key:"_onAppMeasurementReady",value:function(){this._logger.log("AppMeasurement ready"),this._appMeasurementReady=!0}},{key:"_fetchPrivacyStatus",value:function(){var e,t=this;this._mediaPrivacyClb=[],this._optIn=window.adobe&&window.adobe.optIn?window.adobe.optIn:void 0;var a=this._optIn&&this._optIn.doesOptInApply,i=a?g.OptUnknown:g.OptIn;this._privacyStatus=(r(e={},et,i),r(e,tt,i),
r(e,at,i),e),a?this._optIn.fetchPermissions(function(){t._privacyResolved=!0,t._privacyStatus[et]=t._optIn.isApproved(t._optIn.Categories.ECID)?g.OptIn:g.OptOut,t._privacyStatus[tt]=t._optIn.isApproved(t._optIn.Categories.ANALYTICS)?g.OptIn:g.OptOut,t._privacyStatus[at]=t._optIn.isApproved(t._optIn.Categories.MEDIA_ANALYTICS)?g.OptIn:g.OptOut,t._mediaPrivacyClb.forEach(function(e){e(t._privacyStatus[at])}),t._logger.log("Privacy Status "+pe(t._privacyStatus))},!0):(this._privacyResolved=!0,this._logger.log("OptIn service not used, defaulting privacy status to "+
pe(this._privacyStatus)))}}]),s}(function(){function e(){t(this,e)}return i(e,[{key:"resolveKeys",value:function(){throw new Error("Implementation error: Method must be overridden.");}},{key:"isReady",value:function(){}},{key:"getPrivacyStatus",value:function(){}},{key:"notifyPrivacyChange",value:function(){}}]),e}()),rt=R("Media"),nt=!1;return{Media:s({},Ye,{configure:function(e,t){if(T(e||{}),nt)rt.error("MediaSDK is already configured");else{rt.log("configure("+pe(e)+")");try{!function(e){if(!J(e))throw new Error("mediaConfig is not a valid object");
var t=e.trackingServer;if(!b(t))throw new Error("trackingServer is empty");if(-1!==t.indexOf("hb.omtrdc.net"))throw new Error("trackingServer should be set to Media collection endpoint and not heartbeat endpoint. Contact your Adobe representative for more information.");}(e);var a=new it(t,e);Ye.configure(a),nt=!0}catch(e){rt.error("Error configuring MediaSDK : "+e.message),T({debugLogging:!1})}}},getInstance:function(e){return nt?Ye.getInstance(e):(rt.error("MediaSDK should be configured before calling getInstance"),
null)}}),MediaConfig:function e(){t(this,e),this.trackingServer=void 0,this.channel=void 0,this.appVersion=void 0,this.playerName=void 0,this.ssl=!0,this.debugLogging=!1}}})},3786620,660779,24);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;__dataLayer.media=__dataLayer.media||{};function is_muted(player){if(player)if(typeof player.muted==="boolean")return player.muted;else if(typeof player.muted==="function")return player.muted();return"N/A"}function get_duration(mediaItem,player){if(mediaItem){if((mediaItem.streamType==="live"||mediaItem.content_type==="live")&&!/24x7_news/.test(mediaItem.externalId))return 86400;
if(mediaItem.duration){var duration=Number(mediaItem.duration);if(isNaN(duration))return 0;if(duration>9999)return Math.floor(duration/1E3);return duration}}if(player&&player.cache_&&player.cache_.duration)return player.cache_.duration;return 0}function get_screen_orientation(){if(screen&&screen.orientation&&screen.orientation.type)return screen.orientation.type;var mql=window.matchMedia("(orientation: portrait)");if(mql.matches)return"portrait";else return"landscape"}function get_player_name(player){if(player.techOptions&&
player.techOptions.tech)return player.techOptions.tech;return"Unified_TMS"}function get_gma_asset_name(omn,vs){omn=omn||{};var asv="";vs.forEach(function(v){if(asv)return;if(omn[v]){var asf=omn[v]||"";if(asf.indexOf("|")>-1){var cv=asf.split("|");asv=cv[1]||""}}});return asv}function get_network(mediaItem){if(mediaItem.network&&mediaItem.network.brand)return mediaItem.network.brand;if(mediaItem.trackingName!==undefined)return mediaItem.trackingName;if(mediaItem.network&&mediaItem.network.name!==undefined)return mediaItem.network.name;
return"N/A"}var isTVE=false,isMarvel=false;if(window.location.hostname.indexOf("marvel.com")>-1)isMarvel=true;else if(window.location.hostname.match(/(abc|fftv|freeform|fxtv|ngtv|fxnetworks|watchdisney)(fe(sb|qa)?)?\.com$/)&&window.location.hostname.indexOf("abc6")===-1)isTVE=true;else if(window.location.href.indexOf("nationalgeographic.com/tv")>-1)isTVE=true;__dataLayer.updateMedia=function(playerDLname,eventName,eventData,currentPlayer){if(typeof currentPlayer!=="object"){Bootstrapper.Logging.logMsg("Failed to locate proper media player data in passed parameters. Exiting updateMedia function.");
return}if(playerDLname==="dtci.media"){var bundle=currentPlayer.bundle_||{},configs=bundle.configs_||{},rawMediaItem=configs.mediaItem||{},player=bundle.player_||{},mediaItem=player.mediaItem||{},tracking=mediaItem.tracking||{},conviva=tracking.conviva||{},omniture=tracking.omniture||{},heartbeats=tracking.heartbeats||{},mediainfo=player.mediainfo||{},ima3=player.ima3||{},currentAdEventInfo=ima3.currentAdEventInfo||{},adPosition=window.adPosition&&window.adPosition.toString(),show=mediaItem.show||
{},page=__dataLayer.page||{},site=__dataLayer.site||{};if(isMarvel){var adInfo=configs.advertisingInfo||{};__dataLayer.media.kitchensink={"raw":rawMediaItem,"ads":adInfo}}if(currentAdEventInfo.adId!==undefined){__dataLayer.media.ad_id=currentAdEventInfo.adId&&currentAdEventInfo.adId[adPosition-1]||"N/A";__dataLayer.media.ad_length=currentAdEventInfo.creativeLength&&currentAdEventInfo.creativeLength[adPosition-1]||"N/A";__dataLayer.media.ad_name=currentAdEventInfo.adTitle&&currentAdEventInfo.adTitle[adPosition-
1]||"N/A";__dataLayer.media.ad_type=currentAdEventInfo.adType||"N/A";__dataLayer.media.ad_player=currentAdEventInfo.adSystem&&currentAdEventInfo.adSystem[adPosition-1]||"";__dataLayer.media.ad_position=adPosition||"1";__dataLayer.media.ad_creativeId=currentAdEventInfo.creativeId&&currentAdEventInfo.creativeId[adPosition-1]||"";__dataLayer.media.ad_creativeUrl=currentAdEventInfo.creativeUrl&&currentAdEventInfo.creativeUrl[adPosition-1]||""}__dataLayer.media.player_id=player.id_||currentPlayer.guid;
__dataLayer.media.air_date=heartbeats.PublishDate||mediaItem.airDate||"N/A";__dataLayer.media.airing_id="";__dataLayer.media.affiliate_name=mediainfo.affiliate||"N/A";__dataLayer.media.authentication_status="";__dataLayer.media.content_language=mediaItem.language||"N/A";__dataLayer.media.content_lock_flag=mediaItem.gated||"N/A";__dataLayer.media.daypart=page.daypart||show.dayPart||"N/A";__dataLayer.media.description=mediaItem.description||"N/A";__dataLayer.media.digital_date=mediaItem.availableDate||
"N/A";__dataLayer.media.episode=mediainfo.eventId||"N/A";__dataLayer.media.episodeNumber=mediaItem.episodeNumber||"N/A";__dataLayer.media.feed=mediaItem.network&&mediaItem.network.name||"none";__dataLayer.media.fName=rawMediaItem.name||"N/A";__dataLayer.media.format=mediaItem.streamType||"N/A";__dataLayer.media.contentType=mediaItem.content_type||mediaItem.streamType;__dataLayer.media.full_episode=mediaItem.entityType&&mediaItem.entityType==="longform"?"y":"n";__dataLayer.media.genre=mediaItem.videoShowGenre||
mediaItem.genre||conviva["ns_st_ge"]||show.genre||"";__dataLayer.media.is_mute=is_muted(player);__dataLayer.media.length=__dataLayer.media.duration=get_duration(mediaItem,player);__dataLayer.media.media_id=mediaItem.id&&mediaItem.id.toString()||"";__dataLayer.media.media_name=isTVE&&__dataLayer.media.fName!=="N/A"?__dataLayer.media.fName:mediaItem.title||"N/A";__dataLayer.media.module_position_number=mediaItem.module_position_number;__dataLayer.media.network=get_network(mediaItem);__dataLayer.media.orientation=
get_screen_orientation()||"";__dataLayer.media.placement=mediaItem.placement||"";__dataLayer.media.play_location=heartbeats.PlayLocation||"";__dataLayer.media.player_name=currentPlayer.platformVersion?currentPlayer.platformVersion:get_player_name(player);__dataLayer.media.prefix=show.showPrefix||"N/A";__dataLayer.media.program=show.title||"N/A";__dataLayer.media.rating=mediaItem.tvrating||"N/A";__dataLayer.media.season=mediaItem.seasonNumber||"N/A";__dataLayer.media.show_type=mediaItem.entityType||
"N/A";__dataLayer.media.sport=mediaItem.sportName||"N/A";__dataLayer.media.start_type=bundle.startType||mediainfo.startType||"N/A";__dataLayer.media.title=show.title||"N/A";__dataLayer.media.trackTitle=show.trackTitle||"N/A";__dataLayer.media.type=mediaItem.type||"N/A";__dataLayer.media.videoOrigin=page.originator||"N/A";__dataLayer.media.video_binge_play_count="";__dataLayer.media.video_detail="";__dataLayer.media.video_domain="";__dataLayer.media.video_first_consumption="";__dataLayer.media.video_saved_list_content=
"";__dataLayer.media.video_start_source="";__dataLayer.media.date_modified=mediaItem.dateModified||"N/A";__dataLayer.media.first_published=mediaItem.firstPub||"N/A";__dataLayer.media.author=mediaItem.author||"N/A";__dataLayer.media.external_id=mediaItem.externalId||"";__dataLayer.media.asset_title=mediaItem.title||"";__dataLayer.media.location=mediaItem.location||"N/A";__dataLayer.media.originating_station=mediaItem.originating_station||"N/A";__dataLayer.media.hic_category=mediaItem.hicCategory||
"N/A";__dataLayer.media.view_type=mediaItem.viewType||"N/A";__dataLayer.media.m3u8=mediaItem.source&&mediaItem.source.url||"N/A";__dataLayer.media.tags=mediaItem.tags||conviva.tags||"N/A";__dataLayer.media.date_viewed=mediaItem.dateViewed;__dataLayer.media.keywords=mediaItem.keywords||player.tagAttributes&&player.tagAttributes.class;__dataLayer.media.topic=mediaItem.topic;__dataLayer.media.stationTitle=mediaItem.stationTitle||"";__dataLayer.media.tms_id=mediaItem.tmsid||"";__dataLayer.media.is_live=
mediaItem.video_isLive?mediaItem.video_isLive:mediaItem.isLive||false;__dataLayer.media.is_breaking=mediaItem.video_isBreaking||false;__dataLayer.media.game_id=heartbeats.GameID||"";__dataLayer.media.video_type=heartbeats.VideoType||"";__dataLayer.media.asset_name=conviva.assetName||"";if(site.site==="gma"){var altasn=get_gma_asset_name(omniture,["eVar2","prop3"]);if(altasn)__dataLayer.media.asset_name=altasn}__dataLayer.media.video_size=omniture.eVar29||""}else if(v2player);else if(hudsonPlayer);
document.dispatchEvent(new Event("tms.media.ready"))};Bootstrapper.register("datalayer")},3786607,667991,24);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ADBhelper={};Bootstrapper.nielsenHelper={};Bootstrapper.comscoreHelper={};Bootstrapper.adobeTrackerMap={};Bootstrapper.nielsenTrackerMap={};Bootstrapper.comscoreTrackerMap={};var isTVE=/(abc|fftv|freeform|fxtv|fxnetworks|watchdisney)(fe(sb|qa)?)?\.com/.test(location.hostname)||/natgeo|ngtv|nationalgeographic/.test(location.hostname)&&location.pathname.startsWith("/tv/");
var currentAdPod=0;Bootstrapper.ADBhelper.createMediaObject=function(){var capitalize=function(string){return string[0].toUpperCase()+string.substring(1)};var _dl=window.__dataLayer||{},media=_dl.media||{},isLive=media.format==="live"||media.contentType==="live";var dfltMType="video",mType=__dataLayer.media.type||dfltMType,upMtype=capitalize(mType),mKeyType=ADB.Media.MediaType[upMtype]||dfltMType;var dfltSType="vod",customType=__dataLayer.media.contentType,sKeyType;if(customType)sKeyType=customType;
else var sType=customType||dfltSType,aod=mType=="audio"&&sType!="podcast",vod=mType=="video"&&!isLive,upSType=isLive?"Live":aod?"AOD":vod?"VOD":capitalize(sType),sKeyType=ADB.Media.StreamType[upSType]||dfltSType;var mediaObject=ADB.Media.createMediaObject(__dataLayer.media.media_name,__dataLayer.media.media_id,__dataLayer.media.length,sKeyType,mKeyType);return mediaObject};Bootstrapper.ADBhelper.sessionSetupStart=function(currentPlayer){currentAdPod=0;if(typeof window.ADB==="undefined"||ADB.Media.getInstance()===
null){Bootstrapper.Logging.logMsg("Failed to setup Adobe Media Object, window.ADB was undefined");return}var newAdobeTracker=ADB.Media.getInstance();adobeTrackers.push(newAdobeTracker);if(currentPlayer&&currentPlayer.guid)Bootstrapper.adobeTrackerMap[currentPlayer.guid]=newAdobeTracker;var mediaObject=Bootstrapper.ADBhelper.createMediaObject();Bootstrapper.hbConfig.computeContextData();var contextData=Bootstrapper.hbConfig.contextData||{};newAdobeTracker.trackSessionStart(mediaObject,contextData)};
Bootstrapper.ADBhelper.adPodStart=function(curAdobeTracker,playhead,eventData){if(curAdobeTracker===null)return;var tempMediaObject=Bootstrapper.ADBhelper.createMediaObject();Bootstrapper.hbConfig.computeContextData();tempContextData=Bootstrapper.hbConfig.contextData||{};curAdobeTracker.trackSessionStart(tempMediaObject,tempContextData);var adType=eventData.type.replace("roll","-roll");window.adPosition=1;currentAdPod++;var adBreakObject=ADB.Media.createAdBreakObject(adType,currentAdPod,playhead);
curAdobeTracker.trackEvent(ADB.Media.Event.AdBreakStart,adBreakObject)};Bootstrapper.ADBhelper.adStart=function(curAdobeTracker){if(curAdobeTracker===null)return;var adObject=ADB.Media.createAdObject(__dataLayer.media.ad_name,__dataLayer.media.ad_id,adPosition,__dataLayer.media.ad_length),adMetaData={};adMetaData["media.ad.playerName"]=__dataLayer.media.ad_player;adMetaData[ADB.Media.AdMetadataKeys.CreativeId]=__dataLayer.media.ad_creativeId;adMetaData[ADB.Media.AdMetadataKeys.CreativeUrl]=__dataLayer.media.ad_creativeUrl;
window.adPosition+=1;curAdobeTracker.trackEvent(ADB.Media.Event.AdStart,adObject,adMetaData)};Bootstrapper.ADBhelper.playheadUpdate=function(curAdobeTracker,playhead){if(curAdobeTracker===null)return;curAdobeTracker.updatePlayhead(playhead)};Bootstrapper.ADBhelper.simpleTrackEvent=function(curAdobeTracker,eventName){if(curAdobeTracker===null)return;curAdobeTracker.trackEvent(eventName)};Bootstrapper.ADBhelper.play=function(curAdobeTracker,playerDLname,eventName,eventData,currentPlayer){if(curAdobeTracker===
null)return;__dataLayer.updateMedia(playerDLname,eventName,eventData,currentPlayer);var tempMediaObject=Bootstrapper.ADBhelper.createMediaObject();Bootstrapper.hbConfig.computeContextData();var tempContextData=Bootstrapper.hbConfig.contextData||{};curAdobeTracker.trackSessionStart(tempMediaObject,tempContextData);curAdobeTracker.trackPlay()};Bootstrapper.ADBhelper.pause=function(curAdobeTracker){if(curAdobeTracker===null)return;curAdobeTracker.trackPause()};Bootstrapper.ADBhelper.end=function(curAdobeTracker,
endType){if(curAdobeTracker===null)return;if(endType&&endType=="complete")curAdobeTracker.trackComplete();curAdobeTracker.trackSessionEnd()};Bootstrapper.ADBhelper.error=function(curAdobeTracker,eventData){if(curAdobeTracker===null)return;var errorString="unknown error";if(eventData){if(eventData.code)errorString=eventData.code;if(eventData.message)errorString+=": "+eventData.message}errorString=errorString.replace(/,/ig,"");curAdobeTracker.trackError(errorString);curAdobeTracker.trackSessionEnd()};
var nielsenInstance=1,nielsenChannels={"abc":{"id":"us-300437","brand":"c02"},"ff":{"id":"us-900873","brand":"c02"},"fx":{"id":"us-501166","brand":"c01"},"fxx":{"id":"us-501166","brand":"c02"},"fxm":{"id":"us-501166","brand":"c03"},"ngc":{"id":"us-308071","brand":"c01"},"ngw":{"id":"us-308071","brand":"c02"},"sec":{"id":"us-600140","brand":"c06"}};Bootstrapper.nielsenHelper.getSubBrand=function(channel,type){return nielsenChannels[channel]&&nielsenChannels[channel][type]||""};Bootstrapper.nielsenHelper.getContentMetadata=
function(){Bootstrapper.Logging.logMsg("Nielsen: Setting Nielsen Metadata for Content");var contentMetadataObject={},_dl=window.__dataLayer||{},site=_dl.site||{},siteDes=site.site||"";if(__dataLayer.media.format!=="live")contentMetadataObject={type:"content",assetid:__dataLayer.media.media_id||"",program:__dataLayer.media.media_name||"",title:__dataLayer.media.title&&__dataLayer.media.title!="N/A"?__dataLayer.media.title:__dataLayer.media.media_name||"",length:__dataLayer.media.duration&&__dataLayer.media.duration!==
"N/A"?__dataLayer.media.duration:0,airdate:__dataLayer.media.air_date&&__dataLayer.media.air_date!=="N/A"?(new Date(__dataLayer.media.air_date)).toISOString():"",isfullepisode:__dataLayer.media.contentType==="live"?"y":__dataLayer.media.full_episode||"",adloadtype:__dataLayer.media.format==="live"?"1":"2"};else contentMetadataObject={type:"content",adModel:"1"};if(siteDes==="espn"){if(__dataLayer.media.format==="VOD")contentMetadataObject.segB="custom segment B";contentMetadataObject.segC="custom segment C";
contentMetadataObject.crossId1="Standard Episode ID";contentMetadataObject.crossId2="Content Originator"}else if(siteDes==="abcn"){contentMetadataObject.progen="N";contentMetadataObject.crossId1=__dataLayer.media.media_id||"n/a";contentMetadataObject.crossId2="abcnews";if(__dataLayer.media.contentType==="live"){contentMetadataObject.segB="ABC News Live";contentMetadataObject.segC="Live Stream"}else contentMetadataObject.program="ABC News"}else if(isTVE){contentMetadataObject.program=__dataLayer.media.title||
"";contentMetadataObject.title=__dataLayer.media.media_name||"";contentMetadataObject.crossId2=__dataLayer.media.network||"";contentMetadataObject.clientid=Bootstrapper.nielsenHelper.getSubBrand(__dataLayer.media.network,"id");contentMetadataObject.subbrand=Bootstrapper.nielsenHelper.getSubBrand(__dataLayer.media.network,"brand");if(__dataLayer.media.network==="abc")contentMetadataObject.affiliate=__dataLayer.pzn.affiliate_id||""}else if(siteDes==="sec")contentMetadataObject.crossId2="ESPN";Bootstrapper.Logging.logMsg("Nielsen: Nielsen Metadata: ",
contentMetadataObject);return contentMetadataObject};Bootstrapper.nielsenHelper.sessionSetupStart=function(currentPlayer){if(typeof window.NOLBUNDLE==="undefined"){Bootstrapper.Logging.logMsg("Nielsen: Failed to setup Nielsen Instance, window.NOLBUNDLE was undefined");return}if(typeof window.nielsenConfig==="undefined"){Bootstrapper.Logging.logMsg("Nielsen: no nielsen config found");return}Bootstrapper.nielsenHelper.newSessionFlag=true;Bootstrapper.Logging.logMsg("Nielsen: Starting Nielsen Session on playback");
var tempInstance,nielsenConfigId,nielsenKey=(!!window.__dataLayer&&!!window.__dataLayer.site&&!!window.__dataLayer.site.portal?__dataLayer.site.portal:"")||__dataLayer.site.site.split("-")[0],_config=nielsenConfig[nielsenKey]||{};if(__dataLayer.media.format.indexOf("live")>-1||__dataLayer.media.contentType&&__dataLayer.media.contentType.indexOf("live")>-1)nielsenConfigId=_config.dtvr;else nielsenConfigId=_config.dcr;if(nielsenConfigId===undefined)return;tempInstance=NOLBUNDLE.nlsQ(nielsenConfigId,
"nlsnInstance"+nielsenInstance);nielsenInstance++;nielsenInstances.push(tempInstance);if(currentPlayer&&currentPlayer.guid)Bootstrapper.nielsenTrackerMap[currentPlayer.guid]=tempInstance;var contentMetadataObject=Bootstrapper.nielsenHelper.getContentMetadata();tempInstance.ggPM("loadMetadata",contentMetadataObject)};Bootstrapper.nielsenHelper.playheadUpdate=function(curNielsenTracker,playhead){if(curNielsenTracker===null||typeof playhead!=="number")return;var playheadSeconds=typeof playhead==="number"?
Math.floor(playhead):1;if(playheadSeconds<=0)return;Bootstrapper.Logging.logMsg("Nielsen: Updating Nielsen Playhead: ",playheadSeconds);if(__dataLayer.media.contentType==="live")curNielsenTracker.ggPM("setPlayheadPosition",Date.now()/1E3);else curNielsenTracker.ggPM("setPlayheadPosition",playheadSeconds)};Bootstrapper.nielsenHelper.adStart=function(curNielsenTracker,adType){if(curNielsenTracker===null)return;var adMetadataObject={type:adType,assetid:__dataLayer.media.ad_id};Bootstrapper.Logging.logMsg("Nielsen: Nielsen Ads Started with metadata: ",
adMetadataObject);curNielsenTracker.ggPM("loadMetadata",adMetadataObject)};Bootstrapper.nielsenHelper.play=function(curNielsenTracker){if(curNielsenTracker===null)return;var contentMetadataObject=Bootstrapper.nielsenHelper.getContentMetadata();Bootstrapper.Logging.logMsg("Nielsen: Sending Play Event for Nielsen Tracking");curNielsenTracker.ggPM("loadMetadata",contentMetadataObject)};Bootstrapper.nielsenHelper.pause=function(curNielsenTracker,playhead){if(curNielsenTracker===null)return;Bootstrapper.Logging.logMsg("Nielsen: Sending Pause Event for Nielsen Tracking");
var playheadSeconds=typeof playhead==="number"?Math.floor(playhead):1;curNielsenTracker.ggPM("stop",playheadSeconds)};Bootstrapper.nielsenHelper.end=function(curNielsenTracker,playhead){if(curNielsenTracker===null)return;Bootstrapper.Logging.logMsg("Nielsen: Sending End Event for Nielsen Tracking");Bootstrapper.nielsenHelper.newSessionFlag=true;var playheadSeconds=typeof playhead==="number"?Math.floor(playhead):1;curNielsenTracker.ggPM("stop",playheadSeconds);curNielsenTracker.ggPM("end",playheadSeconds)};
Bootstrapper.getC3=function(_callLetters){var callLetters=_callLetters||"",map={"kabc":"abc7","kgo":"abc7news","kfsn":"abc30","ktrk":"abc13","wtvd":"abc11","wabc":"7online","wls":"abc7chicago","wpvi":"6abc","andscape":"andscape","theundefeated":"andscape","abcn":"abcnews.com","video.disney.com":"DISNEYVIDEOS","music.disney.com":"DISNEYMUSIC","liveshows.disney.com":"DLIVE","movies.disney.com":"DISNEYMOVIES","nature.disney.com":"DISNEYNATURE","princess.disney.com":"PRI","pirates.disney.com":"PIR","shows.disney.com":"DISNEYSHOWS",
"toystory.disney.com":"TOY","muppets.disney.com":"DISNEYMUPPETS","films.nationalgeographic.com":"DISNEYNATGEO","fairies.disney.com":"FAI","cars.disney.com":"CARS","gma":"GMA"};if(_callLetters==="sec"){var type="";if(__dataLayer.media.format==="live"||__dataLayer.media.contentType==="live")type="live";else if(__dataLayer.media.format==="replay")type="replay";else type="vod";return type}if(!!window.__dataLayer&&!!window.__dataLayer.site&&!!window.__dataLayer.site.portal&&__dataLayer.site.portal==="matterhorn"&&
!map[callLetters])return"matterhorn";return map[callLetters]||null};Bootstrapper.getC4=function(_callLetters,type){var callLetters=_callLetters||"",map={vod:{"abcn":"abcnewsdigital","sec":"SECSPORTS","fivethirtyeight":"abcnewsdigital"},live:{"abcn":"abcnewslive","sec":"SECSPORTS","fivethirtyeight":"abcnewslive"}};return map[type][callLetters]||"*null"};var userConsentValue=gateway.environment===null&&Bootstrapper.Cookies.get("usprivacy")!=="1YYY"?"1":"0",siteKey,publisherId,cGenre="*null",setC4Val,
publisherName,c6Val;if(/(^|\.)(6abc|abc11|abc13|abc30|abc7|abc7chicago|abc7news|abc7ny|abcotvs(sb|qa)?)\.com(:\d+)?$/i.test(location.hostname)){siteKey="ABC Local";publisherId="15382676";cGenre="News"}else if(/fftv|freeform/i.test(location.hostname)){siteKey="freeform";publisherId="15382774"}else if(/fxtv|fxnetworks/i.test(location.hostname)){siteKey=__dataLayer.pzn.affiliate_id||__dataLayer.pzn.mvpdName;publisherId="31864640"}else if(/natgeo|ngtv|nationalgeographic/i.test(location.hostname)){siteKey=
__dataLayer.pzn.affiliate_id||__dataLayer.pzn.mvpdName;publisherId="31864641"}else if(/fivethirtyeight|538/i.test(location.hostname)){siteKey="FiveThirtyEight";publisherId="15382676";cGenre="News"}else if(/andscape|undefeated/i.test(location.hostname)){siteKey="ESPN";publisherId="3000005";cGenre="Sports"}else if(/abcnews|goodmorningamerica/i.test(location.hostname)){siteKey="ABCNews";publisherId="15382676";cGenre="News";setC4Val=true}else if(location.hostname.toLowerCase().indexOf("abc")>-1){siteKey=
__dataLayer.pzn.affiliate_id||__dataLayer.pzn.mvpdName||"ABC";publisherId="15382676"}else if(!!window.__dataLayer&&!!window.__dataLayer.site&&!!window.__dataLayer.site.portal&&__dataLayer.site.portal==="matterhorn"){siteKey="Matterhorn";publisherId="15354235"}else if(/secsports\.com/i.test(location.hostname)){siteKey="sec";publisherId="3000005";setC4Val=true;publisherName="ESPN";cGenre="Sports";if(__dataLayer.page.sport||__dataLayer.page.league)c6Val=__dataLayer.page.sport||__dataLayer.page.league}if(publisherId!==
undefined)window.waitForComscore=setInterval(function(){if(!!window.ns_&&!!window.ns_.analytics){clearInterval(waitForComscore);Bootstrapper.comscoreAnalytics=window.ns_.analytics;Bootstrapper.comscoreAnalytics.PlatformApi.setPlatformAPI(Bootstrapper.comscoreAnalytics.PlatformApi.PlatformApis.WebBrowser);Bootstrapper.comscoreAnalytics.configuration.addClient(new Bootstrapper.comscoreAnalytics.configuration.PublisherConfiguration({"publisherId":publisherId,"persistentLabels":{"cs_ucfr":userConsentValue}}))}},
500);Bootstrapper.comscoreHelper.validate=function(val){if(val=="N/A"||val=="none")return"*null";return val};Bootstrapper.comscoreHelper.splitDateParts=function(dateString){var dateFormat=/(\d{4})-?(\d{2})-?(\d{2})/;if(typeof dateString!=="string"||!dateFormat.test(dateString))return"*null";var matches=dateFormat.exec(dateString);return matches?[matches[1],matches[2],matches[3]].map(function(match){return parseInt(match)}):"*null"};Bootstrapper.comscoreHelper.formatISO=function(dateString){try{return(new Date(dateString)).toISOString()}catch(e){return dateString}};
Bootstrapper.comscoreHelper.secondsToMilliseconds=function(seconds){try{return isNaN(parseInt(seconds))?0:parseInt(seconds)*1E3}catch(e){return 0}};Bootstrapper.comscoreHelper.sessionSetupStart=function(currentPlayer){if(typeof Bootstrapper.comscoreAnalytics==="undefined"){Bootstrapper.Logging.logMsg("comscoreAnalytics not configured, no publisherId");return}if(!Bootstrapper.comscoreHelper.hasInit){Bootstrapper.comscoreAnalytics.start();Bootstrapper.comscoreAnalytics.players=[];Bootstrapper.comscoreAnalytics.sa_array=
[];Bootstrapper.comscoreAnalytics.cm_array=[];Bootstrapper.comscoreAnalytics.cm_map={};Bootstrapper.comscoreHelper.hasInit=true}Bootstrapper.comscoreAnalytics.lastEvent="";Bootstrapper.comscoreHelper.newSessionFlag=false;Bootstrapper.comscoreAnalytics.players.push(currentPlayer);var curPlayerIndex=Bootstrapper.comscoreAnalytics.players.indexOf(currentPlayer)===-1?Bootstrapper.comscoreAnalytics.sa_array.length-1:Bootstrapper.comscoreAnalytics.players.indexOf(currentPlayer);Bootstrapper.comscoreAnalytics.sa_array.push(new Bootstrapper.comscoreAnalytics.StreamingAnalytics);
Bootstrapper.comscoreAnalytics.sa_array[curPlayerIndex].createPlaybackSession();var cm=new Bootstrapper.comscoreAnalytics.StreamingAnalytics.ContentMetadata,mediaItem=currentPlayer.mediaItem||currentPlayer.bundle_.player_.mediaItem,mediaType=__dataLayer.media.format==="live"||__dataLayer.media.contentType==="live"?Bootstrapper.comscoreAnalytics.StreamingAnalytics.ContentMetadata.ContentType.LIVE:__dataLayer.media.duration<600?Bootstrapper.comscoreAnalytics.StreamingAnalytics.ContentMetadata.ContentType.SHORT_FORM_ON_DEMAND:
Bootstrapper.comscoreAnalytics.StreamingAnalytics.ContentMetadata.ContentType.LONG_FORM_ON_DEMAND,siteKey=Bootstrapper.getC3(__dataLayer.site.site)||__dataLayer.site.site,stationTitle=__dataLayer.media.stationTitle||"",programTitle=Bootstrapper.comscoreHelper.validate(__dataLayer.media.program),seasonNumber=Bootstrapper.comscoreHelper.validate(__dataLayer.media.season),episodeNumber=Bootstrapper.comscoreHelper.validate(__dataLayer.media.episodeNumber),episodeTitle=Bootstrapper.comscoreHelper.validate(__dataLayer.media.title),
networkAffiliate=Bootstrapper.comscoreHelper.validate(__dataLayer.media.network),fDuration=__dataLayer.media.duration||mediaItem.duration||0,isLive=__dataLayer.media.format==="live"||__dataLayer.media.contentType==="live";cm.setMediaType(mediaType);cm.setUniqueId(mediaItem.id);cm.setLength(Bootstrapper.comscoreHelper.secondsToMilliseconds(fDuration));cm.setStationTitle(stationTitle||__dataLayer.site.site);if(setC4Val)cm.setDictionaryClassificationC4(Bootstrapper.getC4(__dataLayer.site.site,isLive?
"live":"vod"));if(siteKey==="andscape"||siteKey==="the undefeated")cm.setDictionaryClassificationC6(siteKey);else if(currentPlayer.bundle_.player_.mediaItem.show&&currentPlayer.bundle_.player_.mediaItem.show.showPrefix&&currentPlayer.bundle_.player_.mediaItem.show.showPrefix.length>0)cm.setDictionaryClassificationC6(currentPlayer.bundle_.player_.mediaItem.show.showPrefix);else cm.setDictionaryClassificationC3(siteKey);if(c6Val)cm.setDictionaryClassificationC6(c6Val);cm.setPublisherName(publisherName||
stationTitle||siteKey);cm.setProgramTitle(programTitle);cm.setEpisodeTitle(episodeTitle);cm.setEpisodeSeasonNumber(seasonNumber);cm.setEpisodeNumber(episodeNumber);if(__dataLayer.media.format.indexOf("live")>-1)if(currentPlayer.bundle_.player_.mediaItem.location&&currentPlayer.bundle_.player_.mediaItem.location.indexOf("WEST")>-1)cm.setFeedType(Bootstrapper.comscoreAnalytics.StreamingAnalytics.ContentMetadata.ContentFeedType.WEST_HD);else cm.setFeedType(Bootstrapper.comscoreAnalytics.StreamingAnalytics.ContentMetadata.ContentFeedType.EAST_HD);
cm.setNetworkAffiliate(networkAffiliate);if(isTVE)cGenre=__dataLayer.media.genre||"";cm.setGenreName(cGenre);var tvAirDateString=Bootstrapper.comscoreHelper.formatISO(__dataLayer.media.air_date),checkTVAirDate=Bootstrapper.comscoreHelper.validate(tvAirDateString),tvAirDate=checkTVAirDate==="*null"?checkTVAirDate:Bootstrapper.comscoreHelper.splitDateParts(checkTVAirDate);var digitalDateString=Bootstrapper.comscoreHelper.formatISO(__dataLayer.media.digital_date),checkDigitalDate=Bootstrapper.comscoreHelper.validate(digitalDateString),
digitalDate=checkTVAirDate==="*null"?checkDigitalDate:Bootstrapper.comscoreHelper.splitDateParts(checkDigitalDate);if(Array.isArray(tvAirDate))cm.setDateOfTvAiring(tvAirDate[0],tvAirDate[1],tvAirDate[2]);if(Array.isArray(digitalDate))cm.setDateOfTvAiring(digitalDate[0],digitalDate[1],digitalDate[2]);var completeEpisode=__dataLayer.media.full_episode&&__dataLayer.media.full_episode==="y"?true:false;cm.classifyAsCompleteEpisode(completeEpisode);Bootstrapper.comscoreAnalytics.cm_array.push(cm);Bootstrapper.comscoreAnalytics.sa_array[curPlayerIndex].setMetadata(cm);
if(currentPlayer&&currentPlayer.guid){Bootstrapper.comscoreAnalytics.cm_map[currentPlayer.guid]=cm;Bootstrapper.comscoreTrackerMap[currentPlayer.guid]=Bootstrapper.comscoreAnalytics.sa_array[curPlayerIndex]}};Bootstrapper.comscoreHelper.getContentMeta=function(currentPlayer){var currentMetadata;if(currentPlayer&&currentPlayer.guid){currentMetadata=Bootstrapper.comscoreAnalytics.cm_map[currentPlayer.guid];if(currentMetadata)return currentMetadata}currentMetadata=Bootstrapper.comscoreAnalytics.cm_array[Bootstrapper.comscoreAnalytics.players.indexOf(currentPlayer)];
return currentMetadata};Bootstrapper.comscoreHelper.play=function(curTracker,currentPlayer){if(curTracker===null)return;var cm=Bootstrapper.comscoreHelper.getContentMeta(currentPlayer);curTracker.setMetadata(cm);if(Bootstrapper.comscoreHelper.seeked===1){var lpHead=__dataLayer.media.lastPlayhead,lpHeadMillis=Bootstrapper.comscoreHelper.secondsToMilliseconds(lpHead);if(lpHeadMillis){curTracker.startFromPosition(lpHeadMillis);Bootstrapper.comscoreHelper.seeked=0}}curTracker.notifyPlay()};Bootstrapper.comscoreHelper.end=
function(curTracker){if(curTracker===null)return;curTracker.notifyEnd();Bootstrapper.comscoreHelper.newSessionFlag=true};Bootstrapper.comscoreHelper.pause=function(curTracker){if(curTracker===null)return;curTracker.notifyPause()};Bootstrapper.comscoreHelper.seeking=function(curTracker){var ignoreEvents=["dtci.loaded","dtci.contentEnded","dtci.play","dtci.playing"];if(curTracker===null||ignoreEvents.indexOf(Bootstrapper.last_hb_event)>-1)return;curTracker.notifySeekStart();Bootstrapper.comscoreHelper.seeked=
1};Bootstrapper.comscoreHelper.adStart=function(curTracker,playerInfo,currentPlayer,eventData){if(curTracker===null)return;var am=new Bootstrapper.comscoreAnalytics.StreamingAnalytics.AdvertisementMetadata;var adType=eventData.type==="preroll"?Bootstrapper.comscoreAnalytics.StreamingAnalytics.AdvertisementMetadata.AdvertisementType.ON_DEMAND_PRE_ROLL:eventData.type==="midroll"?Bootstrapper.comscoreAnalytics.StreamingAnalytics.AdvertisementMetadata.AdvertisementType.ON_DEMAND_MID_ROLL:eventData.type===
"postroll"?Bootstrapper.comscoreAnalytics.StreamingAnalytics.AdvertisementMetadata.AdvertisementType.ON_DEMAND_POST_ROLL:"";am.setMediaType(adType);am.setLength(__dataLayer.media.ad_length?Bootstrapper.comscoreHelper.secondsToMilliseconds(__dataLayer.media.ad_length):0);var cm=Bootstrapper.comscoreHelper.getContentMeta(currentPlayer);am.setRelatedContentMetadata(cm);curTracker.setMetadata(am);curTracker.notifyPlay()};Bootstrapper.comscoreHelper.adPlay=function(curTracker){if(curTracker===null)return;
curTracker.notifyPlay()};Bootstrapper.comscoreHelper.adPause=function(curTracker){if(curTracker===null)return;curTracker.notifyPause()};Bootstrapper.comscoreHelper.adEnd=function(curTracker){if(curTracker===null)return;curTracker.notifyEnd()};Bootstrapper.Conviva=Bootstrapper.Conviva||{};Bootstrapper.Conviva.isLive=function(index,curTrackerBundle){var dlMedia=__dataLayer.media||{},meta=dlMedia.qoe||[],metaBundle=meta[index]||{},qoe=metaBundle.playback||{};var isLive=qoe.isLive&&qoe.isLive==="live"||
dlMedia.format==="live"||dlMedia.contentType==="live"?true:false;if(!curTrackerBundle.curLive||curTrackerBundle.curLive!=isLive)curTrackerBundle.curLive=isLive;return isLive};Bootstrapper.Conviva.getContentAssetName=function(index,curTrackerBundle){var media=__dataLayer.media||{},meta=media.qoe||[],metaBundle=meta[index]||{},qoe=metaBundle.playback||{},name=media.media_name,title=media.title,assetName=media.asset_title;var trackName=qoe.assetName||name||title||assetName;if(!curTrackerBundle.curTitle||
curTrackerBundle!=trackName)curTrackerBundle=trackName;return trackName};Bootstrapper.Conviva.resetDefaultValue=function(str){var check=/N\/A|none|unknown/i;return check.test(str)?str.replace(/N\/A|none|unknown/i,"NA"):str};Bootstrapper.Conviva.setInitialContentInfo=function(curPlayer,index,curTrackerBundle){var dl=__dataLayer,visitor=dl.visitor||{},media=dl.media||{},meta=media.qoe||[],metaBundle=meta[index]||{},qoe=metaBundle.playback||{},bundle=curPlayer.bundle_||{},player=bundle.player_||{},mediaItem=
player.mediaItem||{},playerTech=player.tech_||{},hostname=location.hostname,href=location.href,pathName=location.pathname;var requiredMetadata={};var swid=qoe.viewerId||visitor.swid,playerName=qoe.playerName||media.player_name||"Unified_TMS",platformVersion=qoe.platformVersion||qoe.applicationVersion||media.player_name||curPlayer.platformVersion||"NA",duration=media.duration||mediaItem.duration||0,currentSrc=qoe.streamUrl?qoe.streamUrl:typeof playerTech.currentSrc==="function"?playerTech.currentSrc():
"",utmUrl=qoe["c3.cm.utmTrackingUrl"]||location.search||"NA";requiredMetadata[Conviva.Constants.PLAYER_NAME]=playerName;requiredMetadata[Conviva.Constants.APPLICATION_VERSION]=platformVersion;requiredMetadata[Conviva.Constants.STREAM_URL]=currentSrc;requiredMetadata[Conviva.Constants.VIEWER_ID]=swid;requiredMetadata[Conviva.Constants.ASSET_NAME]=curTrackerBundle.curTitle||Bootstrapper.Conviva.getContentAssetName(index,curTrackerBundle);requiredMetadata[Conviva.Constants.IS_LIVE]=curTrackerBundle.curLive||
Bootstrapper.Conviva.isLive(index,curTrackerBundle)?Conviva.Constants.StreamType.LIVE:Conviva.Constants.StreamType.VOD;requiredMetadata[Conviva.Constants.DURATION]=duration;requiredMetadata["c3.cm.utmTrackingUrl"]=utmUrl;var brandMetadata={},videoResolution,startType=qoe.startType||media.start_type,mediaType=qoe.mediaType||media.contentType,site=qoe.site||hostname,page=qoe.page||href,path=qoe.path||pathName;if(qoe.videoResolution)videoResolution=qoe.videoResolution;else if(typeof playerTech.currentDimensions===
"function")var dimensions=playerTech.currentDimensions(),width=dimensions.width,height=dimensions.height,videoResolution=height&&width?Math.round(width)+"x"+Math.round(height):null;else videoResolution="x";if(Bootstrapper.Conviva.config.metaAccount==="dmed"){brandMetadata.startType=startType;brandMetadata.contentLengthSec=typeof duration=="number"?""+duration:duration;brandMetadata.site=site;brandMetadata.page=page;brandMetadata.mediaType=mediaType;brandMetadata.videoResolution=videoResolution}else if(Bootstrapper.Conviva.config.metaAccount===
"sec"){brandMetadata.page=page;brandMetadata.mediaType=mediaType;brandMetadata.path=path;brandMetadata.startType=startType;brandMetadata.videoResolution=videoResolution}var playerInfo=Object.assign(requiredMetadata,brandMetadata);for(var key in playerInfo)if(Object.hasOwnProperty.call(playerInfo,key))playerInfo[key]=Bootstrapper.Conviva.resetDefaultValue(playerInfo[key]);return playerInfo};Bootstrapper.Conviva.setContentInfo=function(curPlayer,index,curTrackerBundle){var dl=__dataLayer,visitor=dl.visitor||
{},media=dl.media||{},meta=media.qoe||[],metaBundle=meta[index]||{},qoe=metaBundle.playback||{},pzn=dl.pzn||{},bundle=curPlayer.bundle_||{},player=bundle.player_||{},mediaItem=player.mediaItem||{},tracking=mediaItem.tracking||{},heartbeats=tracking.heartbeats||{},playerTech=player.tech_||{},hostname=location.hostname,page=dl.page.page_name||qoe.page||location.href,pathName=location.pathname;var requiredMetadata={};var brand=Bootstrapper.Conviva.appBrand||qoe.appBrand||"NA",cmBrand=qoe["c3.cm.brand"]||
qoe.appBrand||"NA",swid=qoe.viewerId||visitor.swid,playerName=qoe.playerName||media.player_name||"Unified_TMS",platformVersion=qoe.platformVersion||qoe.applicationVersion||media.player_name||curPlayer.platformVersion||"NA",affiliate=qoe["c3.cm.affiliate"]||media.affiliate_name||"NA",streamProtocol=qoe.streamProtocol||"NA",streamType=media.format,categoryType=qoe["contentCategory"]||qoe["c3.cm.categoryType"]||"NA",cmsName=qoe["c3.cm.name"]||"NA",cmsId=qoe["c3.cm.id"]||heartbeats.CMSID||"NA",seriesName=
qoe["seriesName"]||qoe["c3.cm.seriesName"]||"NA",seasonNumber=qoe["seasonNumber"]||qoe["c3.cm.seasonNumber"]||media.season||"NA",showTitle=qoe["c3.cm.showTitle"]||media.media_name||"NA",episodeNumber=qoe["episodeNumber"]||qoe["c3.cm.episodeNumber"]||media.episodeNumber||"NA",genre=qoe["genre"]||qoe["c3.cm.genre"]||media.genre||"NA",genreList=qoe["c3.cm.genreList"]||"NA",channel=qoe["c3.cm.channel"]||heartbeats.Channel||media.network||"NA",assetType=qoe["c3.cm.contentType"]||media.type||media.contentType,
duration=media.duration||mediaItem.duration||0,utmUrl=qoe["c3.cm.utmTrackingUrl"]||location.search||"NA",currentSrc=qoe.streamUrl?qoe.streamUrl:typeof playerTech.currentSrc==="function"?playerTech.currentSrc():"",frameworkName=qoe.frameworkName||"NA",frameworkVersion=qoe.frameworkVersion||"NA",dcType=qoe.dcType||"NA",resource=qoe.resource||"NA";requiredMetadata[Conviva.Constants.PLAYER_NAME]=playerName;requiredMetadata[Conviva.Constants.APPLICATION_VERSION]=platformVersion;requiredMetadata[Conviva.Constants.STREAM_URL]=
currentSrc;requiredMetadata[Conviva.Constants.ASSET_NAME]=curTrackerBundle.curTitle||Bootstrapper.Conviva.getContentAssetName(index,curTrackerBundle);requiredMetadata[Conviva.Constants.IS_LIVE]=curTrackerBundle.curLive||Bootstrapper.Conviva.isLive(index,curTrackerBundle)?Conviva.Constants.StreamType.LIVE:Conviva.Constants.StreamType.VOD;requiredMetadata[Conviva.Constants.VIEWER_ID]=swid||"NA";requiredMetadata[Conviva.Constants.FRAMEWORK_NAME]=frameworkName;requiredMetadata[Conviva.Constants.FRAMEWORK_VERSION]=
frameworkVersion;requiredMetadata[Conviva.Constants.DURATION]=duration;requiredMetadata.streamProtocol=streamProtocol;requiredMetadata.appBrand=brand;requiredMetadata.resource=resource;requiredMetadata.dcType=dcType;requiredMetadata.contentLengthSec=typeof duration=="number"?""+duration:duration;requiredMetadata.contentAssetName=curTrackerBundle.curTitle||Bootstrapper.Conviva.getContentAssetName(index,curTrackerBundle);requiredMetadata["c3.cm.contentType"]=assetType||streamType;requiredMetadata["c3.cm.channel"]=
channel;requiredMetadata["c3.cm.brand"]=cmBrand;requiredMetadata["c3.cm.affiliate"]=affiliate;requiredMetadata["c3.cm.categoryType"]=categoryType;requiredMetadata["c3.cm.name"]=cmsName;requiredMetadata["c3.cm.id"]=cmsId;requiredMetadata["c3.cm.seriesName"]=seriesName;requiredMetadata["c3.cm.seasonNumber"]=seasonNumber;requiredMetadata["c3.cm.showTitle"]=showTitle;requiredMetadata["c3.cm.episodeNumber"]=episodeNumber;requiredMetadata["c3.cm.genre"]=genre;requiredMetadata["c3.cm.genreList"]=genreList;
requiredMetadata["c3.cm.utmTrackingUrl"]=utmUrl;var brandMetadata={},type=qoe.mediaType||media.contentType,drmProtectionType=qoe.drmProtectionType||"NA",startType=qoe.startType||media.start_type,sport=qoe.sport||"NA",league=qoe.league||"NA",accessType=qoe.accessType||"NA",spoId=qoe.spoId||"NA",mvpd=qoe.mvpd||pzn.mvpdName||"NA",network=qoe.network||"NA",audioLanguage=qoe.audioLanguage||"NA",locationName=qoe.locationName||"NA",plt=qoe.plt||"NA",eventName=qoe.eventName||"NA",eventType=qoe.eventType||
"NA",partnerSDK=qoe.partnerSDK||"NA",pccId=qoe.pccId||"NA",airingId=qoe.airingId||"NA",cdnName=qoe.cdnName||"NA",prt=qoe.prt||"NA",appVersion=qoe.appVersion||qoe["c3.app.version"]||"NA",eventId=qoe.eventId||"NA",drmProtocol=qoe.drmProtocol||"NA",disneyPlayerVersion=qoe.disneyPlayerVersion||qoe.frameworkVersion||"NA",broadcastType=qoe.broadcastType||"NA",bundleVersion=qoe.bundleVersion||"NA",hidden=qoe.hidden||"NA",videoResolution;if(qoe.videoResolution)videoResolution=qoe.videoResolution;else if(typeof playerTech.currentDimensions===
"function")var dimensions=playerTech.currentDimensions(),width=dimensions.width,height=dimensions.height,videoResolution=height&&width?Math.round(width)+"x"+Math.round(height):null;else videoResolution="x";if(Bootstrapper.Conviva.config.metaAccount==="dmed"){brandMetadata.startType=startType;brandMetadata.drmProtectionType=drmProtectionType;brandMetadata.videoResolution=videoResolution;brandMetadata.sport=sport;brandMetadata.league=league;brandMetadata.spoId=spoId;brandMetadata.site=hostname;brandMetadata.page=
page;brandMetadata.mediaType=type;brandMetadata.accessType=accessType;brandMetadata.network=network;brandMetadata.audioLanguage=audioLanguage;brandMetadata.locationName=locationName;brandMetadata.plt=plt;brandMetadata.airingId=airingId;brandMetadata.mvpd=mvpd;brandMetadata.eventName=eventName;brandMetadata.eventType=eventType;brandMetadata.partnerSDK=partnerSDK;brandMetadata.pccId=pccId;brandMetadata.cdnName=cdnName;brandMetadata.prt=prt;brandMetadata.disneyPlayerVersion=disneyPlayerVersion}else if(Bootstrapper.Conviva.config.metaAccount===
"sec"){brandMetadata.affiliate=affiliate;brandMetadata.airingId=airingId;brandMetadata.assetType=assetType;brandMetadata.eventId=eventId;brandMetadata.league=league;brandMetadata.mediaType=type;brandMetadata.network=network;brandMetadata.site=hostname;brandMetadata.sport=sport;brandMetadata.userId=swid;brandMetadata.page=page;brandMetadata.path=pathName;brandMetadata.startType=startType;brandMetadata.prt=brand;brandMetadata.videoResolution=videoResolution;brandMetadata.spoId=spoId;brandMetadata.accessType=
accessType;brandMetadata.audioLanguage=audioLanguage;brandMetadata.locationName=locationName;brandMetadata.plt=plt;brandMetadata.cdnName=cdnName;brandMetadata.mvpd=mvpd;brandMetadata.eventName=eventName;brandMetadata.eventType=eventType;brandMetadata.partnerSDK=partnerSDK;brandMetadata.pccId=pccId;brandMetadata.drmProtocol=drmProtocol;brandMetadata.disneyPlayerVersion=disneyPlayerVersion;brandMetadata.broadcastType=broadcastType;brandMetadata.bundleVersion=bundleVersion;brandMetadata.hidden=hidden}var contentInfo=
Object.assign(requiredMetadata,brandMetadata);for(var key in contentInfo)if(Object.hasOwnProperty.call(contentInfo,key))contentInfo[key]=Bootstrapper.Conviva.resetDefaultValue(contentInfo[key]);return contentInfo};Bootstrapper.Conviva.setAdInfo=function(curPlayer,index,curTrackerBundle){var dl=__dataLayer,visitor=dl.visitor||{},media=dl.media||{},meta=media.qoe||[],metaBundle=meta[index]||{},qoe=metaBundle.ads||{},bundle=curPlayer.bundle_||{},player=bundle.player_||{},playerTech=player.tech_||{},
currentSrc;var adTitle=qoe.assetName||media.ad_name||media.ad_id||"NA",swid=visitor.swid||"NA",currentSrc=qoe.streamUrl?qoe.streamUrl:typeof playerTech.currentSrc==="function"?playerTech.currentSrc():"",duration=qoe.duration||media.ad_length||0,encodedFramerate=qoe.encodedFramerate||0,brand=Bootstrapper.Conviva.appBrand||qoe.appBrand||"NA";var adTechnology=qoe["c3.ad.technology"]==="Client Side"||qoe["c3.ad.technology"]==="Server Side"?qoe["c3.ad.technology"]:"Client Side",adId=qoe["c3.ad.id"]||media.ad_id||
"NA",adSystem=qoe["c3.ad.system"]||"NA",adPosition=qoe["c3.ad.position"]||"Pre-roll",adIsSlate=typeof qoe["c3.ad.isSlate"]=="boolean"?""+qoe["c3.ad.isSlate"]:"false",mediaFileApiFramework=qoe["c3.ad.mediaFileApiFramework"]||"NA",adStitcher=qoe["c3.ad.adStitcher"]||"NA",firstAdSystem=qoe["c3.ad.firstAdSystem"]||"NA",firstAdId=qoe["c3.ad.firstAdId"]||media.ad_id||"NA",firstCreativeId=qoe["c3.ad.firstCreativeId"]||"NA",creativeId=qoe["c3.ad.creativeId"]||"NA";var adInfo={"c3.ad.technology":adTechnology,
"c3.ad.id":adId,"c3.ad.system":adSystem,"c3.ad.position":adPosition,"c3.ad.isSlate":adIsSlate,"c3.ad.mediaFileApiFramework":mediaFileApiFramework,"c3.ad.adStitcher":adStitcher,"c3.ad.firstAdSystem":firstAdSystem,"c3.ad.firstAdId":firstAdId,"c3.ad.firstCreativeId":firstCreativeId,"c3.ad.creativeId":creativeId,appBrand:brand};adInfo[Conviva.Constants.VIEWER_ID]=swid;adInfo[Conviva.Constants.ASSET_NAME]=adTitle;adInfo[Conviva.Constants.IS_LIVE]=curTrackerBundle.curLive||Bootstrapper.Conviva.isLive(index,
curTrackerBundle)?Conviva.Constants.StreamType.LIVE:Conviva.Constants.StreamType.VOD;adInfo[Conviva.Constants.STREAM_URL]=currentSrc;adInfo[Conviva.Constants.DURATION]=duration;adInfo[Conviva.Constants.ENCODED_FRAMERATE]=encodedFramerate;for(var key in adInfo)if(Object.hasOwnProperty.call(adInfo,key))adInfo[key]=Bootstrapper.Conviva.resetDefaultValue(adInfo[key]);return adInfo};Bootstrapper.Conviva.setPlayerInfo=function(index){var playerInfo={},dl=__dataLayer,media=dl.media||{},meta=media.qoe||[],
metaBundle=meta[index]||{},qoe=metaBundle.playback||{};playerInfo[Conviva.Constants.FRAMEWORK_NAME]=qoe.frameworkName||"";playerInfo[Conviva.Constants.FRAMEWORK_VERSION]=qoe.frameworkVersion||"";return playerInfo};Bootstrapper.Conviva.setAdPlayerInfo=function(index){var adPlayerInfo={},dl=__dataLayer,media=dl.media||{},meta=media.qoe||[],metaBundle=meta[index]||{},qoe=metaBundle.ads||{};adPlayerInfo[Conviva.Constants.FRAMEWORK_NAME]=qoe.frameworkName||"";adPlayerInfo[Conviva.Constants.FRAMEWORK_VERSION]=
qoe.frameworkVersion||"";return adPlayerInfo};Bootstrapper.Conviva.sessionStartUp=function(index){if(!Bootstrapper.Conviva.ready)Bootstrapper.Conviva.configureConviva(Bootstrapper.Conviva.initOptions);var trackerBundle={videoPlaying:true,error:false,tracker:Conviva.Analytics.buildVideoAnalytics()};Bootstrapper.Conviva.analyticsTrackers[index]=trackerBundle;if(!Bootstrapper.Conviva.setULEvent){window.addEventListener("beforeunload",Bootstrapper.Conviva.cleanSessionsUnload,{capture:true});Bootstrapper.Conviva.setULEvent=
true}};Bootstrapper.Conviva.adsStartUp=function(curTracker,index){var adsTrackerBundle={tracker:Conviva.Analytics.buildAdAnalytics(curTracker),adsPlaying:true,startedSession:false};Bootstrapper.Conviva.adsTrackers[index]=adsTrackerBundle;if(!Bootstrapper.Conviva.setULEvent){window.addEventListener("beforeunload",Bootstrapper.Conviva.cleanSessionsUnload,{capture:true});Bootstrapper.Conviva.setULEvent=true}}},3811320,686725,24);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;__dataLayer.privacy=__dataLayer.privacy||{};__dataLayer.updatePrivacyMeta=function(){if(!Bootstrapper.Cookies&&typeof Bootstrapper.Cookies.get!=="function")return;var ccf=Bootstrapper.Cookies.get;var dl=__dataLayer,p=dl.privacy,mode=ccf("s_ensRegion"),dcf=ccf("_dcf"),uspriv=ccf("usprivacy"),extraParams=typeof Bootstrapper.getExtraParams==="function"?Bootstrapper.getExtraParams():
{},cds=extraParams.cds||null,gpc=ccf("s_ensNSL")||null;if(p.noniab)p.consent=(window.OnetrustActiveGroups===",,"?",C0001,":window.OnetrustActiveGroups)||null;else p.consent=mode==="ccpa"?uspriv:dcf;p.gdpr=mode==="gdpr"?dcf:null;p.ccpa=mode==="ccpa"?uspriv:null;p.notice=mode==="notice"?dcf:null;p.cds=cds;p.gpc=gpc;p.mode=mode};__dataLayer.updatePrivacyMeta();Bootstrapper.register("privacydl")},3812205,696873,24);
Bootstrapper.bindDependencyImmediate(function(){Bootstrapper.ensEvent.add(["adobeConfigSet matterhornEMEA","adobeConfigSet matterhornROTW"],function(){var ensEventContext=this;if(ensEventContext==window)ensEventContext=undefined;var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.AF=function(){var g={data:{},_dataConfig:{},logHistory:[],debug:!0,dataObj:function(a){var b=a?[]:"";b.finalized=!1;b.type=a;return b},validateInput:function(a){if("object"!==
typeof a||"number"!==typeof a.length)return this.log("Error, input must be type Array");/set|push|call|eval|finalize|join/.test(a[0])||this.log("Error, '"+a[0]+"' is not a valid command");return!0},storeData:function(a,b,d,c,e){e=this.getConfig(b,d,e);b=this.data[b][d];if(e.finalized)return this.log("Error, cannot modify finalized key '"+d+"'"),b;if("undefined"!==typeof b&&e.multi)return"join"==a?b=b.concat(c):b.push(c),b;e.multi?(d=[c],"join"==a&&(d=[].concat(c))):d=c;return d},getConfig:function(a,
b,d,c){a=this._dataConfig[a]||{};c={};return"undefined"==typeof a[b]?(c.multi=d,c.finalized=!1,c):a[b]},store:function(a,b,d,c,e){this.data[b]=this.data[b]||{};this.data[b][d]=this.storeData(a,b,d,c,e);return this.data[b][d]},parseCode:function(a){return((a||function(){})+"").replace(/^function\s*\(\s*\)\s*\{|\}$/g,"")},callFn:function(a,b,d,c){if("function"==typeof a)if(d)"undefined"!=typeof window.execScript?window.execScript(this.parseCode(a)):eval.call(window,this.parseCode(a));else return a.apply(window,
c);else if("function"==typeof this.data[a][b])if(d)"undefined"!=typeof window.execScript?window.execScript(this.parseCode(this.data[a][b])):eval.call(window,this.parseCode(this.data[a][b]));else return c="object"==typeof c&&"number"==typeof c.length?c:[],this.data[a][b].apply(this.data[a],c);else return this.log("Error, '"+b+"' is not a function")},parse:function(a){if(this.validateInput(a)){a=Array.prototype.slice.call(a,0);var b=a.shift(),d=a.shift(),c=a.shift(),e=a[0];if(/set|push|join/.test(b))return this.store(b,
d,c,e,/push|join/.test(b));if(/call|eval/.test(b))return this.callFn(d,c,"eval"==b,a);if("finalize"==b)return a=this._dataConfig[d]=this._dataConfig[d]||{},a=a[c]||{multi:!1},a.finalized=!0,this._dataConfig[d][c]=a}},log:function(a){this.logHistory.push(a);return this.debug&&"object"==typeof console?console.log(a)&&!1:!1}};if("object"==typeof Bootstrapper.AF&&"[object Array]"!==Object.prototype.toString.call(Bootstrapper.AF))return Bootstrapper.AF;if("[object Array]"===Object.prototype.toString.call(Bootstrapper.AF))for(var h=
Bootstrapper.AF,f=0;f<h.length;f++)g.parse(h[f]);return{push:function(a){return g.parse(a)}}}();Bootstrapper._SC=Bootstrapper._SC||{};Bootstrapper._SC.log=function(a){if(Bootstrapper._SC.logEnabled)try{console.log("AA App Log - "+a)}catch(f){}};Bootstrapper.AF.push(["set","SiteCatalyst","block",function(a){this.ignore=this.ignore||{};this.ignore[a]=1}]);Bootstrapper.AF.push(["set","SiteCatalyst","exec",function(){if(!this.ar){Bootstrapper.AF.push(["push","SiteCatalyst","ar",!0]);for(var a=this.ns||
[],f={},c=0;c<a.length;c++)f[a[c]]=1,Bootstrapper.AF.push(["set",a[c],"exec",function(a){return function(){var c=this.dl||[],b=this.DMFDelay||!1;Bootstrapper._SC.log("Delay for DMF: "+b);var f=function(c){if("object"!=typeof window[a])setTimeout.call(this,function(){f.call(this,c)},250);else{for(var g=["pre","post"],e=0;e<g.length;e++){var b=this[g[e]];if("object"==typeof b)for(var k=0;k<b.length;k++){var d=b[k],h=window[a];if("object"==typeof d[0]&&d[0].length){do h=h[d[0].shift()];while(1<d[0].length);
d[0]=d[0].shift()}if(d[1]&&"function"==typeof d[1])try{h[d[0]]=d[1].call(this,c)}catch(l){}else h[d[0]]=d[1]}}window[a].t();Bootstrapper.AF.push(["set",a,"getCallbacks",function(){return this.callback||[]}]);g=Bootstrapper.AF.push(["call",a,"getCallbacks"]);for(e=0;e<g.length;e++)"function"==typeof g[e]&&g[e].call(window)}},l=function(){Bootstrapper.data?Bootstrapper.data.resolve.call(this,c,function(){for(var a={},b=0;b<c.length;b++)a[c[b]]=arguments[b];f.call(this,a)}):f.call(this,{})},m=this;b?
Bootstrapper.bindDOMParsed(function(){l.call(m)}):l.call(this)}}(a[c])]);var a=0,b;for(b in f)this.ignore&&b in this.ignore||(a?setTimeout(function(a){return function(){Bootstrapper.AF.push(["call",a,"exec"])}}(b),250*a):Bootstrapper.AF.push(["call",b,"exec"]),a++)}}]);Bootstrapper.bindPageSpecificCompletion(function(){setTimeout(function(){Bootstrapper.AF.push(["call","SiteCatalyst","exec"])},250)});Bootstrapper.AF.push(["eval",function(){var sName="s_omni";window["AppMeasurement"]=AppMeasurement;
window["AppMeasurement_Module_ActivityMap"]=AppMeasurement_Module_ActivityMap;window["AppMeasurement_Module_AudienceManagement"]=AppMeasurement_Module_AudienceManagement;window["AppMeasurement_Module_Integrate"]=AppMeasurement_Module_Integrate;function AppMeasurement(r){var a=this;a.version="2.20.0";var h=window;h.s_c_in||(h.s_c_il=[],h.s_c_in=0);a._il=h.s_c_il;a._in=h.s_c_in;a._il[a._in]=a;h.s_c_in++;a._c="s_c";var q=h.AppMeasurement.hc;q||(q=null);var p=h,m,s;try{for(m=p.parent,s=p.location;m&&
m.location&&s&&""+m.location!==""+s&&p.location&&""+m.location!==""+p.location&&m.location.host===s.host;)p=m,m=p.parent}catch(u){}a.C=function(a){try{console.log(a)}catch(b){}};a.Qa=function(a){return""+parseInt(a)==""+a};a.replace=function(a,b,d){return!a||0>a.indexOf(b)?a:a.split(b).join(d)};a.escape=function(c){var b,d;if(!c)return c;c=encodeURIComponent(c);for(b=0;7>b;b++)d="+~!*()'".substring(b,b+1),0<=c.indexOf(d)&&(c=a.replace(c,d,"%"+d.charCodeAt(0).toString(16).toUpperCase()));return c};
a.unescape=function(c){if(!c)return c;c=0<=c.indexOf("+")?a.replace(c,"+"," "):c;try{return decodeURIComponent(c)}catch(b){}return unescape(c)};a.Mb=function(){var c=h.location.hostname,b=a.fpCookieDomainPeriods,d;b||(b=a.cookieDomainPeriods);if(c&&!a.Ja&&!/^[0-9.]+$/.test(c)&&(b=b?parseInt(b):2,b=2<b?b:2,d=c.lastIndexOf("."),0<=d)){for(;0<=d&&1<b;)d=c.lastIndexOf(".",d-1),b--;a.Ja=0<d?c.substring(d):c}return a.Ja};a.c_r=a.cookieRead=function(c){c=a.escape(c);var b=" "+a.d.cookie,d=b.indexOf(" "+
c+"\x3d"),f=0>d?d:b.indexOf(";",d);c=0>d?"":a.unescape(b.substring(d+2+c.length,0>f?b.length:f));return"[[B]]"!=c?c:""};a.c_w=a.cookieWrite=function(c,b,d){var f=a.Mb(),e=a.cookieLifetime,g;b=""+b;e=e?(""+e).toUpperCase():"";d&&"SESSION"!=e&&"NONE"!=e&&((g=""!=b?parseInt(e?e:0):-60)?(d=new Date,d.setTime(d.getTime()+1E3*g)):1===d&&(d=new Date,g=d.getYear(),d.setYear(g+2+(1900>g?1900:0))));return c&&"NONE"!=e?(a.d.cookie=a.escape(c)+"\x3d"+a.escape(""!=b?b:"[[B]]")+"; path\x3d/;"+(d&&"SESSION"!=e?
" expires\x3d"+d.toUTCString()+";":"")+(f?" domain\x3d"+f+";":"")+(a.writeSecureCookies?" secure;":""),a.cookieRead(c)==b):0};a.Jb=function(){var c=a.Util.getIeVersion();"number"===typeof c&&10>c&&(a.unsupportedBrowser=!0,a.wb(a,function(){}))};a.xa=function(){var a=navigator.userAgent;return"Microsoft Internet Explorer"===navigator.appName||0<=a.indexOf("MSIE ")||0<=a.indexOf("Trident/")&&0<=a.indexOf("Windows NT 6")?!0:!1};a.wb=function(a,b){for(var d in a)Object.prototype.hasOwnProperty.call(a,
d)&&"function"===typeof a[d]&&(a[d]=b)};a.K=[];a.ea=function(c,b,d){if(a.Ka)return 0;a.maxDelay||(a.maxDelay=250);var f=0,e=(new Date).getTime()+a.maxDelay,g=a.d.visibilityState,k=["webkitvisibilitychange","visibilitychange"];g||(g=a.d.webkitVisibilityState);if(g&&"prerender"==g){if(!a.fa)for(a.fa=1,d=0;d<k.length;d++)a.d.addEventListener(k[d],function(){var c=a.d.visibilityState;c||(c=a.d.webkitVisibilityState);"visible"==c&&(a.fa=0,a.delayReady())});f=1;e=0}else d||a.u("_d")&&(f=1);f&&(a.K.push({m:c,
a:b,t:e}),a.fa||setTimeout(a.delayReady,a.maxDelay));return f};a.delayReady=function(){var c=(new Date).getTime(),b=0,d;for(a.u("_d")?b=1:a.za();0<a.K.length;){d=a.K.shift();if(b&&!d.t&&d.t>c){a.K.unshift(d);setTimeout(a.delayReady,parseInt(a.maxDelay/2));break}a.Ka=1;a[d.m].apply(a,d.a);a.Ka=0}};a.setAccount=a.sa=function(c){var b,d;if(!a.ea("setAccount",arguments))if(a.account=c,a.allAccounts)for(b=a.allAccounts.concat(c.split(",")),a.allAccounts=[],b.sort(),d=0;d<b.length;d++)0!=d&&b[d-1]==b[d]||
a.allAccounts.push(b[d]);else a.allAccounts=c.split(",")};a.foreachVar=function(c,b){var d,f,e,g,k="";e=f="";if(a.lightProfileID)d=a.O,(k=a.lightTrackVars)&&(k=","+k+","+a.ka.join(",")+",");else{d=a.g;if(a.pe||a.linkType)k=a.linkTrackVars,f=a.linkTrackEvents,a.pe&&(e=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[e]&&(k=a[e].cc,f=a[e].bc));k&&(k=","+k+","+a.F.join(",")+",");f&&k&&(k+=",events,")}b&&(b=","+b+",");for(f=0;f<d.length;f++)e=d[f],(g=a[e])&&(!k||0<=k.indexOf(","+e+","))&&(!b||0<=
b.indexOf(","+e+","))&&c(e,g)};a.o=function(c,b,d,f,e){var g="",k,l,h,n,m=0;"contextData"==c&&(c="c");if(b){for(k in b)if(!(Object.prototype[k]||e&&k.substring(0,e.length)!=e)&&b[k]&&(!d||0<=d.indexOf(","+(f?f+".":"")+k+","))){h=!1;if(m)for(l=0;l<m.length;l++)if(k.substring(0,m[l].length)==m[l]){h=!0;break}if(!h&&(""==g&&(g+="\x26"+c+"."),l=b[k],e&&(k=k.substring(e.length)),0<k.length))if(h=k.indexOf("."),0<h)l=k.substring(0,h),h=(e?e:"")+l+".",m||(m=[]),m.push(h),g+=a.o(l,b,d,f,h);else if("boolean"==
typeof l&&(l=l?"true":"false"),l){if("retrieveLightData"==f&&0>e.indexOf(".contextData."))switch(h=k.substring(0,4),n=k.substring(4),k){case "transactionID":k="xact";break;case "channel":k="ch";break;case "campaign":k="v0";break;default:a.Qa(n)&&("prop"==h?k="c"+n:"eVar"==h?k="v"+n:"list"==h?k="l"+n:"hier"==h&&(k="h"+n,l=l.substring(0,255)))}g+="\x26"+a.escape(k)+"\x3d"+a.escape(l)}}""!=g&&(g+="\x26."+c)}return g};a.usePostbacks=0;a.Pb=function(){var c="",b,d,f,e,g,k,l,h,n="",m="",p=e="",r=a.T();
if(a.lightProfileID)b=a.O,(n=a.lightTrackVars)&&(n=","+n+","+a.ka.join(",")+",");else{b=a.g;if(a.pe||a.linkType)n=a.linkTrackVars,m=a.linkTrackEvents,a.pe&&(e=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[e]&&(n=a[e].cc,m=a[e].bc));n&&(n=","+n+","+a.F.join(",")+",");m&&(m=","+m+",",n&&(n+=",events,"));a.events2&&(p+=(""!=p?",":"")+a.events2)}if(r&&r.getCustomerIDs){e=q;if(g=r.getCustomerIDs())for(d in g)Object.prototype[d]||(f=g[d],"object"==typeof f&&(e||(e={}),f.id&&(e[d+".id"]=f.id),f.authState&&
(e[d+".as"]=f.authState)));e&&(c+=a.o("cid",e))}a.AudienceManagement&&a.AudienceManagement.isReady()&&(c+=a.o("d",a.AudienceManagement.getEventCallConfigParams()));for(d=0;d<b.length;d++){e=b[d];g=a[e];f=e.substring(0,4);k=e.substring(4);g||("events"==e&&p?(g=p,p=""):"marketingCloudOrgID"==e&&r&&a.V("ECID")&&(g=r.marketingCloudOrgID));if(g&&(!n||0<=n.indexOf(","+e+","))){switch(e){case "customerPerspective":e="cp";break;case "marketingCloudOrgID":e="mcorgid";break;case "supplementalDataID":e="sdid";
break;case "timestamp":e="ts";break;case "dynamicVariablePrefix":e="D";break;case "visitorID":e="vid";break;case "marketingCloudVisitorID":e="mid";break;case "analyticsVisitorID":e="aid";break;case "audienceManagerLocationHint":e="aamlh";break;case "audienceManagerBlob":e="aamb";break;case "authState":e="as";break;case "pageURL":e="g";255<g.length&&(a.pageURLRest=g.substring(255),g=g.substring(0,255));break;case "pageURLRest":e="-g";break;case "referrer":e="r";break;case "vmk":case "visitorMigrationKey":e=
"vmt";break;case "visitorMigrationServer":e="vmf";a.ssl&&a.visitorMigrationServerSecure&&(g="");break;case "visitorMigrationServerSecure":e="vmf";!a.ssl&&a.visitorMigrationServer&&(g="");break;case "charSet":e="ce";break;case "visitorNamespace":e="ns";break;case "cookieDomainPeriods":e="cdp";break;case "cookieLifetime":e="cl";break;case "variableProvider":e="vvp";break;case "currencyCode":e="cc";break;case "channel":e="ch";break;case "transactionID":e="xact";break;case "campaign":e="v0";break;case "latitude":e=
"lat";break;case "longitude":e="lon";break;case "resolution":e="s";break;case "colorDepth":e="c";break;case "javascriptVersion":e="j";break;case "javaEnabled":e="v";break;case "cookiesEnabled":e="k";break;case "browserWidth":e="bw";break;case "browserHeight":e="bh";break;case "connectionType":e="ct";break;case "homepage":e="hp";break;case "events":p&&(g+=(""!=g?",":"")+p);if(m)for(k=g.split(","),g="",f=0;f<k.length;f++)l=k[f],h=l.indexOf("\x3d"),0<=h&&(l=l.substring(0,h)),h=l.indexOf(":"),0<=h&&(l=
l.substring(0,h)),0<=m.indexOf(","+l+",")&&(g+=(g?",":"")+k[f]);break;case "events2":g="";break;case "contextData":c+=a.o("c",a[e],n,e);g="";break;case "lightProfileID":e="mtp";break;case "lightStoreForSeconds":e="mtss";a.lightProfileID||(g="");break;case "lightIncrementBy":e="mti";a.lightProfileID||(g="");break;case "retrieveLightProfiles":e="mtsr";break;case "deleteLightProfiles":e="mtsd";break;case "retrieveLightData":a.retrieveLightProfiles&&(c+=a.o("mts",a[e],n,e));g="";break;default:a.Qa(k)&&
("prop"==f?e="c"+k:"eVar"==f?e="v"+k:"list"==f?e="l"+k:"hier"==f&&(e="h"+k,g=g.substring(0,255)))}g&&(c+="\x26"+e+"\x3d"+("pev"!=e.substring(0,3)?a.escape(g):g))}"pev3"==e&&a.e&&(c+=a.e)}a.ja&&(c+="\x26lrt\x3d"+a.ja,a.ja=null);return c};a.B=function(a){var b=a.tagName;if("undefined"!=""+a.kc||"undefined"!=""+a.Yb&&"HTML"!=(""+a.Yb).toUpperCase())return"";b=b&&b.toUpperCase?b.toUpperCase():"";"SHAPE"==b&&(b="");b&&(("INPUT"==b||"BUTTON"==b)&&a.type&&a.type.toUpperCase?b=a.type.toUpperCase():!b&&a.href&&
(b="A"));return b};a.Ma=function(a){var b=h.location,d=a.href?a.href:"",f,e,g;f=d.indexOf(":");e=d.indexOf("?");g=d.indexOf("/");d&&(0>f||0<=e&&f>e||0<=g&&f>g)&&(e=a.protocol&&1<a.protocol.length?a.protocol:b.protocol?b.protocol:"",f=b.pathname.lastIndexOf("/"),d=(e?e+"//":"")+(a.host?a.host:b.host?b.host:"")+("/"!=d.substring(0,1)?b.pathname.substring(0,0>f?0:f)+"/":"")+d);return d};a.L=function(c){var b=a.B(c),d,f,e="",g=0;return b&&(d=c.protocol,f=c.onclick,!c.href||"A"!=b&&"AREA"!=b||f&&d&&!(0>
d.toLowerCase().indexOf("javascript"))?f?(e=a.replace(a.replace(a.replace(a.replace(""+f,"\r",""),"\n",""),"\t","")," ",""),g=2):"INPUT"==b||"SUBMIT"==b?(c.value?e=c.value:c.innerText?e=c.innerText:c.textContent&&(e=c.textContent),g=3):"IMAGE"==b&&c.src&&(e=c.src):e=a.Ma(c),e)?{id:e.substring(0,100),type:g}:0};a.ic=function(c){for(var b=a.B(c),d=a.L(c);c&&!d&&"BODY"!=b;)if(c=c.parentElement?c.parentElement:c.parentNode)b=a.B(c),d=a.L(c);d&&"BODY"!=b||(c=0);c&&(b=c.onclick?""+c.onclick:"",0<=b.indexOf(".tl(")||
0<=b.indexOf(".trackLink("))&&(c=0);return c};a.Xb=function(){var c,b,d=a.linkObject,f=a.linkType,e=a.linkURL,g,k;a.la=1;d||(a.la=0,d=a.clickObject);if(d){c=a.B(d);for(b=a.L(d);d&&!b&&"BODY"!=c;)if(d=d.parentElement?d.parentElement:d.parentNode)c=a.B(d),b=a.L(d);b&&"BODY"!=c||(d=0);if(d&&!a.linkObject){var l=d.onclick?""+d.onclick:"";if(0<=l.indexOf(".tl(")||0<=l.indexOf(".trackLink("))d=0}}else a.la=1;!e&&d&&(e=a.Ma(d));e&&!a.linkLeaveQueryString&&(g=e.indexOf("?"),0<=g&&(e=e.substring(0,g)));if(!f&&
e){var m=0,n=0,p;if(a.trackDownloadLinks&&a.linkDownloadFileTypes)for(l=e.toLowerCase(),g=l.indexOf("?"),k=l.indexOf("#"),0<=g?0<=k&&k<g&&(g=k):g=k,0<=g&&(l=l.substring(0,g)),g=a.linkDownloadFileTypes.toLowerCase().split(","),k=0;k<g.length;k++)(p=g[k])&&l.substring(l.length-(p.length+1))=="."+p&&(f="d");if(a.trackExternalLinks&&!f&&(l=e.toLowerCase(),a.Pa(l)&&(a.linkInternalFilters||(a.linkInternalFilters=h.location.hostname),g=0,a.linkExternalFilters?(g=a.linkExternalFilters.toLowerCase().split(","),
m=1):a.linkInternalFilters&&(g=a.linkInternalFilters.toLowerCase().split(",")),g))){for(k=0;k<g.length;k++)p=g[k],0<=l.indexOf(p)&&(n=1);n?m&&(f="e"):m||(f="e")}}a.linkObject=d;a.linkURL=e;a.linkType=f;if(a.trackClickMap||a.trackInlineStats)a.e="",d&&(f=a.pageName,e=1,d=d.sourceIndex,f||(f=a.pageURL,e=0),h.s_objectID&&(b.id=h.s_objectID,d=b.type=1),f&&b&&b.id&&c&&(a.e="\x26pid\x3d"+a.escape(f.substring(0,255))+(e?"\x26pidt\x3d"+e:"")+"\x26oid\x3d"+a.escape(b.id.substring(0,100))+(b.type?"\x26oidt\x3d"+
b.type:"")+"\x26ot\x3d"+c+(d?"\x26oi\x3d"+d:"")))};a.Qb=function(){var c=a.la,b=a.linkType,d=a.linkURL,f=a.linkName;b&&(d||f)&&(b=b.toLowerCase(),"d"!=b&&"e"!=b&&(b="o"),a.pe="lnk_"+b,a.pev1=d?a.escape(d):"",a.pev2=f?a.escape(f):"",c=1);a.abort&&(c=0);if(a.trackClickMap||a.trackInlineStats||a.Tb()){var b={},d=0,e=a.qb(),g=e?e.split("\x26"):0,k,l,h,e=0;if(g)for(k=0;k<g.length;k++)l=g[k].split("\x3d"),f=a.unescape(l[0]).split(","),l=a.unescape(l[1]),b[l]=f;f=a.account.split(",");k={};for(h in a.contextData)h&&
!Object.prototype[h]&&"a.activitymap."==h.substring(0,14)&&(k[h]=a.contextData[h],a.contextData[h]="");a.e=a.o("c",k)+(a.e?a.e:"");if(c||a.e){c&&!a.e&&(e=1);for(l in b)if(!Object.prototype[l])for(h=0;h<f.length;h++)for(e&&(g=b[l].join(","),g==a.account&&(a.e+=("\x26"!=l.charAt(0)?"\x26":"")+l,b[l]=[],d=1)),k=0;k<b[l].length;k++)g=b[l][k],g==f[h]&&(e&&(a.e+="\x26u\x3d"+a.escape(g)+("\x26"!=l.charAt(0)?"\x26":"")+l+"\x26u\x3d0"),b[l].splice(k,1),d=1);c||(d=1);if(d){e="";k=2;!c&&a.e&&(e=a.escape(f.join(","))+
"\x3d"+a.escape(a.e),k=1);for(l in b)!Object.prototype[l]&&0<k&&0<b[l].length&&(e+=(e?"\x26":"")+a.escape(b[l].join(","))+"\x3d"+a.escape(l),k--);a.yb(e)}}}return c};a.qb=function(){if(a.useLinkTrackSessionStorage){if(a.Da())return h.sessionStorage.getItem(a.P)}else return a.cookieRead(a.P)};a.Da=function(){return h.sessionStorage?!0:!1};a.yb=function(c){a.useLinkTrackSessionStorage?a.Da()&&h.sessionStorage.setItem(a.P,c):a.cookieWrite(a.P,c)};a.Rb=function(){if(!a.ac){var c=new Date,b=p.location,
d,f,e=f=d="",g="",k="",l="1.2",h=a.cookieWrite("s_cc","true",0)?"Y":"N",m="",q="";if(c.setUTCDate&&(l="1.3",(0).toPrecision&&(l="1.5",c=[],c.forEach))){l="1.6";f=0;d={};try{f=new Iterator(d),f.next&&(l="1.7",c.reduce&&(l="1.8",l.trim&&(l="1.8.1",Date.parse&&(l="1.8.2",Object.create&&(l="1.8.5")))))}catch(r){}}d=screen.width+"x"+screen.height;e=navigator.javaEnabled()?"Y":"N";f=screen.pixelDepth?screen.pixelDepth:screen.colorDepth;g=a.w.innerWidth?a.w.innerWidth:a.d.documentElement.offsetWidth;k=a.w.innerHeight?
a.w.innerHeight:a.d.documentElement.offsetHeight;try{a.b.addBehavior("#default#homePage"),m=a.b.jc(b)?"Y":"N"}catch(s){}try{a.b.addBehavior("#default#clientCaps"),q=a.b.connectionType}catch(t){}a.resolution=d;a.colorDepth=f;a.javascriptVersion=l;a.javaEnabled=e;a.cookiesEnabled=h;a.browserWidth=g;a.browserHeight=k;a.connectionType=q;a.homepage=m;a.ac=1}};a.Q={};a.loadModule=function(c,b){var d=a.Q[c];if(!d){d=h["AppMeasurement_Module_"+c]?new h["AppMeasurement_Module_"+c](a):{};a.Q[c]=a[c]=d;d.jb=
function(){return d.tb};d.zb=function(b){if(d.tb=b)a[c+"_onLoad"]=b,a.ea(c+"_onLoad",[a,d],1)||b(a,d)};try{Object.defineProperty?Object.defineProperty(d,"onLoad",{get:d.jb,set:d.zb}):d._olc=1}catch(f){d._olc=1}}b&&(a[c+"_onLoad"]=b,a.ea(c+"_onLoad",[a,d],1)||b(a,d))};a.u=function(c){var b,d;for(b in a.Q)if(!Object.prototype[b]&&(d=a.Q[b])&&(d._olc&&d.onLoad&&(d._olc=0,d.onLoad(a,d)),d[c]&&d[c]()))return 1;return 0};a.Tb=function(){return a.ActivityMap&&a.ActivityMap._c?!0:!1};a.Ub=function(){var c=
Math.floor(1E13*Math.random()),b=a.visitorSampling,d=a.visitorSamplingGroup,d="s_vsn_"+(a.visitorNamespace?a.visitorNamespace:a.account)+(d?"_"+d:""),f=a.cookieRead(d);if(b){b*=100;f&&(f=parseInt(f));if(!f){if(!a.cookieWrite(d,c))return 0;f=c}if(f%1E4>b)return 0}return 1};a.S=function(c,b){var d,f,e,g,k,h,m;m={};for(d=0;2>d;d++)for(f=0<d?a.Fa:a.g,e=0;e<f.length;e++)if(g=f[e],(k=c[g])||c["!"+g]){if(k&&!b&&("contextData"==g||"retrieveLightData"==g)&&a[g])for(h in a[g])k[h]||(k[h]=a[g][h]);a[g]||(m["!"+
g]=1);m[g]=a[g];a[g]=k}return m};a.gc=function(c){var b,d,f,e;for(b=0;2>b;b++)for(d=0<b?a.Fa:a.g,f=0;f<d.length;f++)e=d[f],c[e]=a[e],c[e]||"prop"!==e.substring(0,4)&&"eVar"!==e.substring(0,4)&&"hier"!==e.substring(0,4)&&"list"!==e.substring(0,4)&&"channel"!==e&&"events"!==e&&"eventList"!==e&&"products"!==e&&"productList"!==e&&"purchaseID"!==e&&"transactionID"!==e&&"state"!==e&&"zip"!==e&&"campaign"!==e&&"events2"!==e&&"latitude"!==e&&"longitude"!==e&&"ms_a"!==e&&"contextData"!==e&&"supplementalDataID"!==
e&&"tnt"!==e&&"timestamp"!==e&&"abort"!==e&&"useBeacon"!==e&&"linkObject"!==e&&"clickObject"!==e&&"linkType"!==e&&"linkName"!==e&&"linkURL"!==e&&"bodyClickTarget"!==e&&"bodyClickFunction"!==e||(c["!"+e]=1)};a.Lb=function(a){var b,d,f,e,g,k=0,h,m="",n="";if(a&&255<a.length&&(b=""+a,d=b.indexOf("?"),0<d&&(h=b.substring(d+1),b=b.substring(0,d),e=b.toLowerCase(),f=0,"http://"==e.substring(0,7)?f+=7:"https://"==e.substring(0,8)&&(f+=8),d=e.indexOf("/",f),0<d&&(e=e.substring(f,d),g=b.substring(d),b=b.substring(0,
d),0<=e.indexOf("google")?k=",q,ie,start,search_key,word,kw,cd,":0<=e.indexOf("yahoo.co")?k=",p,ei,":0<=e.indexOf("baidu.")&&(k=",wd,word,"),k&&h)))){if((a=h.split("\x26"))&&1<a.length){for(f=0;f<a.length;f++)e=a[f],d=e.indexOf("\x3d"),0<d&&0<=k.indexOf(","+e.substring(0,d)+",")?m+=(m?"\x26":"")+e:n+=(n?"\x26":"")+e;m&&n?h=m+"\x26"+n:n=""}d=253-(h.length-n.length)-b.length;a=b+(0<d?g.substring(0,d):"")+"?"+h}return a};a.cb=function(c){var b=a.d.visibilityState,d=["webkitvisibilitychange","visibilitychange"];
b||(b=a.d.webkitVisibilityState);if(b&&"prerender"==b){if(c)for(b=0;b<d.length;b++)a.d.addEventListener(d[b],function(){var b=a.d.visibilityState;b||(b=a.d.webkitVisibilityState);"visible"==b&&c()});return!1}return!0};a.ba=!1;a.H=!1;a.Bb=function(){a.H=!0;a.p()};a.I=!1;a.Cb=function(c){a.marketingCloudVisitorID=c.MCMID;a.visitorOptedOut=c.MCOPTOUT;a.analyticsVisitorID=c.MCAID;a.audienceManagerLocationHint=c.MCAAMLH;a.audienceManagerBlob=c.MCAAMB;a.I=!1;a.p()};a.bb=function(c){a.maxDelay||(a.maxDelay=
250);return a.u("_d")?(c&&setTimeout(function(){c()},a.maxDelay),!1):!0};a.Z=!1;a.G=!1;a.za=function(){a.G=!0;a.p()};a.isReadyToTrack=function(){var c=!0;if(!a.nb()||!a.lb())return!1;a.pb()||(c=!1);a.sb()||(c=!1);return c};a.nb=function(){a.ba||a.H||(a.cb(a.Bb)?a.H=!0:a.ba=!0);return a.ba&&!a.H?!1:!0};a.lb=function(){var c=a.va();if(c)if(a.ra||a.aa)if(a.ra){if(!c.isApproved(c.Categories.ANALYTICS))return!1}else return!1;else return c.fetchPermissions(a.ub,!0),a.aa=!0,!1;return!0};a.V=function(c){var b=
a.va();return b&&!b.isApproved(b.Categories[c])?!1:!0};a.va=function(){return h.adobe&&h.adobe.optIn?h.adobe.optIn:null};a.Y=!0;a.pb=function(){var c=a.T();if(!c||!c.getVisitorValues)return!0;a.Y&&(a.Y=!1,a.I||(a.I=!0,c.getVisitorValues(a.Cb)));return!a.I};a.T=function(){var c=a.visitor;c&&!c.isAllowed()&&(c=null);return c};a.sb=function(){a.Z||a.G||(a.bb(a.za)?a.G=!0:a.Z=!0);return a.Z&&!a.G?!1:!0};a.aa=!1;a.ub=function(){a.aa=!1;a.ra=!0};a.j=q;a.q=0;a.callbackWhenReadyToTrack=function(c,b,d){var f;
f={};f.Gb=c;f.Fb=b;f.Db=d;a.j==q&&(a.j=[]);a.j.push(f);0==a.q&&(a.q=setInterval(a.p,100))};a.p=function(){var c;if(a.isReadyToTrack()&&(a.Ab(),a.j!=q))for(;0<a.j.length;)c=a.j.shift(),c.Fb.apply(c.Gb,c.Db)};a.Ab=function(){a.q&&(clearInterval(a.q),a.q=0)};a.ta=function(c){var b,d={};a.gc(d);if(c!=q)for(b in c)d[b]=c[b];a.callbackWhenReadyToTrack(a,a.Ea,[d]);a.Ca()};a.Nb=function(){var c=a.cookieRead("s_fid"),b="",d="",f;f=8;var e=4;if(!c||0>c.indexOf("-")){for(c=0;16>c;c++)f=Math.floor(Math.random()*
f),b+="0123456789ABCDEF".substring(f,f+1),f=Math.floor(Math.random()*e),d+="0123456789ABCDEF".substring(f,f+1),f=e=16;c=b+"-"+d}a.cookieWrite("s_fid",c,1)||(c=0);return c};a.Ea=function(c){var b=new Date,d="s"+Math.floor(b.getTime()/108E5)%10+Math.floor(1E13*Math.random()),f=b.getYear(),f="t\x3d"+a.escape(b.getDate()+"/"+b.getMonth()+"/"+(1900>f?f+1900:f)+" "+b.getHours()+":"+b.getMinutes()+":"+b.getSeconds()+" "+b.getDay()+" "+b.getTimezoneOffset()),e=a.T(),g;c&&(g=a.S(c,1));a.Ub()&&!a.visitorOptedOut&&
(a.wa()||(a.fid=a.Nb()),a.Xb(),a.usePlugins&&a.doPlugins&&a.doPlugins(a),a.account&&(a.abort||(a.trackOffline&&!a.timestamp&&(a.timestamp=Math.floor(b.getTime()/1E3)),c=h.location,a.pageURL||(a.pageURL=c.href?c.href:c),a.referrer||a.Za||(c=a.Util.getQueryParam("adobe_mc_ref",null,null,!0),a.referrer=c||void 0===c?void 0===c?"":c:p.document.referrer),a.Za=1,a.referrer=a.Lb(a.referrer),a.u("_g")),a.Qb()&&!a.abort&&(e&&a.V("TARGET")&&!a.supplementalDataID&&e.getSupplementalDataID&&(a.supplementalDataID=
e.getSupplementalDataID("AppMeasurement:"+a._in,a.expectSupplementalData?!1:!0)),a.V("AAM")||(a.contextData["cm.ssf"]=1),a.Rb(),a.vb(),f+=a.Pb(),a.rb(d,f),a.u("_t"),a.referrer="")));a.Ca();g&&a.S(g,1)};a.t=a.track=function(c,b){b&&a.S(b);a.Y=!0;a.isReadyToTrack()?null!=a.j&&0<a.j.length?(a.ta(c),a.p()):a.Ea(c):a.ta(c)};a.vb=function(){a.writeSecureCookies&&!a.ssl&&a.$a()};a.$a=function(){a.contextData.excCodes=a.contextData.excCodes?a.contextData.excCodes:[];a.contextData.excCodes.push(1)};a.Ca=function(){a.abort=
a.supplementalDataID=a.timestamp=a.pageURLRest=a.linkObject=a.clickObject=a.linkURL=a.linkName=a.linkType=h.s_objectID=a.pe=a.pev1=a.pev2=a.pev3=a.e=a.lightProfileID=a.useBeacon=a.referrer=0;a.contextData&&a.contextData.excCodes&&(a.contextData.excCodes=0)};a.Ba=[];a.registerPreTrackCallback=function(c){for(var b=[],d=1;d<arguments.length;d++)b.push(arguments[d]);"function"==typeof c?a.Ba.push([c,b]):a.debugTracking&&a.C("DEBUG: Non function type passed to registerPreTrackCallback")};a.gb=function(c){a.ua(a.Ba,
c)};a.Aa=[];a.registerPostTrackCallback=function(c){for(var b=[],d=1;d<arguments.length;d++)b.push(arguments[d]);"function"==typeof c?a.Aa.push([c,b]):a.debugTracking&&a.C("DEBUG: Non function type passed to registerPostTrackCallback")};a.fb=function(c){a.ua(a.Aa,c)};a.ua=function(c,b){if("object"==typeof c)for(var d=0;d<c.length;d++){var f=c[d][0],e=c[d][1].slice();e.unshift(b);if("function"==typeof f)try{f.apply(null,e)}catch(g){a.debugTracking&&a.C(g.message)}}};a.tl=a.trackLink=function(c,b,d,
f,e){a.linkObject=c;a.linkType=b;a.linkName=d;e&&(a.bodyClickTarget=c,a.bodyClickFunction=e);return a.track(f)};a.trackLight=function(c,b,d,f){a.lightProfileID=c;a.lightStoreForSeconds=b;a.lightIncrementBy=d;return a.track(f)};a.clearVars=function(){var c,b;for(c=0;c<a.g.length;c++)if(b=a.g[c],"prop"==b.substring(0,4)||"eVar"==b.substring(0,4)||"hier"==b.substring(0,4)||"list"==b.substring(0,4)||"channel"==b||"events"==b||"eventList"==b||"products"==b||"productList"==b||"purchaseID"==b||"transactionID"==
b||"state"==b||"zip"==b||"campaign"==b)a[b]=void 0};a.tagContainerMarker="";a.rb=function(c,b){var d=a.hb()+"/"+c+"?AQB\x3d1\x26ndh\x3d1\x26pf\x3d1\x26"+(a.ya()?"callback\x3ds_c_il["+a._in+"].doPostbacks\x26et\x3d1\x26":"")+b+"\x26AQE\x3d1";a.gb(d);a.eb(d);a.U()};a.hb=function(){var c=a.ib();return"http"+(a.ssl?"s":"")+"://"+c+"/b/ss/"+a.account+"/"+(a.mobile?"5.":"")+(a.ya()?"10":"1")+"/JS-"+a.version+(a.$b?"T":"")+(a.tagContainerMarker?"-"+a.tagContainerMarker:"")};a.ya=function(){return a.AudienceManagement&&
a.AudienceManagement.isReady()||0!=a.usePostbacks};a.ib=function(){var c=a.dc,b=a.trackingServer;b?a.trackingServerSecure&&a.ssl&&(b=a.trackingServerSecure):(c=c?(""+c).toLowerCase():"d1","d1"==c?c="112":"d2"==c&&(c="122"),b=a.kb()+"."+c+".2o7.net");return b};a.kb=function(){var c=a.visitorNamespace;c||(c=a.account.split(",")[0],c=c.replace(/[^0-9a-z]/gi,""));return c};a.Ya=/{(%?)(.*?)(%?)}/;a.fc=RegExp(a.Ya.source,"g");a.Kb=function(c){if("object"==typeof c.dests)for(var b=0;b<c.dests.length;++b){var d=
c.dests[b];if("string"==typeof d.c&&"aa."==d.id.substr(0,3))for(var f=d.c.match(a.fc),e=0;e<f.length;++e){var g=f[e],k=g.match(a.Ya),h="";"%"==k[1]&&"timezone_offset"==k[2]?h=(new Date).getTimezoneOffset():"%"==k[1]&&"timestampz"==k[2]&&(h=a.Ob());d.c=d.c.replace(g,a.escape(h))}}};a.Ob=function(){var c=new Date,b=new Date(6E4*Math.abs(c.getTimezoneOffset()));return a.k(4,c.getFullYear())+"-"+a.k(2,c.getMonth()+1)+"-"+a.k(2,c.getDate())+"T"+a.k(2,c.getHours())+":"+a.k(2,c.getMinutes())+":"+a.k(2,c.getSeconds())+
(0<c.getTimezoneOffset()?"-":"+")+a.k(2,b.getUTCHours())+":"+a.k(2,b.getUTCMinutes())};a.k=function(a,b){return(Array(a+1).join(0)+b).slice(-a)};a.pa={};a.doPostbacks=function(c){if("object"==typeof c)if(a.Kb(c),"object"==typeof a.AudienceManagement&&"function"==typeof a.AudienceManagement.isReady&&a.AudienceManagement.isReady()&&"function"==typeof a.AudienceManagement.passData)a.AudienceManagement.passData(c);else if("object"==typeof c&&"object"==typeof c.dests)for(var b=0;b<c.dests.length;++b){var d=
c.dests[b];"object"==typeof d&&"string"==typeof d.c&&"string"==typeof d.id&&"aa."==d.id.substr(0,3)&&(a.pa[d.id]=new Image,a.pa[d.id].alt="",a.pa[d.id].src=d.c)}};a.eb=function(c){a.i||a.Sb();a.i.push(c);a.ia=a.A();a.Xa()};a.Sb=function(){a.i=a.Vb();a.i||(a.i=[])};a.Vb=function(){var c,b;if(a.oa()){try{(b=h.localStorage.getItem(a.ma()))&&(c=h.JSON.parse(b))}catch(d){}return c}};a.oa=function(){var c=!0;a.trackOffline&&a.offlineFilename&&h.localStorage&&h.JSON||(c=!1);return c};a.Na=function(){var c=
0;a.i&&(c=a.i.length);a.l&&c++;return c};a.U=function(){if(a.l&&(a.v&&a.v.complete&&a.v.D&&a.v.R(),a.l))return;a.Oa=q;if(a.na)a.ia>a.N&&a.Va(a.i),a.qa(500);else{var c=a.Eb();if(0<c)a.qa(c);else if(c=a.La())a.l=1,a.Wb(c),a.Zb(c)}};a.qa=function(c){a.Oa||(c||(c=0),a.Oa=setTimeout(a.U,c))};a.Eb=function(){var c;if(!a.trackOffline||0>=a.offlineThrottleDelay)return 0;c=a.A()-a.Ta;return a.offlineThrottleDelay<c?0:a.offlineThrottleDelay-c};a.La=function(){if(0<a.i.length)return a.i.shift()};a.Wb=function(c){if(a.debugTracking){var b=
"AppMeasurement Debug: "+c;c=c.split("\x26");var d;for(d=0;d<c.length;d++)b+="\n\t"+a.unescape(c[d]);a.C(b)}};a.wa=function(){return a.marketingCloudVisitorID||a.analyticsVisitorID};a.X=!1;var t;try{t=JSON.parse('{"x":"y"}')}catch(v){t=null}t&&"y"==t.x?(a.X=!0,a.W=function(a){return JSON.parse(a)}):h.$&&h.$.parseJSON?(a.W=function(a){return h.$.parseJSON(a)},a.X=!0):a.W=function(){return null};a.Zb=function(c){var b,d,f;a.mb(c)&&(d=1,b={send:function(c){a.useBeacon=!1;navigator.sendBeacon(c)?b.R():
b.ga()}});!b&&a.wa()&&2047<c.length&&(a.ab()&&(d=2,b=new XMLHttpRequest),b&&(a.AudienceManagement&&a.AudienceManagement.isReady()||0!=a.usePostbacks)&&(a.X?b.Ga=!0:b=0));!b&&a.ec&&(c=c.substring(0,2047));!b&&a.d.createElement&&(0!=a.usePostbacks||a.AudienceManagement&&a.AudienceManagement.isReady())&&(b=a.d.createElement("SCRIPT"))&&"async"in b&&((f=(f=a.d.getElementsByTagName("HEAD"))&&f[0]?f[0]:a.d.body)?(b.type="text/javascript",b.setAttribute("async","async"),d=3):b=0);b||(b=new Image,b.alt="",
b.abort||"undefined"===typeof h.InstallTrigger||(b.abort=function(){b.src=q}));b.Ua=Date.now();b.Ia=function(){try{b.D&&(clearTimeout(b.D),b.D=0)}catch(a){}};b.onload=b.R=function(){b.Ua&&(a.ja=Date.now()-b.Ua);a.fb(c);b.Ia();a.Ib();a.ca();a.l=0;a.U();if(b.Ga){b.Ga=!1;try{a.doPostbacks(a.W(b.responseText))}catch(d){}}};b.onabort=b.onerror=b.ga=function(){b.Ia();(a.trackOffline||a.na)&&a.l&&a.i.unshift(a.Hb);a.l=0;a.ia>a.N&&a.Va(a.i);a.ca();a.qa(500)};b.onreadystatechange=function(){4==b.readyState&&
(200==b.status?b.R():b.ga())};a.Ta=a.A();if(1===d)b.send(c);else if(2===d)f=c.indexOf("?"),d=c.substring(0,f),f=c.substring(f+1),f=f.replace(/&callback=[a-zA-Z0-9_.\[\]]+/,""),b.open("POST",d,!0),b.withCredentials=!0,b.send(f);else if(b.src=c,3===d){if(a.Ra)try{f.removeChild(a.Ra)}catch(e){}f.firstChild?f.insertBefore(b,f.firstChild):f.appendChild(b);a.Ra=a.v}b.D=setTimeout(function(){b.D&&(b.complete?b.R():(a.trackOffline&&b.abort&&b.abort(),b.ga()))},5E3);a.Hb=c;a.v=h["s_i_"+a.replace(a.account,
",","_")]=b;if(a.useForcedLinkTracking&&a.J||a.bodyClickFunction)a.forcedLinkTrackingTimeout||(a.forcedLinkTrackingTimeout=250),a.da=setTimeout(a.ca,a.forcedLinkTrackingTimeout)};a.mb=function(c){var b=!1;navigator.sendBeacon&&(a.ob(c)?b=!0:a.useBeacon&&(b=!0));a.xb(c)&&(b=!1);return b};a.ob=function(a){return a&&0<a.indexOf("pe\x3dlnk_e")?!0:!1};a.xb=function(a){return 64E3<=a.length};a.ab=function(){return"undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?!0:!1};a.Ib=function(){if(a.oa()&&
!(a.Sa>a.N))try{h.localStorage.removeItem(a.ma()),a.Sa=a.A()}catch(c){}};a.Va=function(c){if(a.oa()){a.Xa();try{h.localStorage.setItem(a.ma(),h.JSON.stringify(c)),a.N=a.A()}catch(b){}}};a.Xa=function(){if(a.trackOffline){if(!a.offlineLimit||0>=a.offlineLimit)a.offlineLimit=10;for(;a.i.length>a.offlineLimit;)a.La()}};a.forceOffline=function(){a.na=!0};a.forceOnline=function(){a.na=!1};a.ma=function(){return a.offlineFilename+"-"+a.visitorNamespace+a.account};a.A=function(){return(new Date).getTime()};
a.Pa=function(a){a=a.toLowerCase();return 0!=a.indexOf("#")&&0!=a.indexOf("about:")&&0!=a.indexOf("opera:")&&0!=a.indexOf("javascript:")?!0:!1};a.setTagContainer=function(c){var b,d,f;a.$b=c;for(b=0;b<a._il.length;b++)if((d=a._il[b])&&"s_l"==d._c&&d.tagContainerName==c){a.S(d);if(d.lmq)for(b=0;b<d.lmq.length;b++)f=d.lmq[b],a.loadModule(f.n);if(d.ml)for(f in d.ml)if(a[f])for(b in c=a[f],f=d.ml[f],f)!Object.prototype[b]&&("function"!=typeof f[b]||0>(""+f[b]).indexOf("s_c_il"))&&(c[b]=f[b]);if(d.mmq)for(b=
0;b<d.mmq.length;b++)f=d.mmq[b],a[f.m]&&(c=a[f.m],c[f.f]&&"function"==typeof c[f.f]&&(f.a?c[f.f].apply(c,f.a):c[f.f].apply(c)));if(d.tq)for(b=0;b<d.tq.length;b++)a.track(d.tq[b]);d.s=a;break}};a.Util={urlEncode:a.escape,urlDecode:a.unescape,cookieRead:a.cookieRead,cookieWrite:a.cookieWrite,getQueryParam:function(c,b,d,f){var e,g="";b||(b=a.pageURL?a.pageURL:h.location);d=d?d:"\x26";if(!c||!b)return g;b=""+b;e=b.indexOf("?");if(0>e)return g;b=d+b.substring(e+1)+d;if(!f||!(0<=b.indexOf(d+c+d)||0<=b.indexOf(d+
c+"\x3d"+d))){e=b.indexOf("#");0<=e&&(b=b.substr(0,e)+d);e=b.indexOf(d+c+"\x3d");if(0>e)return g;b=b.substring(e+d.length+c.length+1);e=b.indexOf(d);0<=e&&(b=b.substring(0,e));0<b.length&&(g=a.unescape(b));return g}},getIeVersion:function(){return document.documentMode?document.documentMode:a.xa()?7:null}};a.F="supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL customerPerspective referrer contextData currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData".split(" ");
a.g=a.F.concat("purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt".split(" "));a.ka="timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy".split(" ");a.O=a.ka.slice(0);a.Fa="account allAccounts debugTracking visitor visitorOptedOut trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout writeSecureCookies useLinkTrackSessionStorage trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData useBeacon usePostbacks registerPreTrackCallback registerPostTrackCallback bodyClickTarget bodyClickFunction AudienceManagement".split(" ");
for(m=0;250>=m;m++)76>m&&(a.g.push("prop"+m),a.O.push("prop"+m)),a.g.push("eVar"+m),a.O.push("eVar"+m),6>m&&a.g.push("hier"+m),4>m&&a.g.push("list"+m);m="pe pev1 pev2 pev3 latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage pageURLRest marketingCloudOrgID ms_a".split(" ");a.g=a.g.concat(m);a.F=a.F.concat(m);a.ssl=0<=h.location.protocol.toLowerCase().indexOf("https");a.charSet="UTF-8";a.contextData={};a.writeSecureCookies=
!1;a.offlineThrottleDelay=0;a.offlineFilename="AppMeasurement.offline";a.P="s_sq";a.Ta=0;a.ia=0;a.N=0;a.Sa=0;a.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx";a.w=h;a.d=h.document;a.ca=function(){a.da&&(h.clearTimeout(a.da),a.da=q);a.bodyClickTarget&&a.J&&a.bodyClickTarget.dispatchEvent(a.J);a.bodyClickFunction&&("function"==typeof a.bodyClickFunction?a.bodyClickFunction():a.bodyClickTarget&&a.bodyClickTarget.href&&(a.d.location=a.bodyClickTarget.href));a.bodyClickTarget=
a.J=a.bodyClickFunction=0};a.Wa=function(){a.b=a.d.body;a.b?(a.r=function(c){var b,d,f,e,g;if(!(a.d&&a.d.getElementById("cppXYctnr")||c&&c["s_fe_"+a._in])){if(a.Ha)if(a.useForcedLinkTracking)a.b.removeEventListener("click",a.r,!1);else{a.b.removeEventListener("click",a.r,!0);a.Ha=a.useForcedLinkTracking=0;return}else a.useForcedLinkTracking=0;a.clickObject=c.srcElement?c.srcElement:c.target;try{if(!a.clickObject||a.M&&a.M==a.clickObject||!(a.clickObject.tagName||a.clickObject.parentElement||a.clickObject.parentNode))a.clickObject=
0;else{var k=a.M=a.clickObject;a.ha&&(clearTimeout(a.ha),a.ha=0);a.ha=setTimeout(function(){a.M==k&&(a.M=0)},1E4);f=a.Na();a.track();if(f<a.Na()&&a.useForcedLinkTracking&&c.target){for(e=c.target;e&&e!=a.b&&"A"!=e.tagName.toUpperCase()&&"AREA"!=e.tagName.toUpperCase();)e=e.parentNode;if(e&&(g=e.href,a.Pa(g)||(g=0),d=e.target,c.target.dispatchEvent&&g&&(!d||"_self"==d||"_top"==d||"_parent"==d||h.name&&d==h.name))){try{b=a.d.createEvent("MouseEvents")}catch(l){b=new h.MouseEvent}if(b){try{b.initMouseEvent("click",
c.bubbles,c.cancelable,c.view,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget)}catch(m){b=0}b&&(b["s_fe_"+a._in]=b.s_fe=1,c.stopPropagation(),c.stopImmediatePropagation&&c.stopImmediatePropagation(),c.preventDefault(),a.bodyClickTarget=c.target,a.J=b)}}}}}catch(n){a.clickObject=0}}},a.b&&a.b.attachEvent?a.b.attachEvent("onclick",a.r):a.b&&a.b.addEventListener&&(navigator&&(0<=navigator.userAgent.indexOf("WebKit")&&a.d.createEvent||
0<=navigator.userAgent.indexOf("Firefox/2")&&h.MouseEvent)&&(a.Ha=1,a.useForcedLinkTracking=1,a.b.addEventListener("click",a.r,!0)),a.b.addEventListener("click",a.r,!1))):setTimeout(a.Wa,30)};a.ec=a.xa();a.Jb();a.lc||(r?a.setAccount(r):a.C("Error, missing Report Suite ID in AppMeasurement initialization"),a.Wa(),a.loadModule("ActivityMap"))}function s_omni_gi(r){var a,h=window.s_c_il,q,p,m=r.split(","),s,u,t=0;if(h)for(q=0;!t&&q<h.length;){a=h[q];if("s_c"==a._c&&(a.account||a.oun))if(a.account&&a.account==
r)t=1;else for(p=a.account?a.account:a.oun,p=a.allAccounts?a.allAccounts:p.split(","),s=0;s<m.length;s++)for(u=0;u<p.length;u++)m[s]==p[u]&&(t=1);q++}t?a.setAccount&&a.setAccount(r):a=new AppMeasurement(r);return a}AppMeasurement.getInstance=s_omni_gi;window.s_objectID||(window.s_objectID=0);function s_omni_pgicq(){var r=window,a=r.s_giq,h,q,p;if(a)for(h=0;h<a.length;h++)q=a[h],p=s_gi(q.oun),p.setAccount(q.un),p.setTagContainer(q.tagContainerName);r.s_giq=0}s_omni_pgicq();s_omni=new AppMeasurement(function(){var rsid=
[];if(~window.location.hostname.indexOf("."))rsid.push(__dataLayer.adobeConfig.reportSuite);return rsid.join(",")}());s_omni.trackingServer=function(){return __dataLayer.adobeConfig.trackingServer}();s_omni.visitorNamespace=function(){return __dataLayer.adobeConfig.visitorNamespace}();s_omni.server=function(){return __dataLayer.adobeConfig.serverName}();s_omni.trackingServerSecure=function(){return __dataLayer.adobeConfig.trackingServerSecure}();s_omni.charSet="UTF-8";s_omni.trackDownloadLinks=true;
s_omni.trackExternalLinks=false;s_omni.trackInlineStats=true;s_omni.writeSecureCookies=false;s_omni.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx";s_omni.linkInternalFilters=function(){return __dataLayer.adobeConfig.linkInternalFilters}();s_omni.linkLeaveQueryString=false;s_omni.linkTrackVars="None";s_omni.linkTrackEvents="None";s_omni.visitor=window.Visitor.getInstance(function(){return __dataLayer.adobeConfig.visitorID_MCID}());s_omni.useBeacon=false;s_omni.usePlugins=
true;s_omni.usePlugins=true;s_omni.doPlugins=function(s){var s_omni=s;s_omni.wd=window};s_omni.loadModule("Integrate");s_omni.loadModule("Audience Management");s_omni.loadModule("Activity Map");s_omni.getValOnce=new Function("v","c","e","t",""+"var s\x3dthis,a\x3dnew Date,v\x3dv?v:'',c\x3dc?c:'s_gvo',e\x3de?e:0,i\x3dt\x3d\x3d'm'?6000"+"0:86400000;k\x3ds.c_r(c);if(v){a.setTime(a.getTime()+e*i);s.c_w(c,v,e"+"\x3d\x3d0?0:a);}return v\x3d\x3dk?'':v");s_omni.split=new Function("l","d",""+"var i,x\x3d0,a\x3dnew Array;while(l){i\x3dl.indexOf(d);i\x3di\x3e-1?i:l.length;a[x"+
"++]\x3dl.substring(0,i);l\x3dl.substring(i+d.length);}return a");s_omni.channelManager=new Function("a","b","c","d","e","f",""+"var s\x3dthis,g\x3dnew Date,h\x3d0,i,j,k,l,m,n,o,p,q,r,t,u,v,w,x,y,z,A,B,C,D"+",E,F,G,H,I,J,K,L,M,N,O,P,Q,R;g.setTime(g.getTime()+1800000);if(e){h"+"\x3d1;if(s.c_r(e))h\x3d0;if(!s.c_w(e,1,g))s.c_w(e,1,0);if(!s.c_r(e))h\x3d0;}"+"i\x3ds.referrer?s.referrer:document.referrer;i\x3di.toLowerCase();if(!i)j"+"\x3d1;else {k\x3di.indexOf('?')\x3e-1?i.indexOf('?'):i.length;l\x3di.substring("+
"0,k);m\x3ds.split(i,'/');n\x3dm[2].toLowerCase();o\x3ds.linkInternalFilters."+"toLowerCase();o\x3ds.split(o,',');for(p\x3d0;p\x3co.length;p++){q\x3dn.indexOf("+"o[p])\x3d\x3d-1?'':i;if(q)break;}}if(!q\x26\x26!j){r\x3di;t\x3du\x3dn;v\x3d'Other Natural R"+"eferrers';w\x3ds.seList+'\x3e'+s._extraSearchEngines;if(d\x3d\x3d1){l\x3ds.repl(l,"+"'oogle','%');l\x3ds.repl(l,'ahoo','^');i\x3ds.repl(i,'as_q','*');}x\x3ds.spl"+"it(w,'\x3e');for(y\x3d0;y\x3cx.length;y++){z\x3dx[y];z\x3ds.split(z,'|');A\x3ds.split"+
"(z[0],',');for(B\x3d0;B\x3cA.length;B++){C\x3dl.indexOf(A[B]);if(C\x3e-1){if(z["+"2])D\x3du\x3dz[2];else D\x3dn;if(d\x3d\x3d1){D\x3ds.repl(D,'#',' - ');i\x3ds.repl(i,'*',"+"'as_q');D\x3ds.repl(D,'^','ahoo');D\x3ds.repl(D,'%','oogle');}E\x3ds.split(z"+"[1],',');for(F\x3d0;F\x3cE.length;F++){if(i.indexOf(E[F]+'\x3d')\x3e-1||i.index"+"Of('https://www.google.')\x3d\x3d0)G\x3d1;H\x3ds.getQueryParam(E[F],'',i).toLow"+"erCase();if(G||H)break;}}if(G||H)break;}if(G||H)break;}}if(!q||f!\x3d'"+"1'){q\x3ds.getQueryParam(a,b);if(q){u\x3dq;if(D)v\x3d'Paid Search';else v\x3d'U"+
"nknown Paid Channel';}if(!q\x26\x26D){u\x3dD;v\x3d'Natural Search';}}if(j\x3d\x3d1\x26\x26!"+"q\x26\x26h\x3d\x3d1)r\x3dt\x3du\x3dv\x3d'Typed/Bookmarked';I\x3ds._channelDomain;if(I\x26\x26n){J\x3ds."+"split(I,'\x3e');for(K\x3d0;K\x3cJ.length;K++){L\x3ds.split(J[K],'|');M\x3ds.split("+"L[1],',');N\x3dM.length;for(O\x3d0;O\x3cN;O++){P\x3dM[O].toLowerCase();Q\x3dn.inde"+"xOf(P);if(Q\x3e-1){v\x3dL[0];break;}}if(Q\x3e-1)break;}}I\x3ds._channelParamete"+"r;if(I){J\x3ds.split(I,'\x3e');for(K\x3d0;K\x3cJ.length;K++){L\x3ds.split(J[K],'|'"+
");M\x3ds.split(L[1],',');N\x3dM.length;for(O\x3d0;O\x3cN;O++){Q\x3ds.getQueryParam"+"(M[O]);if(Q){v\x3dL[0];break;}}if(Q)break;}}I\x3ds._channelPattern;if(I){"+"J\x3ds.split(I,'\x3e');for(K\x3d0;K\x3cJ.length;K++){L\x3ds.split(J[K],'|');M\x3ds.sp"+"lit(L[1],',');N\x3dM.length;for(O\x3d0;O\x3cN;O++){P\x3dM[O].toLowerCase();Q\x3dq."+"toLowerCase();R\x3dQ.indexOf(P);if(R\x3d\x3d0){v\x3dL[0];break;}}if(R\x3d\x3d0)break;"+"}}S\x3dv?q+t+v+H:'';c\x3dc?c:'c_m';if(c!\x3d'0')S\x3ds.getValOnce(S,c,0);if(S){"+
"s._campaignID\x3dq?q:'n/a';s._referrer\x3dr?r:'n/a';s._referringDomain\x3dt?"+"t:'n/a';s._campaign\x3du?u:'n/a';s._channel\x3dv?v:'n/a';s._partner\x3dD?D:'"+"n/a';s._keywords\x3dG?H?H:'Keyword Unavailable':'n/a';}");s_omni.seList="google.,googlesyndication.com|q,as_q|Google\x3eyahoo.com,yahoo"+".co.jp|p,va|Yahoo!\x3ebing.com|q|Bing\x3ealtavista.co,altavista.de|q,r|Al"+"taVista\x3e.aol.,suche.aolsvc.de|q,query|AOL\x3eask.jp,ask.co|q,ask|Ask\x3ew"+"ww.baidu.com|wd|Baidu\x3edaum.net,search.daum.net|q|Daum\x3eicqit.com|q|i"+
"cq\x3emyway.com|searchfor|MyWay.com\x3enaver.com,search.naver.com|query|N"+"aver\x3enetscape.com|query,search|Netscape Search\x3ereference.com|q|Refe"+"rence.com\x3eseznam|w|Seznam.cz\x3eabcsok.no|q|Startsiden\x3etiscali.it,www."+"tiscali.co.uk|key,query|Tiscali\x3evirgilio.it|qs|Virgilio\x3eyandex|text"+"|Yandex.ru\x3esearch.cnn.com|query|CNN Web Search\x3esearch.earthlink.net"+"|q|Earthlink Search\x3esearch.comcast.net|q|Comcast Search\x3esearch.rr.c"+"om|qs|RoadRunner Search\x3eoptimum.net|q|Optimum Search";
s_omni.crossVisitParticipation=new Function("v","cn","ex","ct","dl","ev","dv",""+"var s\x3dthis,ce;if(typeof(dv)\x3d\x3d\x3d'undefined')dv\x3d0;if(s.events\x26\x26ev){var"+" ay\x3ds.split(ev,',');var ea\x3ds.split(s.events,',');for(var u\x3d0;u\x3cay.l"+"ength;u++){for(var x\x3d0;x\x3cea.length;x++){if(ay[u]\x3d\x3dea[x]){ce\x3d1;}}}}i"+"f(!v||v\x3d\x3d''){if(ce){s.c_w(cn,'');return'';}else return'';}v\x3descape("+"v);var arry\x3dnew Array(),a\x3dnew Array(),c\x3ds.c_r(cn),g\x3d0,h\x3dnew Array()"+
";if(c\x26\x26c!\x3d''){arry\x3ds.split(c,'],[');for(q\x3d0;q\x3carry.length;q++){z\x3dar"+"ry[q];z\x3ds.repl(z,'[','');z\x3ds.repl(z,']','');z\x3ds.repl(z,\"'\",'');arry"+"[q]\x3ds.split(z,',')}}var e\x3dnew Date();e.setFullYear(e.getFullYear()+"+"5);if(dv\x3d\x3d0\x26\x26arry.length\x3e0\x26\x26arry[arry.length-1][0]\x3d\x3dv)arry[arry.len"+"gth-1]\x3d[v,new Date().getTime()];else arry[arry.length]\x3d[v,new Date("+").getTime()];var start\x3darry.length-ct\x3c0?0:arry.length-ct;var td\x3dnew"+" Date();for(var x\x3dstart;x\x3carry.length;x++){var diff\x3dMath.round((td."+
"getTime()-arry[x][1])/86400000);if(diff\x3cex){h[g]\x3dunescape(arry[x][0"+"]);a[g]\x3d[arry[x][0],arry[x][1]];g++;}}var data\x3ds.join(a,{delim:',',"+"front:'[',back:']',wrap:\"'\"});s.c_w(cn,data,e);var r\x3ds.join(h,{deli"+"m:dl});if(ce)s.c_w(cn,'');return r;");s_omni.getQueryParam=new Function("p","d","u","h",""+"var s\x3dthis,v\x3d'',i,j,t;d\x3dd?d:'';u\x3du?u:(s.pageURL?s.pageURL:s.wd.loca"+"tion);if(u\x3d\x3d'f')u\x3ds.gtfs().location;while(p){i\x3dp.indexOf(',');i\x3di\x3c0"+"?p.length:i;t\x3ds.p_gpv(p.substring(0,i),u+'',h);if(t){t\x3dt.indexOf('#"+
"')\x3e-1?t.substring(0,t.indexOf('#')):t;}if(t)v+\x3dv?d+t:t;p\x3dp.substrin"+"g(i\x3d\x3dp.length?i:i+1)}return v");s_omni.p_gpv=new Function("k","u","h",""+"var s\x3dthis,v\x3d'',q;j\x3dh\x3d\x3d1?'#':'?';i\x3du.indexOf(j);if(k\x26\x26i\x3e-1){q\x3du.sub"+"string(i+1);v\x3ds.pt(q,'\x26','p_gvf',k)}return v");s_omni.p_gvf=new Function("t","k",""+"if(t){var s\x3dthis,i\x3dt.indexOf('\x3d'),p\x3di\x3c0?t:t.substring(0,i),v\x3di\x3c0?'T"+"rue':t.substring(i+1);if(p.toLowerCase()\x3d\x3dk.toLowerCase())return s."+
"epa(v)}return''");s_omni.join=new Function("v","p",""+"var s \x3d this;var f,b,d,w;if(p){f\x3dp.front?p.front:'';b\x3dp.back?p.back"+":'';d\x3dp.delim?p.delim:'';w\x3dp.wrap?p.wrap:'';}var str\x3d'';for(var x\x3d0"+";x\x3cv.length;x++){if(typeof(v[x])\x3d\x3d'object' )str+\x3ds.join( v[x],p);el"+"se str+\x3dw+v[x]+w;if(x\x3cv.length-1)str+\x3dd;}return f+str+b;");s_omni.repl=new Function("x","o","n",""+"var i\x3dx.indexOf(o),l\x3dn.length;while(x\x26\x26i\x3e\x3d0){x\x3dx.substring(0,i)+n+x."+"substring(i+o.length);i\x3dx.indexOf(o,i+l)}return x");
var today=new Date;var currentDate=new Date(today.getFullYear(),2,1);var sundays=0;var currentDayNum=1;do{currentDayNum++;if(currentDate.getDay()==0)sundays++;if(sundays<2)currentDate=new Date(today.getFullYear(),2,currentDayNum)}while(sundays<2);s_omni.dstStart=(currentDate.getMonth().toString().length==1?"0"+currentDate.getMonth():currentDate.getMonth())+"/"+(currentDate.getDate().toString().length==1?"0"+currentDate.getDate():currentDate.getDate())+"/"+currentDate.getFullYear();currentDate=new Date(today.getFullYear(),
10,1);sundays=0;currentDayNum=1;do{currentDayNum++;if(currentDate.getDay()==0)sundays++;if(sundays<1)currentDate=new Date(today.getFullYear(),10,currentDayNum)}while(sundays<1);s_omni.dstEnd=(currentDate.getMonth().toString().length==1?"0"+currentDate.getMonth():currentDate.getMonth())+"/"+(currentDate.getDate().toString().length==1?"0"+currentDate.getDate():currentDate.getDate())+"/"+currentDate.getFullYear();s_omni.currentYear=today.getFullYear().toString();s_omni.getTimeParting=new Function("t",
"z",""+"var s\x3dthis,cy;dc\x3dnew Date('1/1/2000');"+"if(dc.getDay()!\x3d6||dc.getMonth()!\x3d0){return'Data Not Available'}"+"else{;z\x3dparseFloat(z);var dsts\x3dnew Date(s.dstStart);"+"var dste\x3dnew Date(s.dstEnd);fl\x3ddste;cd\x3dnew Date();if(cd\x3edsts\x26\x26cd\x3cfl)"+"{z\x3dz+1}else{z\x3dz};utc\x3dcd.getTime()+(cd.getTimezoneOffset()*60000);"+"tz\x3dnew Date(utc + (3600000*z));thisy\x3dtz.getFullYear();"+"var days\x3d['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday',"+"'Saturday'];if(thisy!\x3ds.currentYear){return'Data Not Available'}else{;"+
"thish\x3dtz.getHours();thismin\x3dtz.getMinutes();thisd\x3dtz.getDay();"+"var dow\x3ddays[thisd];var ap\x3d'AM';var dt\x3d'Weekday';var mint\x3d'00';"+"if(thismin\x3e30){mint\x3d'30'}if(thish\x3e\x3d12){ap\x3d'PM';thish\x3dthish-12};"+"if (thish\x3d\x3d0){thish\x3d12};if(thisd\x3d\x3d6||thisd\x3d\x3d0){dt\x3d'Weekend'};"+"var timestring\x3dthish+':'+mint+ap;if(t\x3d\x3d'h'){return timestring}"+"if(t\x3d\x3d'd'){return dow};if(t\x3d\x3d'w'){return dt}}};");function AppMeasurement_Module_Integrate(l){var c=
this;c.s=l;var e=window;e.s_c_in||(e.s_c_il=[],e.s_c_in=0);c._il=e.s_c_il;c._in=e.s_c_in;c._il[c._in]=c;e.s_c_in++;c._c="s_m";c.list=[];c.add=function(d,b){var a;b||(b="s_Integrate_"+d);e[b]||(e[b]={});a=c[d]=e[b];a.a=d;a.e=c;a._c=0;a._d=0;void 0==a.disable&&(a.disable=0);a.get=function(b,d){var f=document,h=f.getElementsByTagName("HEAD"),k;if(!a.disable&&(d||(v="s_"+c._in+"_Integrate_"+a.a+"_get_"+a._c),a._c++,a.VAR=v,a.CALLBACK="s_c_il["+c._in+"]."+a.a+".callback",a.delay(),h=h&&0<h.length?h[0]:
f.body))try{k=f.createElement("SCRIPT"),k.type="text/javascript",k.setAttribute("async","async"),k.src=c.c(a,b),0>b.indexOf("[CALLBACK]")&&(k.onload=k.onreadystatechange=function(){a.callback(e[v])}),h.firstChild?h.insertBefore(k,h.firstChild):h.appendChild(k)}catch(l){}};a.callback=function(b){var c;if(b)for(c in b)Object.prototype[c]||(a[c]=b[c]);a.ready()};a.beacon=function(b){var d="s_i_"+c._in+"_Integrate_"+a.a+"_"+a._c;a.disable||(a._c++,d=e[d]=new Image,d.src=c.c(a,b))};a.script=function(b){a.get(b,
1)};a.delay=function(){a._d++};a.ready=function(){a._d--;a.disable||l.delayReady()};c.list.push(d)};c._g=function(d){var b,a=(d?"use":"set")+"Vars";for(d=0;d<c.list.length;d++)if((b=c[c.list[d]])&&!b.disable&&b[a])try{b[a](l,b)}catch(e){}};c._t=function(){c._g(1)};c._d=function(){var d,b;for(d=0;d<c.list.length;d++)if((b=c[c.list[d]])&&!b.disable&&0<b._d)return 1;return 0};c.c=function(c,b){var a,e,g,f;"http"!=b.toLowerCase().substring(0,4)&&(b="http://"+b);l.ssl&&(b=l.replace(b,"http:","https:"));
c.RAND=Math.floor(1E13*Math.random());for(a=0;0<=a;)a=b.indexOf("[",a),0<=a&&(e=b.indexOf("]",a),e>a&&(g=b.substring(a+1,e),2<g.length&&"s."==g.substring(0,2)?(f=l[g.substring(2)])||(f=""):(f=""+c[g],f!=c[g]&&parseFloat(f)!=c[g]&&(g=0)),g&&(b=b.substring(0,a)+encodeURIComponent(f)+b.substring(e+1)),a=e));return b}}function AppMeasurement_Module_AudienceManagement(d){var a=this;a.s=d;var b=window;b.s_c_in||(b.s_c_il=[],b.s_c_in=0);a._il=b.s_c_il;a._in=b.s_c_in;a._il[a._in]=a;b.s_c_in++;a._c="s_m";
a.setup=function(c){b.DIL&&c&&(c.disableDefaultRequest=!0,c.disableCORS=!0,c.secureDataCollection=!1,a.instance=b.DIL.create(c),a.tools=b.DIL.tools)};a.isReady=function(){return a.instance?!0:!1};a.getEventCallConfigParams=function(){return a.instance&&a.instance.api&&a.instance.api.getEventCallConfigParams?a.instance.api.getEventCallConfigParams():{}};a.passData=function(b){a.instance&&a.instance.api&&a.instance.api.passData&&a.instance.api.passData(b)}}!function(){var r,o,a;"function"!=typeof window.DIL&&
(window.DIL=function(n){var c,e,I,r,u,h,t,o,s,i,a,d,y,l,f,g,p,m,b,v,D,O=[],C={};function S(e){return void 0===e||!0===e}n!==Object(n)&&(n={}),I=n.partner,r=n.containerNSID,u=n.mappings,h=n.uuidCookie,t=!0===n.enableErrorReporting,o=n.visitorService,s=n.declaredId,i=!0===n.delayAllUntilWindowLoad,a=S(n.secureDataCollection),d="boolean"==typeof n.isCoopSafe?n.isCoopSafe:null,y=S(n.enableHrefererParam),l=S(n.enableLogging),f=S(n.enableUrlDestinations),g=S(n.enableCookieDestinations),p=!0===n.disableDefaultRequest,
m=n.afterResultForDefaultRequest,b=n.visitorConstructor,v=!0===n.disableCORS,D=!0===n.ignoreHardDependencyOnVisitorAPI,t&&DIL.errorModule.activate(),D&&O.push("Warning: this instance is configured to ignore the hard dependency on the VisitorAPI service. This means that no URL destinations will be fired if the instance has no connection to VisitorAPI. If the VisitorAPI service is not instantiated, ID syncs will not be fired either.");var w=!0===window._dil_unit_tests;if((c=arguments[1])&&O.push(c+
""),!I||"string"!=typeof I){var _={name:"error",message:c="DIL partner is invalid or not specified in initConfig",filename:"dil.js"};return DIL.errorModule.handleError(_),new Error(c)}if(c="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0",!r&&"number"!=typeof r||(r=parseInt(r,10),!isNaN(r)&&0<=r&&(c="")),c&&(r=0,O.push(c),c=""),(e=DIL.getDil(I,r))instanceof DIL&&e.api.getPartner()===I&&e.api.getContainerNSID()===r)return e;if(!(this instanceof DIL))return new DIL(n,
"DIL was not instantiated with the 'new' operator, returning a valid instance with partner \x3d "+I+" and containerNSID \x3d "+r);DIL.registerDil(this,I,r);var R={doesConsoleLogExist:window.console===Object(window.console)&&"function"==typeof window.console.log,logMemo:{},log:function(e){O.push(e),l&&this.doesConsoleLogExist&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,arguments)},logOnce:function(e){this.logMemo[e]||(this.logMemo[e]=!0,R.log(e))}},E={IS_HTTPS:a||
"https:"===document.location.protocol,SIX_MONTHS_IN_MINUTES:259200,IE_VERSION:function(){if(document.documentMode)return document.documentMode;for(var e=7;4<e;e--){var t=document.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]\x3e\x3cspan\x3e\x3c/span\x3e\x3c![endif]--\x3e",t.getElementsByTagName("span").length)return t=null,e}return null}()};E.IS_IE_LESS_THAN_10="number"==typeof E.IE_VERSION&&E.IE_VERSION<10;var P={stuffed:{}},L={},A={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],
reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},firstRequestHasFired:!1,abortRequests:!1,num_of_cors_responses:0,num_of_cors_errors:0,corsErrorSources:[],num_of_img_responses:0,num_of_img_errors:0,platformParams:{d_nsid:r+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:3E4,calledBack:!1,mid:null,noVisitorAPI:null,VisitorAPI:null,instance:null,
releaseType:"no VisitorAPI",isOptedOut:!0,isOptedOutCallbackCalled:!1,admsProcessingStarted:!1,process:function(e){try{if(this.admsProcessingStarted)return;this.admsProcessingStarted=!0;var t,n,s,i=o;if("function"!=typeof e||"function"!=typeof e.getInstance)throw this.noVisitorAPI=!0,new Error("Visitor does not exist.");if(i!==Object(i)||!(t=i.namespace)||"string"!=typeof t)throw this.releaseType="no namespace",new Error("DIL.create() needs the initConfig property `visitorService`:{namespace:'\x3cExperience Cloud Org ID\x3e'}");
if((n=e.getInstance(t,{idSyncContainerID:r}))!==Object(n)||"function"!=typeof n.isAllowed||"function"!=typeof n.getMarketingCloudVisitorID||"function"!=typeof n.getCustomerIDs||"function"!=typeof n.isOptedOut||"function"!=typeof n.publishDestinations)throw this.releaseType="invalid instance",s="Invalid Visitor instance.",n===Object(n)&&"function"!=typeof n.publishDestinations&&(s+=" In particular, visitorInstance.publishDestinations is not a function. This is needed to fire URL destinations in DIL v8.0+ and should be present in Visitor v3.3.0+ ."),
new Error(s);if(this.VisitorAPI=e,!n.isAllowed())return this.releaseType="VisitorAPI is not allowed to write cookies",void this.releaseRequests();this.instance=n,this.waitForMidToReleaseRequests()}catch(e){if(!D)throw new Error("Error in processing Visitor API, which is a hard dependency for DIL v8.0+: "+e.message);this.releaseRequests()}},waitForMidToReleaseRequests:function(){var t=this;this.instance&&(this.instance.getMarketingCloudVisitorID(function(e){t.mid=e,t.releaseType="VisitorAPI",t.releaseRequests()},
!0),(!N.exists||!N.isIabContext&&N.isApproved()||N.isIabContext&&B.hasGoSignal())&&setTimeout(function(){"VisitorAPI"!==t.releaseType&&(t.releaseType="timeout",t.releaseRequests())},this.getLoadTimeout()))},releaseRequests:function(){this.calledBack=!0,A.registerRequest()},getMarketingCloudVisitorID:function(){return this.instance?this.instance.getMarketingCloudVisitorID():null},getMIDQueryString:function(){var e=k.isPopulatedString,t=this.getMarketingCloudVisitorID();return e(this.mid)&&this.mid===
t||(this.mid=t),e(this.mid)?"d_mid\x3d"+this.mid+"\x26":""},getCustomerIDs:function(){return this.instance?this.instance.getCustomerIDs():null},getCustomerIDsQueryString:function(e){if(e!==Object(e))return"";var t,n,s,i,r="",o=[],a=[];for(t in e)e.hasOwnProperty(t)&&(n=e[a[0]=t])===Object(n)&&(a[1]=n.id||"",a[2]=n.authState||0,o.push(a),a=[]);if(i=o.length)for(s=0;s<i;s++)r+="\x26d_cid_ic\x3d"+x.encodeAndBuildRequest(o[s],"%01");return r},getIsOptedOut:function(){this.instance?this.instance.isOptedOut([this,
this.isOptedOutCallback],this.VisitorAPI.OptOut.GLOBAL,!0):(this.isOptedOut=!1,this.isOptedOutCallbackCalled=!0)},isOptedOutCallback:function(e){this.isOptedOut=e,this.isOptedOutCallbackCalled=!0,A.registerRequest(),N.isIabContext()&&B.checkQueryStringObject()},getLoadTimeout:function(){var e=this.instance;if(e){if("function"==typeof e.getLoadTimeout)return e.getLoadTimeout();if(void 0!==e.loadTimeout)return e.loadTimeout}return this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE}},declaredId:{declaredId:{init:null,
request:null},declaredIdCombos:{},setDeclaredId:function(e,t){var n=k.isPopulatedString,s=encodeURIComponent;if(e===Object(e)&&n(t)){var i=e.dpid,r=e.dpuuid,o=null;if(n(i)&&n(r))return o=s(i)+"$"+s(r),!0===this.declaredIdCombos[o]?"setDeclaredId: combo exists for type '"+t+"'":(this.declaredIdCombos[o]=!0,this.declaredId[t]={dpid:i,dpuuid:r},"setDeclaredId: succeeded for type '"+t+"'")}return"setDeclaredId: failed for type '"+t+"'"},getDeclaredIdQueryString:function(){var e=this.declaredId.request,
t=this.declaredId.init,n=encodeURIComponent,s="";return null!==e?s="\x26d_dpid\x3d"+n(e.dpid)+"\x26d_dpuuid\x3d"+n(e.dpuuid):null!==t&&(s="\x26d_dpid\x3d"+n(t.dpid)+"\x26d_dpuuid\x3d"+n(t.dpuuid)),s}},registerRequest:function(e){var t,n=this.firingQueue;e===Object(e)&&(n.push(e),e.isDefaultRequest||(p=!0)),this.firing||!n.length||i&&!DIL.windowLoaded||(this.adms.isOptedOutCallbackCalled||this.adms.getIsOptedOut(),this.adms.calledBack&&!this.adms.isOptedOut&&this.adms.isOptedOutCallbackCalled&&(N.isApproved()||
B.hasGoSignal())&&(this.adms.isOptedOutCallbackCalled=!1,(t=n.shift()).src=t.src.replace(/&d_nsid=/,"\x26"+this.adms.getMIDQueryString()+B.getQueryString()+"d_nsid\x3d"),k.isPopulatedString(t.corsPostData)&&(t.corsPostData=t.corsPostData.replace(/^d_nsid=/,this.adms.getMIDQueryString()+B.getQueryString()+"d_nsid\x3d")),V.fireRequest(t),this.firstRequestHasFired||"script"!==t.tag&&"cors"!==t.tag||(this.firstRequestHasFired=!0)))},processVisitorAPI:function(){this.adms.process(b||window.Visitor)},getCoopQueryString:function(){var e=
"";return!0===d?e="\x26d_coop_safe\x3d1":!1===d&&(e="\x26d_coop_unsafe\x3d1"),e}};C.requestController=A;var q,j,T={sendingMessages:!1,messages:[],messagesPosted:[],destinations:[],destinationsPosted:[],jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],publishDestinationsVersion:null,requestToProcess:function(e,t){var n,s=this;function i(){s.jsonForComparison.push(e),s.jsonWaiting.push([e,t])}if(e&&!k.isEmptyObject(e))if(n=JSON.stringify(e.dests||[]),this.jsonForComparison.length){var r,
o,a,d=!1;for(r=0,o=this.jsonForComparison.length;r<o;r++)if(a=this.jsonForComparison[r],n===JSON.stringify(a.dests||[])){d=!0;break}d?this.jsonDuplicates.push(e):i()}else i();if(this.jsonWaiting.length){var u=this.jsonWaiting.shift();this.process(u[0],u[1]),this.requestToProcess()}this.messages.length&&!this.sendingMessages&&this.sendMessages()},process:function(e){if(f){var t,n,s,i,r,o,a=encodeURIComponent,d=this.getPublishDestinationsVersion(),u=!1;if(-1!==d){if((t=e.dests)&&t instanceof Array&&
(n=t.length)){for(s=0;s<n;s++)i=t[s],o=[a("dests"),a(i.id||""),a(i.y||""),a(i.c||"")].join("|"),this.addMessage(o),r={url:i.c,hideReferrer:void 0===i.hr||!!i.hr,message:o},this.addDestination(r),void 0!==i.hr&&(u=!0);1===d&&u&&R.logOnce("Warning: visitorInstance.publishDestinations version is old (Visitor v3.3.0 to v4.0.0). URL destinations will not have the option of being fired on page, only in the iframe.")}this.jsonProcessed.push(e)}}},addMessage:function(e){this.messages.push(e)},addDestination:function(e){this.destinations.push(e)},
sendMessages:function(){this.sendingMessages||(this.sendingMessages=!0,f&&this.messages.length&&this.publishDestinations())},publishDestinations:function(){function e(e){R.log("visitor.publishDestinations() result: "+(e.error||e.message)),n.sendingMessages=!1,n.requestToProcess()}function t(){n.messages=[],n.destinations=[]}var n=this,s=A.adms.instance,i=[],r=[];return 1===this.publishDestinationsVersion?(x.extendArray(i,this.messages),x.extendArray(this.messagesPosted,this.messages),t(),s.publishDestinations(I,
i,e),"Called visitor.publishDestinations() version 1"):1<this.publishDestinationsVersion?(x.extendArray(r,this.destinations),x.extendArray(this.destinationsPosted,this.destinations),t(),s.publishDestinations({subdomain:I,callback:e,urlDestinations:r}),"Called visitor.publishDestinations() version \x3e 1"):void 0},getPublishDestinationsVersion:function(){if(null!==this.publishDestinationsVersion)return this.publishDestinationsVersion;var e=A.adms.instance,n=-1;return e.publishDestinations(null,null,
function(e){if(e===Object(e)){var t=e.error;"subdomain is not a populated string."===t?n=1:"Invalid parameters passed."===t&&(n=2)}}),this.publishDestinationsVersion=n}},M={traits:function(e){return k.isValidPdata(e)&&(L.sids instanceof Array||(L.sids=[]),x.extendArray(L.sids,e)),this},pixels:function(e){return k.isValidPdata(e)&&(L.pdata instanceof Array||(L.pdata=[]),x.extendArray(L.pdata,e)),this},logs:function(e){return k.isValidLogdata(e)&&(L.logdata!==Object(L.logdata)&&(L.logdata={}),x.extendObject(L.logdata,
e)),this},customQueryParams:function(e){return k.isEmptyObject(e)||x.extendObject(L,e,A.reservedKeys),this},signals:function(e,t){var n,s=e;if(!k.isEmptyObject(s)){if(t&&"string"==typeof t)for(n in s={},e)e.hasOwnProperty(n)&&(s[t+n]=e[n]);x.extendObject(L,s,A.reservedKeys)}return this},declaredId:function(e){return A.declaredId.setDeclaredId(e,"request"),this},result:function(e){return"function"==typeof e&&(L.callback=e),this},afterResult:function(e){return"function"==typeof e&&(L.postCallbackFn=
e),this},useImageRequest:function(){return L.useImageRequest=!0,this},clearData:function(){return L={},this},submit:function(e){return L.isDefaultRequest=!!e,V.submitRequest(L),L={},this},getPartner:function(){return I},getContainerNSID:function(){return r},getEventLog:function(){return O},getState:function(){var e={},t={};return x.extendObject(e,A,{registerRequest:!0}),x.extendObject(t,T,{requestToProcess:!0,process:!0,sendMessages:!0}),{initConfig:n,pendingRequest:L,otherRequestInfo:e,destinationPublishingInfo:t,
log:O}},idSync:function(){throw new Error("Please use the `idSyncByURL` method of the Experience Cloud ID Service (Visitor) instance");},aamIdSync:function(){throw new Error("Please use the `idSyncByDataSource` method of the Experience Cloud ID Service (Visitor) instance");},passData:function(e){return k.isEmptyObject(e)?"Error: json is empty or not an object":(V.defaultCallback(e),e)},getPlatformParams:function(){return A.platformParams},getEventCallConfigParams:function(){var e,t=A,n=t.modStatsParams,
s=t.platformParams;if(!n){for(e in n={},s)s.hasOwnProperty(e)&&!t.nonModStatsParams[e]&&(n[e.replace(/^d_/,"")]=s[e]);!0===d?n.coop_safe=1:!1===d&&(n.coop_unsafe=1),t.modStatsParams=n}return n},setAsCoopSafe:function(){return d=!0,this},setAsCoopUnsafe:function(){return d=!1,this},getEventCallIabSignals:function(e){var t;return e!==Object(e)?"Error: config is not an object":"function"!=typeof e.callback?"Error: config.callback is not a function":(t=parseInt(e.timeout,10),isNaN(t)&&(t=null),void B.getQueryStringObject(e.callback,
t))}},V={corsMetadata:(q="none","undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&"withCredentials"in new XMLHttpRequest&&(q="XMLHttpRequest"),{corsType:q}),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new window[this.corsMetadata.corsType]},submitRequest:function(e){return A.registerRequest(V.createQueuedRequest(e)),!0},createQueuedRequest:function(e){var t,n,s,i,r,o=e.callback,a="img",d=e.isDefaultRequest;if(delete e.isDefaultRequest,!k.isEmptyObject(u))for(s in u)if(u.hasOwnProperty(s)){if(null==
(i=u[s])||""===i)continue;if(s in e&&!(i in e)&&!(i in A.reservedKeys)){if(null==(r=e[s])||""===r)continue;e[i]=r}}return k.isValidPdata(e.sids)||(e.sids=[]),k.isValidPdata(e.pdata)||(e.pdata=[]),k.isValidLogdata(e.logdata)||(e.logdata={}),e.logdataArray=x.convertObjectToKeyValuePairs(e.logdata,"\x3d",!0),e.logdataArray.push("_ts\x3d"+(new Date).getTime()),"function"!=typeof o&&(o=this.defaultCallback),t=this.makeRequestSrcData(e),(n=this.getCORSInstance())&&!0!==e.useImageRequest&&(a="cors"),{tag:a,
src:t.src,corsSrc:t.corsSrc,callbackFn:o,postCallbackFn:e.postCallbackFn,useImageRequest:!!e.useImageRequest,requestData:e,corsInstance:n,corsPostData:t.corsPostData,isDefaultRequest:d}},defaultCallback:function(e,t){var n,s,i,r,o,a,d,u,c;if(g&&(n=e.stuff)&&n instanceof Array&&(s=n.length))for(i=0;i<s;i++)(r=n[i])&&r===Object(r)&&(o=r.cn,a=r.cv,void 0!==(d=r.ttl)&&""!==d||(d=Math.floor(x.getMaxCookieExpiresInMinutes()/60/24)),u=r.dmn||"."+document.domain.replace(/^www\./,""),c=r.type,o&&(a||"number"==
typeof a)&&("var"!==c&&(d=parseInt(d,10))&&!isNaN(d)&&x.setCookie(o,a,24*d*60,"/",u,!1),P.stuffed[o]=a));var l,f,p=e.uuid;k.isPopulatedString(p)&&(k.isEmptyObject(h)||("string"==typeof(l=h.path)&&l.length||(l="/"),f=parseInt(h.days,10),isNaN(f)&&(f=100),x.setCookie(h.name||"aam_did",p,24*f*60,l,h.domain||"."+document.domain.replace(/^www\./,""),!0===h.secure))),A.abortRequests||T.requestToProcess(e,t)},makeRequestSrcData:function(r){r.sids=k.removeEmptyArrayValues(r.sids||[]),r.pdata=k.removeEmptyArrayValues(r.pdata||
[]);var o=A,e=o.platformParams,t=x.encodeAndBuildRequest(r.sids,","),n=x.encodeAndBuildRequest(r.pdata,","),s=(r.logdataArray||[]).join("\x26");delete r.logdataArray;var i,a,d=encodeURIComponent,u=E.IS_HTTPS?"https://":"http://",c=o.declaredId.getDeclaredIdQueryString(),l=o.adms.instance?o.adms.getCustomerIDsQueryString(o.adms.getCustomerIDs()):"",f=function(){var e,t,n,s,i=[];for(e in r)if(!(e in o.reservedKeys)&&r.hasOwnProperty(e))if(t=r[e],e=d(e),t instanceof Array)for(n=0,s=t.length;n<s;n++)i.push(e+
"\x3d"+d(t[n]));else i.push(e+"\x3d"+d(t));return i.length?"\x26"+i.join("\x26"):""}(),p="d_dil_ver\x3d"+d(DIL.version),h="d_nsid\x3d"+e.d_nsid+o.getCoopQueryString()+c+l+(t.length?"\x26d_sid\x3d"+t:"")+(n.length?"\x26d_px\x3d"+n:"")+(s.length?"\x26d_ld\x3d"+d(s):""),g="\x26d_rtbd\x3d"+e.d_rtbd+"\x26d_jsonv\x3d"+e.d_jsonv+"\x26d_dst\x3d"+e.d_dst,m=y?"\x26h_referer\x3d"+d(location.href):"";return a=(i=u+I+".demdex.net/event")+"?"+p+"\x26"+h+g+f+m,{corsSrc:i+"?"+p+"\x26_ts\x3d"+(new Date).getTime(),
src:a,corsPostData:h+g+f+m,isDeclaredIdCall:""!==c}},fireRequest:function(e){if("img"===e.tag)this.fireImage(e);else{var t=A.declaredId,n=t.declaredId.request||t.declaredId.init||{},s={dpid:n.dpid||"",dpuuid:n.dpuuid||""};this.fireCORS(e,s)}},fireImage:function(t){var e,n,s=A;s.abortRequests||(s.firing=!0,e=new Image(0,0),s.sent.push(t),e.onload=function(){s.firing=!1,s.fired.push(t),s.num_of_img_responses++,s.registerRequest()},n=function(e){c="imgAbortOrErrorHandler received the event of type "+
e.type,R.log(c),s.abortRequests=!0,s.firing=!1,s.errored.push(t),s.num_of_img_errors++,s.registerRequest()},e.addEventListener("error",n),e.addEventListener("abort",n),e.src=t.src)},fireCORS:function(s,i){var r=this,o=A,e=this.corsMetadata.corsType,t=s.corsSrc,n=s.corsInstance,a=s.corsPostData,d=s.postCallbackFn,u="function"==typeof d;if(!o.abortRequests&&!v){o.firing=!0;try{n.open("post",t,!0),"XMLHttpRequest"===e&&(n.withCredentials=!0,n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),
n.onreadystatechange=function(){4===this.readyState&&200===this.status&&function(e){var t;try{if((t=JSON.parse(e))!==Object(t))return r.handleCORSError(s,i,"Response is not JSON")}catch(e){return r.handleCORSError(s,i,"Error parsing response as JSON")}try{var n=s.callbackFn;o.firing=!1,o.fired.push(s),o.num_of_cors_responses++,n(t,i),u&&d(t,i)}catch(e){e.message="DIL handleCORSResponse caught error with message "+e.message,c=e.message,R.log(c),e.filename=e.filename||"dil.js",e.partner=I,DIL.errorModule.handleError(e);
try{n({error:e.name+"|"+e.message},i),u&&d({error:e.name+"|"+e.message},i)}catch(e){}}finally{o.registerRequest()}}(this.responseText)}),n.onerror=function(){r.handleCORSError(s,i,"onerror")},n.ontimeout=function(){r.handleCORSError(s,i,"ontimeout")},n.send(a)}catch(e){this.handleCORSError(s,i,"try-catch")}o.sent.push(s),o.declaredId.declaredId.request=null}},handleCORSError:function(e,t,n){A.num_of_cors_errors++,A.corsErrorSources.push(n)}},k={isValidPdata:function(e){return!!(e instanceof Array&&
this.removeEmptyArrayValues(e).length)},isValidLogdata:function(e){return!this.isEmptyObject(e)},isEmptyObject:function(e){if(e!==Object(e))return!0;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},removeEmptyArrayValues:function(e){var t,n=0,s=e.length,i=[];for(n=0;n<s;n++)null!=(t=e[n])&&""!==t&&i.push(t);return i},isPopulatedString:function(e){return"string"==typeof e&&e.length}},x={convertObjectToKeyValuePairs:function(e,t,n){var s,i,r=[];for(s in t=t||"\x3d",e)e.hasOwnProperty(s)&&
null!=(i=e[s])&&""!==i&&r.push(s+t+(n?encodeURIComponent(i):i));return r},encodeAndBuildRequest:function(e,t){return e.map(function(e){return encodeURIComponent(e)}).join(t)},getCookie:function(e){var t,n,s,i=e+"\x3d",r=document.cookie.split(";");for(t=0,n=r.length;t<n;t++){for(s=r[t];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(i))return decodeURIComponent(s.substring(i.length,s.length))}return null},setCookie:function(e,t,n,s,i,r){var o=new Date;n=n&&1E3*n*60,document.cookie=e+
"\x3d"+encodeURIComponent(t)+(n?";expires\x3d"+(new Date(o.getTime()+n)).toUTCString():"")+(s?";path\x3d"+s:"")+(i?";domain\x3d"+i:"")+(r?";secure":"")},extendArray:function(e,t){return e instanceof Array&&t instanceof Array&&(Array.prototype.push.apply(e,t),!0)},extendObject:function(e,t,n){var s;if(e!==Object(e)||t!==Object(t))return!1;for(s in t)if(t.hasOwnProperty(s)){if(!k.isEmptyObject(n)&&s in n)continue;e[s]=t[s]}return!0},getMaxCookieExpiresInMinutes:function(){return E.SIX_MONTHS_IN_MINUTES},
replaceMethodsWithFunction:function(e,t){var n;if(e===Object(e)&&"function"==typeof t)for(n in e)e.hasOwnProperty(n)&&"function"==typeof e[n]&&(e[n]=t)}},N=(j=C.requestController,{exists:null,instance:null,aamIsApproved:null,init:function(){var e=this;this.checkIfExists()?(this.exists=!0,this.instance=window.adobe.optIn,this.instance.fetchPermissions(function(){e.callback()},!0)):this.exists=!1},checkIfExists:function(){return window.adobe===Object(window.adobe)&&window.adobe.optIn===Object(window.adobe.optIn)},
callback:function(){this.aamIsApproved=this.instance.isApproved([this.instance.Categories.AAM]),j.adms.waitForMidToReleaseRequests(),j.adms.getIsOptedOut()},isApproved:function(){return!this.isIabContext()&&!j.adms.isOptedOut&&(!this.exists||this.aamIsApproved)},isIabContext:function(){return this.instance&&this.instance.isIabContext}});C.optIn=N;var F,Q,H,U,B=(Q=(F=C).requestController,H=F.optIn,U={isVendorConsented:null,doesGdprApply:null,consentString:null,queryStringObjectCallbacks:[],init:function(){this.fetchConsentData()},
hasGoSignal:function(){return!(!(H.isIabContext()&&this.isVendorConsented&&this.doesGdprApply&&"string"==typeof this.consentString&&this.consentString.length)||Q.adms.isOptedOut)},fetchConsentData:function(n,e){var s=this,t={};"function"!=typeof n&&(n=function(){}),H.instance&&H.isIabContext()?(e&&(t.timeout=e),H.instance.execute({command:"iabPlugin.fetchConsentData",params:t,callback:function(e,t){t===Object(t)?(s.doesGdprApply=!!t.gdprApplies,s.consentString=t.consentString||""):(s.doesGdprApply=
!1,s.consentString=""),s.isVendorConsented=H.instance.isApproved(H.instance.Categories.AAM),e?n({}):s.checkQueryStringObject(n),Q.adms.waitForMidToReleaseRequests()}})):n({})},getQueryString:function(){return H.isIabContext()?"gdpr\x3d"+(this.doesGdprApply?1:0)+"\x26gdpr_consent\x3d"+this.consentString+"\x26":""},getQueryStringObject:function(e,t){this.fetchConsentData(e,t)},checkQueryStringObject:function(e){U.hasGoSignal()&&"function"==typeof e&&e({gdpr:this.doesGdprApply?1:0,gdpr_consent:this.consentString})}});
C.iab=B,"error"===I&&0===r&&window.addEventListener("load",function(){DIL.windowLoaded=!0});function G(){W||(W=!0,A.registerRequest(),X())}var W=!1,X=function(){setTimeout(function(){p||A.firstRequestHasFired||("function"==typeof m?M.afterResult(m).submit(!0):M.submit(!0))},DIL.constants.TIME_TO_DEFAULT_REQUEST)},K=document;"error"!==I&&(DIL.windowLoaded?G():"complete"!==K.readyState&&"loaded"!==K.readyState?window.addEventListener("load",function(){DIL.windowLoaded=!0,G()}):(DIL.windowLoaded=!0,
G())),A.declaredId.setDeclaredId(s,"init"),N.init(),B.init(),A.processVisitorAPI();E.IS_IE_LESS_THAN_10&&x.replaceMethodsWithFunction(M,function(){return this}),this.api=M,this.getStuffedVariable=function(e){var t=P.stuffed[e];return t||"number"==typeof t||(t=x.getCookie(e))||"number"==typeof t||(t=""),t},this.validators=k,this.helpers=x,this.constants=E,this.log=O,this.pendingRequest=L,this.requestController=A,this.destinationPublishing=T,this.requestProcs=V,this.units=C,this.initConfig=n,this.logger=
R,w&&(this.variables=P,this.callWindowLoadFunctions=G)},DIL.extendStaticPropertiesAndMethods=function(e){var t;if(e===Object(e))for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},DIL.extendStaticPropertiesAndMethods({version:"9.4",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:500},variables:{scriptNodeList:document.getElementsByTagName("script")},windowLoaded:!1,dils:{},isAddedPostWindowLoad:function(){var e=arguments[0];this.windowLoaded="function"==typeof e?!!e():"boolean"!=typeof e||e},create:function(e){try{return new DIL(e)}catch(e){throw new Error("Error in attempt to create DIL instance with DIL.create(): "+
e.message);}},registerDil:function(e,t,n){var s=t+"$"+n;s in this.dils||(this.dils[s]=e)},getDil:function(e,t){var n;return"string"!=typeof e&&(e=""),(n=e+"$"+(t=t||0))in this.dils?this.dils[n]:new Error("The DIL instance with partner \x3d "+e+" and containerNSID \x3d "+t+" was not found")},dexGetQSVars:function(e,t,n){var s=this.getDil(t,n);return s instanceof this?s.getStuffedVariable(e):""}}),DIL.errorModule=(r=DIL.create({partner:"error",containerNSID:0,ignoreHardDependencyOnVisitorAPI:!0}),a=
!(o={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020}),{activate:function(){a=!0},handleError:function(e){if(!a)return"DIL error module has not been activated";e!==Object(e)&&(e={});var t=e.name?(e.name+"").toLowerCase():"",n=t in o?o[t]:o.noerrortypedefined,s=[],i={name:t,filename:e.filename?e.filename+"":"",partner:e.partner?e.partner+"":"no_partner",
site:e.site?e.site+"":document.location.href,message:e.message?e.message+"":""};return s.push(n),r.api.pixels(s).logs(i).useImageRequest().submit(),"DIL error report sent"},pixelMap:o}),DIL.tools={},DIL.modules={helpers:{}})}();function AppMeasurement_Module_ActivityMap(h){function q(){var a=f.pageYOffset+(f.innerHeight||0);a&&a>+g&&(g=a)}function r(){if(e.scrollReachSelector){var a=h.d.querySelector&&h.d.querySelector(e.scrollReachSelector);a?(g=a.scrollTop||0,a.addEventListener("scroll",function(){var d;
(d=a&&a.scrollTop+a.clientHeight||0)>g&&(g=d)})):0<w--&&setTimeout(r,1E3)}}function l(a,d){var c,b,n;if(a&&d&&(c=e.c[d]||(e.c[d]=d.split(","))))for(n=0;n<c.length&&(b=c[n++]);)if(-1<a.indexOf(b))return null;p=1;return a}function s(a,d,c,b,e){var f,k;if(a.dataset&&(k=a.dataset[d]))f=k;else if(a.getAttribute)if(k=a.getAttribute("data-"+c))f=k;else if(k=a.getAttribute(c))f=k;if(!f&&h.useForcedLinkTracking&&e){var g;a=a.onclick?""+a.onclick:"";varValue="";if(b&&a&&(d=a.indexOf(b),0<=d)){for(d+=b.length;d<
a.length;)if(c=a.charAt(d++),0<="'\"".indexOf(c)){g=c;break}for(k=!1;d<a.length&&g;){c=a.charAt(d);if(!k&&c===g)break;"\\"===c?k=!0:(varValue+=c,k=!1);d++}}(g=varValue)&&(h.w[b]=g)}return f||e&&h.w[b]}function t(a,d,c){var b;return(b=e[d](a,c))&&(p?(p=0,b):l(m(b),e[d+"Exclusions"]))}function u(a,d,c){var b;if(a&&!(1===(b=a.nodeType)&&(b=a.nodeName)&&(b=b.toUpperCase())&&x[b])&&(1===a.nodeType&&(b=a.nodeValue)&&(d[d.length]=b),c.a||c.t||c.s||!a.getAttribute||((b=a.getAttribute("alt"))?c.a=b:(b=a.getAttribute("title"))?
c.t=b:"IMG"==(""+a.nodeName).toUpperCase()&&(b=a.getAttribute("src")||a.src)&&(c.s=b)),(b=a.childNodes)&&b.length))for(a=0;a<b.length;a++)u(b[a],d,c)}function m(a){if(null==a||void 0==a)return a;try{return a.replace(RegExp("^[\\s\\n\\f\\r\\t\t-\r \u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u205f\u3000\ufeff]+","mg"),"").replace(RegExp("[\\s\\n\\f\\r\\t\t-\r \u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u205f\u3000\ufeff]+$","mg"),"").replace(RegExp("[\\s\\n\\f\\r\\t\t-\r \u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u205f\u3000\ufeff]{1,}",
"mg")," ").substring(0,254)}catch(d){}}var e=this;e.s=h;var f=window;f.s_c_in||(f.s_c_il=[],f.s_c_in=0);e._il=f.s_c_il;e._in=f.s_c_in;e._il[e._in]=e;f.s_c_in++;e._c="s_m";var g=0,v,w=60;e.c={};var p=0,x={SCRIPT:1,STYLE:1,LINK:1,CANVAS:1};e._g=function(){var a,d,c,b=h.contextData,e=h.linkObject;(a=h.pageName||h.pageURL)&&(d=t(e,"link",h.linkName))&&(c=t(e,"region"))&&(b["a.activitymap.page"]=a.substring(0,255),b["a.activitymap.link"]=128<d.length?d.substring(0,128):d,b["a.activitymap.region"]=127<
c.length?c.substring(0,127):c,0<g&&(b["a.activitymap.xy"]=10*Math.floor(g/10)),b["a.activitymap.pageIDType"]=h.pageName?1:0)};e._d=function(){e.trackScrollReach&&!v&&(e.scrollReachSelector?r():(q(),f.addEventListener&&f.addEventListener("scroll",q,!1)),v=!0)};e.link=function(a,d){var c;if(d)c=l(m(d),e.linkExclusions);else if((c=a)&&!(c=s(a,"sObjectId","s-object-id","s_objectID",1))){var b,f;(f=l(m(a.innerText||a.textContent),e.linkExclusions))||(u(a,b=[],c={a:void 0,t:void 0,s:void 0}),(f=l(m(b.join(""))))||
(f=l(m(c.a?c.a:c.t?c.t:c.s?c.s:void 0)))||!(b=(b=a.tagName)&&b.toUpperCase?b.toUpperCase():"")||("INPUT"==b||"SUBMIT"==b&&a.value?f=l(m(a.value)):"IMAGE"==b&&a.src&&(f=l(m(a.src)))));c=f}return c};e.region=function(a){for(var d,c=e.regionIDAttribute||"id";a&&(a=a.parentNode);){if(d=s(a,c,c,c))return d;if("BODY"==a.nodeName)return"BODY"}}}}]);Bootstrapper.AF.push(["call","SiteCatalyst","block","s_omni"]);Bootstrapper.AF.push(["push","SiteCatalyst","ns","s_omni"]);Bootstrapper.AF.push(["set","SiteCatalyst",
"clearData",function(){if(this.ns)for(var i=0;i<this.ns.length;i++){var sObj=this.ns[i];Bootstrapper.AF.push(["set",sObj,"clearData",function(){this.pre=[]}])}}]);Bootstrapper.AF.push(["call","SiteCatalyst","clearData"]);Bootstrapper.AF.push(["set","SiteCatalyst","clearVars",function(){if(this.ns)for(var i=0;i<this.ns.length;i++){var sObj=this.ns[i];Bootstrapper.AF.push(["set",sObj,"clearVars",function(){this.pre=this.pre||[];for(var i=0;i<this.pre.length;i++){var adobeVar=this.pre[i][0];if(/^(channel|events|eventList|products|productList|purchaseID|transactionID|state|zip|campaign)$/.test(adobeVar)||
/^(prop|eVar|hier|list)$/.test(adobeVar.substring(0,4))){this.pre.splice(this.pre.indexOf(i,1));i--}}}])}}]);Bootstrapper.AF.push(["call","SiteCatalyst","clearVars"]);var _dl=window.__dataLayer||{},config=_dl.adobeConfig||{},amConfig=config.activitymap||{},overrideLinkNameAM=amConfig.overrideLinkName===true;if(overrideLinkNameAM){var originalLinkFunction=s_omni.ActivityMap.link;var findEventName=function(el){if(!el)return null;var attrib="data-track-event_name",val=el.getAttribute?el.getAttribute(attrib):
null;return val||null};s_omni.ActivityMap.link=function(element,linkName){return linkName||findEventName(element)||originalLinkFunction(element,linkName)}}var firstCall=1;s_omni.registerPostTrackCallback(function(requestUrl){if(!firstCall||!requestUrl)return;firstCall=0;if(!_dl.adbPV)if(requestUrl.indexOf("\x26pe\x3d")===-1){_dl.adbPV=1;Bootstrapper.register("appmeasurement")}})})},3749084,[3773761],700342,[700339],-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.hbConfig={};Bootstrapper.hbConfig.trackingServer="disneyinternational.hb-api.omtrdc.net";Bootstrapper.hbConfig.playerName="Unified_TMS";Bootstrapper.hbConfig.channel="Disney";Bootstrapper.hbConfig.appVersion="";Bootstrapper.hbConfig.debugLogging=false;Bootstrapper.hbConfig.ssl=true;var lastVideoId,bingeCount={};Bootstrapper.hbConfig.computeContextData=function(){var contextData=
{},_dl=__dataLayer,page=_dl.page||{},visitor=_dl.visitor||{},pzn=_dl.pzn||{},site=_dl.site||{},isLive=_dl.media.format==="live",playerId=_dl.media.player_id,currentBingeCount=0;if(lastVideoId!==_dl.media.media_id){if(!bingeCount[playerId])bingeCount[playerId]=0;bingeCount[playerId]+=1;lastVideoId=_dl.media.media_id}currentBingeCount=bingeCount[playerId]||1;if(isLive)currentBingeCount=1;contextData[ADB.Media.VideoMetadataKeys.AssetId]=_dl.media.media_id;contextData[ADB.Media.VideoMetadataKeys.ShowType]=
_dl.media.show_type;contextData[ADB.Media.VideoMetadataKeys.StreamFormat]=_dl.media.format;contextData[ADB.Media.VideoMetadataKeys.MVPD]=visitor.mvpd||"";contextData["media.start_type"]=_dl.media.start_type;contextData["media.video_binge_play_count"]=currentBingeCount;contextData["media.is_mute"]=_dl.media.is_mute;contextData["media.orientation"]=_dl.media.orientation;contextData["media.m3u8"]=_dl.media.m3u8;contextData["media.keywords"]=_dl.media.keywords;contextData["media.full_episode"]=_dl.media.full_episode;
contextData["media.description"]=_dl.media.description;contextData["media.content_language"]=_dl.media.content_language;contextData["media.tms_id"]=__dataLayer.media.tms_id;contextData["page_url"]=page.page_url||window.location.href;contextData["page_name"]=page.page_name||"";contextData["cds"]=site.cds||"";contextData["business_unit_code"]=site.business_unit_code||"";contextData["language"]=site.language||"";contextData["property_code"]=site.property_code||"";contextData["property_code_id"]=site.property_code_id||
"";contextData["site"]=site.site||"";contextData["country"]=site.country||"";contextData["virtual_report_suite"]=site.virtual_report_suite||"";contextData["app_version"]=site.app_version||"";contextData["region"]=site.region||"";contextData["ab_test"]=pzn.ab_test||"";contextData["auto_start"]=pzn.auto_start||"";contextData["login_status"]=pzn.login_status||"";if(Bootstrapper.piNull){__dataLayer.visitor.swid="noconsent";__dataLayer.visitor.unid="noconsent";contextData["swid"]="noconsent";contextData["unid"]=
"noconsent"}else{contextData["swid"]=visitor.swid||"";contextData["unid"]=visitor.unid||""}contextData["ad_blocker"]=visitor.ad_blocker||"";contextData["content_square_id"]=visitor.content_square_id||"";contextData["dssid"]=visitor.dssid||"";contextData["ecrid"]=visitor.ecrid||"";contextData["hubid"]=visitor.hubid||"";contextData["login_status"]=visitor.login_status||"";contextData["mvpd"]=visitor.mvpd||"";Bootstrapper.hbConfig.contextData=contextData}},3772891,704236,24);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var params=Bootstrapper.getExtraParams(),cds=params.cds&&params.cds==="y"||0,_dl=window.__dataLayer||{},site=_dl.site||{},region=site.region||"",gw=window.gateway||null,ls=window.localStorage||null,priv=_dl.privacy||{},extraParams=Bootstrapper.getExtraParams(),conRegion=extraParams.region||"na";if(!!gw&&ls){var env=gw.environment||null;if(!!env){var list=env.whitelist||
{},allowList=list.default||[],dfltTag={"tag":"usechimney\\.com|chimney\\.azureedge\\.net|cognito-identity\\.eu-west-3\\.amazonaws\\.com|chimneystorage.+\\.com","displayName":"Chimney"};var tag=allowList.filter(function(tag){return tag.displayName==="Chimney"}),finalTag=tag.length?tag[0]:dfltTag;if(region==="emea")gw.allowTag(finalTag);else gw.blockTag(finalTag);if(!!cds)if(!!env.name&&env.name==="Matterhorn CDS")if(conRegion==="gdpr"){var gamTag={"tag":"(ade|pagead2|tpc|safeframe).googlesyndication|(fonts|imasdk).googleapis|(play|mts0|www).google\\.|googleadservices|googletagmanager|googletagservices|(ad|ff|secureframe|((bid|cm|googleads(\\d)?|securepubads|adclick|pubads|stats).g)|s0|static|fls).doubleclick.net|googleapis|gstatic|(s0|gcdn).2mdn.net|google.(com|fr|pl|ie)",
"displayName":"Google Ads Manager"},groups=OnetrustActiveGroups||priv.consent||"";allowList.forEach(function(tag){if(tag.displayName&&tag.displayName==="Google Ads Manager")gamTag=tag});if(groups.indexOf("C0004")>-1)gw.allowTag(gamTag);else gw.blockTag(gamTag)}}}},3773722,715132,24);
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.adobeLinkTrack=function(eventData){Bootstrapper.queue(["appmeasurement"],function(){if(eventData){if(!!window.s_omni){var _dl=window.__dataLayer||{},config=_dl.adobeConfig,extraVars=config.extra_link_track_vars||[],key="",elem=eventData.srcElement||null,trackElem=elem||this,ignoreContextData=["srcElement","custom"];s_omni.clearVars();s_omni.linkTrackVars=
"";for(key in eventData){if(ignoreContextData.indexOf(key)>-1)continue;s_omni.linkTrackVars+="contextData."+key+",";s_omni.contextData[key]=eventData[key]}for(var i=0,n=extraVars.length;i<n;i++){key=extraVars[i];s_omni.linkTrackVars+="contextData."+key+","}if(_dl.adobeConfig&&_dl.adobeConfig.timestamp){s_omni.linkTrackVars+="contextData.client_time,";s_omni.contextData["client_time"]=(new Date).getTime()}s_omni.linkTrackVars=s_omni.linkTrackVars.replace(/,$/,"");s_omni.useBeacon=true;if(eventData.event_name===
"exit link"){var lnkName=eventData.link_name||"";s_omni.tl(trackElem,"e",lnkName,eventData.event_name)}else s_omni.tl(trackElem,"o",eventData.event_name)}if(Bootstrapper.mparticle)Bootstrapper.queue(["mparticle"],function(){if(typeof Bootstrapper.mParticle_log_handler==="function")Bootstrapper.mParticle_log_handler(eventData)})}})};var _q=__dataLayer.eventQueue;if(_q&&_q.length>0)for(var i=0,n=_q.length;i<n;i++){var eventData=_q[i];Bootstrapper.adobeLinkTrack(eventData)}},3772896,[3749084],704235,
[700342],24);
Bootstrapper.bindDependencyImmediate(function(){Bootstrapper.ensEvent.add(["adobeConfigSet matterhorn"],function(){var ensEventContext=this;if(ensEventContext==window)ensEventContext=undefined;var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;if(window.waitForAdobeVisitor===undefined){window.players=[];window.playerIDs=[];window.adobeTrackers=[];window.nielsenInstances=[];window.waitForAdobeVisitor=setInterval(function(){if(Bootstrapper.hbConfig&&((!!window.s_c_il&&
window.s_c_il.length>1||!!window.s_omni)&&!!window.Visitor)&&(window.ADB&&window.ADB.MediaConfig)){clearInterval(waitForAdobeVisitor);var adobeType="a";if(window.s_omni==undefined&&!!window.s_c_il&&window.s_c_il.length>1)adobeType="b";if(!!window.Visitor){var mcidTemp="";if(/espn|andscape|undefeated|secsports/i.test(location.hostname))mcidTemp="EE0201AC512D2BE80A490D4C@AdobeOrg";else if(/((national-?geographic(|brasil|la|lodges|partners)|nat-?geo((|maps|media|tv|fesb|feqa))|ngeo|natgeomaps).(org|co|bg|it|cz|de|ee|es|fr|ge|grid\.|jp|kz|lt|dk|fi|no|ru|se|ro|dk|no|fi|nl|pl|rs|sapo\.|si))|(ng.hu|ng(thai|mservice|alarabiya|cjapan|ckorea|enespanol|mfarsi).com)/i.test(location.hostname))mcidTemp=
"5BFD123F5245AECB0A490D45@AdobeOrg";else if(/dataproducts.dtci(sb|qa)?.technology/i.test(location.hostname))mcidTemp="C83C02BE532E70D50A490D4C@AdobeOrg";else if(/abc|freeform/i.test(location.hostname))mcidTemp="CB793704532E6E4D0A490D44@AdobeOrg";else if(/fivethirtyeight|goodmorningamerica/i.test(location.hostname))mcidTemp="C7A21CFE532E6E920A490D45@AdobeOrg";if(adobeType==="a"&&window.s_omni&&!window.s_omni.visitor)window.s_omni.visitor=window.Visitor.getInstance(mcidTemp);else if(adobeType==="b"&&
!window.s_c_il[1].visitor)window.s_c_il[1].visitor=window.Visitor.getInstance(mcidTemp)}var mediaConfig=new ADB.MediaConfig;mediaConfig.trackingServer=Bootstrapper.hbConfig.trackingServer;mediaConfig.playerName=Bootstrapper.hbConfig.playerName;mediaConfig.channel=Bootstrapper.hbConfig.channel;mediaConfig.appVersion=Bootstrapper.hbConfig.appVersion;mediaConfig.debugLogging=Bootstrapper.hbConfig.debugLogging;mediaConfig.ssl=Bootstrapper.hbConfig.ssl;if(!!window.s_omni){if(typeof s_omni.account!=="string")s_omni.account=
__dataLayer.adobeConfig.reportSuite;ADB.Media.configure(mediaConfig,s_omni);Bootstrapper.register("heartbeat")}else if(!!window.s_c_il){ADB.Media.configure(mediaConfig,s_c_il[1]);Bootstrapper.register("heartbeat")}}},1E3);var playerDLname="dtci.media",playerCount=0;var ignoreEvents=["dtci.loaded","dtci.embedded"];Bootstrapper.last_hb_event="";Bootstrapper.last_playHead=-1;Bootstrapper.afterAds=null;function handleMediaEvent(eventName,eventData,currentPlayer){if(eventName&&(ignoreEvents.indexOf(eventName)>
-1||/adProvider/i.test(eventName)))return;if(eventName!=="dtci.timeupdate"&&eventName===Bootstrapper.last_hb_event)return;if(eventName=="dtci.qoe"){if(Bootstrapper.Conviva&&Bootstrapper.Conviva.ready&&eventData)Bootstrapper.Conviva.handleQOEEvent(currentPlayer,eventData);return}if(eventName=="dtci.media")if(arguments.length>=4){eventName=arguments[1];eventData=arguments[2];currentPlayer=arguments[3]}else{Bootstrapper.Logging.logMsg("invalid media publish event",arguments);return}if(eventName=="dtci.programChange"&&
Bootstrapper.last_hb_event!=="dtci.programChange"){currentPlayer.bundle_.player_.mediaItem=eventData;var tempAdobeTracker=adobeTrackers[adobeTrackers.length-1];tempAdobeTracker&&Bootstrapper.ADBhelper.end(tempAdobeTracker,"complete");var tempComscoreTracker=Bootstrapper.comscoreAnalytics&&Bootstrapper.comscoreAnalytics.sa_array&&Bootstrapper.comscoreAnalytics.sa_array.length>=1?Bootstrapper.comscoreAnalytics.sa_array[Bootstrapper.comscoreAnalytics.sa_array.length-1]:null;tempComscoreTracker&&Bootstrapper.comscoreHelper.end(tempComscoreTracker);
var tempNielsenTracker=nielsenInstances[nielsenInstances.length-1];if(tempNielsenTracker){Bootstrapper.nielsenHelper.end(tempNielsenTracker,Bootstrapper.last_playHead||0);Bootstrapper.nielsenHelper.contentEndFlag=true}Bootstrapper.last_hb_event=eventName;try{var playhead=currentPlayer.bundle_.player_.cache_.currentTime||0;Bootstrapper.last_playHead=Math.floor(playhead);__dataLayer.media.lastPlayhead=playhead}catch(error){}var _cbv=window._cbv||(window._cbv=[]);if(Bootstrapper.chartbeatPlayer)_cbv.push(["removePlayer",
Bootstrapper.chartbeatPlayer]);Bootstrapper.chartbeatPlayer=currentPlayer.bundle_.player_;_cbv.push(Bootstrapper.chartbeatPlayer);__dataLayer.updateMedia(playerDLname,eventName,eventData,currentPlayer);__dataLayer.media.format="video";window.adobeTrackers=[];window.nielsenInstances=[];Bootstrapper.ADBhelper.sessionSetupStart(currentPlayer);Bootstrapper.nielsenHelper.sessionSetupStart(currentPlayer);Bootstrapper.comscoreHelper.sessionSetupStart(currentPlayer);handleMediaEvent("dtci.playing",null,currentPlayer);
return}if(players.indexOf(currentPlayer)===-1){var playerID=currentPlayer.guid||++playerCount;if(playerIDs.indexOf(playerID)===-1){players.push(currentPlayer);playerIDs.push(playerID);var _cbv=window._cbv||(window._cbv=[]);if(Bootstrapper.chartbeatPlayer)_cbv.push(["removePlayer",Bootstrapper.chartbeatPlayer]);Bootstrapper.chartbeatPlayer=currentPlayer.bundle_.player_;_cbv.push(Bootstrapper.chartbeatPlayer);__dataLayer.updateMedia(playerDLname,eventName,eventData,currentPlayer);Bootstrapper.ADBhelper.sessionSetupStart(currentPlayer);
Bootstrapper.nielsenHelper.sessionSetupStart(currentPlayer);Bootstrapper.comscoreHelper.sessionSetupStart(currentPlayer);if(window.Storage&&window.sessionStorage){var firstVideoPlayed=sessionStorage.getItem("s_fvp");if(!firstVideoPlayed){sessionStorage.setItem("s_fvp",1);__dataLayer.publish("firstVideoPlayed")}}__dataLayer.publish("videoPlaying")}}if(eventName.indexOf("playing")>-1){if(Bootstrapper.comscoreHelper.newSessionFlag){Bootstrapper.comscoreHelper.sessionSetupStart(currentPlayer);Bootstrapper.comscoreHelper.newSessionFlag=
false}if(Bootstrapper.nielsenHelper.newSessionFlag){Bootstrapper.nielsenHelper.sessionSetupStart(currentPlayer);Bootstrapper.nielsenHelper.newSessionFlag=false}}var curAdobeTracker=adobeTrackers.length>=players.indexOf(currentPlayer)+1?adobeTrackers[players.indexOf(currentPlayer)]:null;if(curAdobeTracker===undefined&&currentPlayer.guid)curAdobeTracker=Bootstrapper.adobeTrackerMap[currentPlayer.guid]||null;var curNielsenTracker=nielsenInstances.length>=players.indexOf(currentPlayer)+1?nielsenInstances[players.indexOf(currentPlayer)]:
null;if(curNielsenTracker===undefined&&currentPlayer.guid)curNielsenTracker=Bootstrapper.nielsenTrackerMap[currentPlayer.guid]||null;var curComscoreTracker=Bootstrapper.comscoreAnalytics&&Bootstrapper.comscoreAnalytics.sa_array&&Bootstrapper.comscoreAnalytics.sa_array.length>=1?Bootstrapper.comscoreAnalytics.sa_array[Bootstrapper.comscoreAnalytics.players.indexOf(currentPlayer)]:null;if(curComscoreTracker===undefined&&currentPlayer.guid)curComscoreTracker=Bootstrapper.comscoreTrackerMap[currentPlayer.guid]||
null;if(eventName.indexOf("dispose")>-1){Bootstrapper.comscoreHelper.end(curComscoreTracker);Bootstrapper.ADBhelper.end(curAdobeTracker,"liveswitch");Bootstrapper.nielsenHelper.end(curNielsenTracker,0);return}if(eventName.indexOf("timeupdate")&&!!eventData&&!!eventData.type&&eventData.type==="ad"){if(!eventData.currentTime)return;Bootstrapper.nielsenHelper.playheadUpdate(curNielsenTracker,eventData.currentTime)}if(eventName.indexOf("error")>-1)Bootstrapper.ADBhelper.error(curAdobeTracker,eventData);
var playhead=currentPlayer.bundle_.player_.cache_.currentTime||0,tempMediaObject,tempContextData;if(Bootstrapper.last_playHead!==Math.floor(playhead)){Bootstrapper.ADBhelper.playheadUpdate(curAdobeTracker,playhead);Bootstrapper.nielsenHelper.playheadUpdate(curNielsenTracker,playhead)}Bootstrapper.last_playHead=Math.floor(playhead);__dataLayer.media.lastPlayhead=playhead;if(curNielsenTracker&&eventName==="dtci.id3.cueChange"&&eventData&&eventData.text.indexOf("nielsen.com")>-1){curNielsenTracker.ggPM("sendID3",
eventData.text);Bootstrapper.Logging.logMsg("sending nielsen id3",eventData.text)}if(eventName.indexOf("ads.podStarted")>-1){__dataLayer.updateMedia(playerDLname,eventName,eventData,currentPlayer);if(Bootstrapper.comscoreHelper.newSessionFlag){Bootstrapper.comscoreHelper.sessionSetupStart(currentPlayer);Bootstrapper.comscoreHelper.newSessionFlag=false}if(Bootstrapper.nielsenHelper.newSessionFlag){Bootstrapper.nielsenHelper.sessionSetupStart(currentPlayer);Bootstrapper.nielsenHelper.newSessionFlag=
false}Bootstrapper.ADBhelper.adPodStart(curAdobeTracker,playhead,eventData)}if(eventName.indexOf("ads.adStarted")>-1){__dataLayer.updateMedia(playerDLname,eventName,eventData,currentPlayer);Bootstrapper.ADBhelper.adStart(curAdobeTracker);Bootstrapper.nielsenHelper.adStart(curNielsenTracker,eventData.type);Bootstrapper.comscoreHelper.adStart(curComscoreTracker,currentPlayer.bundle?currentPlayer.bundle.player:currentPlayer.bundle_.player_,currentPlayer,eventData)}if(eventName.indexOf("ads.adSkipped")>
-1)Bootstrapper.ADBhelper.simpleTrackEvent(curAdobeTracker,ADB.Media.Event.AdSkip);if(eventName.indexOf("ads.play")>-1)Bootstrapper.comscoreHelper.adPlay(curComscoreTracker);if(eventName.indexOf("ads.pause")>-1)Bootstrapper.comscoreHelper.adPause(curComscoreTracker);if(eventName.indexOf("ads.adEnded")>-1){Bootstrapper.ADBhelper.simpleTrackEvent(curAdobeTracker,ADB.Media.Event.AdComplete);Bootstrapper.comscoreHelper.adEnd(curComscoreTracker);if(curNielsenTracker&&(__dataLayer.media.format!=="live"&&
__dataLayer.media.contentType!=="live"))curNielsenTracker.ggPM("stop",playhead);Bootstrapper.afterAds=true}if(eventName.indexOf("ads.podEnded")>-1)Bootstrapper.ADBhelper.simpleTrackEvent(curAdobeTracker,ADB.Media.Event.AdBreakComplete);if(eventName.indexOf("playing")>-1){Bootstrapper.comscoreHelper.play(curComscoreTracker,currentPlayer);Bootstrapper.ADBhelper.play(curAdobeTracker,playerDLname,eventName,eventData,currentPlayer);if(Bootstrapper.afterAds===true||Bootstrapper.nielsenHelper.contentEndFlag===
true){Bootstrapper.afterAds=false;Bootstrapper.nielsenHelper.contentEndFlag=false;Bootstrapper.nielsenHelper.play(curNielsenTracker)}}if(eventName.indexOf("pause")>-1){var pEVD=eventData||{};if(pEVD.userInitiated===undefined||pEVD.userInitiated){Bootstrapper.ADBhelper.pause(curAdobeTracker);Bootstrapper.comscoreHelper.pause(curComscoreTracker);if(__dataLayer.media.format!=="live"&&__dataLayer.media.contentType!=="live")Bootstrapper.nielsenHelper.pause(curNielsenTracker,playhead)}}if(eventName.indexOf("seeking")>
-1)Bootstrapper.comscoreHelper.seeking(curComscoreTracker);if(eventName.indexOf("contentEnded")>-1){Bootstrapper.ADBhelper.end(curAdobeTracker,"complete");Bootstrapper.comscoreHelper.end(curComscoreTracker);if(__dataLayer.media.format!=="live"&&__dataLayer.media.contentType!=="live"){Bootstrapper.nielsenHelper.end(curNielsenTracker,playhead);Bootstrapper.nielsenHelper.contentEndFlag=true}}if(Bootstrapper.mparticle){var ignoreMediaMParticleEvents=["dtci.timeupdate","dtci.load","dtci.id3.cueChange"];
if(ignoreMediaMParticleEvents.indexOf(eventName)===-1)Bootstrapper.queue(["mparticle"],function(){if(typeof Bootstrapper.mParticle_log_handler==="function"){var _dl=window.__dataLayer||{},media=_dl.media||{};var eventMeta={};for(var key in media)if(Object.hasOwnProperty.call(media,key))eventMeta[key]=media[key]||"";eventMeta.event_name=eventName;if(typeof eventData==="object")for(var key in eventData)if(Object.hasOwnProperty.call(eventData,key))eventMeta[key]=eventData[key]||"";if(Bootstrapper.hbConfig&&
Bootstrapper.hbConfig.contextData){var ctxData=Bootstrapper.hbConfig.contextData;for(var key in ctxData)if(Object.hasOwnProperty.call(ctxData,key))eventMeta[key]=ctxData[key]||""}Bootstrapper.mParticle_log_handler(eventMeta)}})}Bootstrapper.last_hb_event=eventName}Bootstrapper.queue(["heartbeat","datalayer"],function(){if(__dataLayer.mediaEvents)while(__dataLayer.mediaEvents.length>0){var mediaEvent=__dataLayer.mediaEvents.shift();handleMediaEvent.apply(__dataLayer,mediaEvent)}Bootstrapper.handleMediaEvent=
handleMediaEvent})}})},3811336,[3786620,3811320],666974,[660779,686725],-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var ensVar0=function(){return __dataLayer.adobeConfig.visitorID_MCID};var ensVar1=function(){return __dataLayer.adobeConfig.trackingServer};var ensVar2=function(){return __dataLayer.adobeConfig.trackingServerSecure};var ensVar3=function(){return __dataLayer.adobeConfig.trackingServer};var ensVar4=function(){return __dataLayer.adobeConfig.trackingServerSecure};var ensVar5=
function(){return __dataLayer.adobeConfig.demdexDomain};Bootstrapper.fireExp=function(){var demdexDomain=ensVar5.call(this)||"dpm.demdex.net";var visitorObj={"trackingServer":ensVar1.call(this),"cookieLifetime":"","cookieDomain":"","disableIdSyncs":false,"overwriteCrossDomainMCIDAndAID":false};if(ensVar2.call(this))visitorObj.trackingServerSecure=ensVar2.call(this);if(ensVar3.call(this))visitorObj.marketingCloudServer=ensVar3.call(this);if(ensVar4.call(this))visitorObj.marketingCloudServerSecure=
ensVar4.call(this);if("")visitorObj.loadTimeout="";if("")visitorObj.idSyncContainerID="";if(false)visitorObj.secureCookie=false;if(true)visitorObj.disableThirdPartyCookies=true;if(typeof visitorObj!="undefined")visitorObj.disableIdSyncs=false;var e=function(){function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":
typeof e})(t)}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(){return{callbacks:{},add:function(e,t){this.callbacks[e]=this.callbacks[e]||[];var n=this.callbacks[e].push(t)-1,i=this;return function(){i.callbacks[e].splice(n,1)}},execute:function(e,t){if(this.callbacks[e]){t=void 0===t?[]:t,t=t instanceof Array?t:[t];try{for(;this.callbacks[e].length;){var n=this.callbacks[e].shift();"function"==typeof n?n.apply(null,
t):n instanceof Array&&n[1].apply(n[0],t)}delete this.callbacks[e]}catch(e){}}},executeAll:function(e,t){(t||e&&!V.isObjectEmpty(e))&&Object.keys(this.callbacks).forEach(function(t){var n=void 0!==e[t]?e[t]:"";this.execute(t,n)},this)},hasCallbacks:function(){return Boolean(Object.keys(this.callbacks).length)}}}function i(e,t,n){var i=null==e?void 0:e[t];return void 0===i?n:i}function r(e){for(var t=/^\d+$/,n=0,i=e.length;n<i;n++)if(!t.test(e[n]))return!1;return!0}function a(e,t){for(;e.length<t.length;)e.push("0");
for(;t.length<e.length;)t.push("0")}function o(e,t){for(var n=0;n<e.length;n++){var i=parseInt(e[n],10),r=parseInt(t[n],10);if(i>r)return 1;if(r>i)return-1}return 0}function s(e,t){if(e===t)return 0;var n=e.toString().split("."),i=t.toString().split(".");return r(n.concat(i))?(a(n,i),o(n,i)):NaN}function c(e){return e===Object(e)&&0===Object.keys(e).length}function u(e){return"function"==typeof e||e instanceof Array&&e.length}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:
"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};this.log=Ie("log",e,t),this.warn=Ie("warn",e,t),this.error=Ie("error",e,t)}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cookieName,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.cookies;if(!t||!i)return{get:we,set:we,remove:we};var r={remove:function(){i.remove(t)},get:function(){var e=i.get(t),n={};try{n=JSON.parse(e)}catch(e){n={}}return n},set:function(e,n){n=n||
{};var a=r.get(),o=Object.assign(a,e);i.set(t,JSON.stringify(o),{domain:n.optInCookieDomain||"",cookieLifetime:n.optInStorageExpiry||3419E4,expires:!0})}};return r}function f(e){this.name=this.constructor.name,this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error(e)).stack}function p(){function e(e,t){var n=Ae(e);return n.length?n.every(function(e){return!!t[e]}):be(t)}function t(){M(b),O(le.COMPLETE),_(h.status,h.permissions),
s&&m.set(h.permissions,{optInCookieDomain:c,optInStorageExpiry:u}),C.execute(He)}function n(e){return function(n,i){if(!Oe(n))throw new Error("[OptIn] Invalid category(-ies). Please use the `OptIn.Categories` enum.");return O(le.CHANGED),Object.assign(b,Me(Ae(n),e)),i||t(),h}}var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.doesOptInApply,a=i.previousPermissions,o=i.preOptInApprovals,s=i.isOptInStorageEnabled,c=i.optInCookieDomain,u=i.optInStorageExpiry,l=i.isIabContext,f=arguments.length>
1&&void 0!==arguments[1]?arguments[1]:{},p=f.cookies,g=Fe(a);Ne(g,"Invalid `previousPermissions`!"),Ne(o,"Invalid `preOptInApprovals`!");var m=d({cookieName:"adobeujs-optin"},{cookies:p}),h=this,_=ue(h),C=he(),I=Te(g),S=Te(o),v=s?m.get():{},D={},y=function(e,t){return Pe(e)||t&&Pe(t)?le.COMPLETE:le.PENDING}(I,v),A=function(e,t,n){var i=Me(me,!r);return r?Object.assign({},i,e,t,n):i}(S,I,v),b=ke(A),O=function(e){return y=e},M=function(e){return A=e};h.deny=n(!1),h.approve=n(!0),h.denyAll=h.deny.bind(h,
me),h.approveAll=h.approve.bind(h,me),h.isApproved=function(t){return e(t,h.permissions)},h.isPreApproved=function(t){return e(t,S)},h.fetchPermissions=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?h.on(le.COMPLETE,e):we;return!r||r&&h.isComplete||!!o?e(h.permissions):t||C.add(He,function(){return e(h.permissions)}),n},h.complete=function(){h.status===le.CHANGED&&t()},h.registerPlugin=function(e){if(!e||!e.name||"function"!=typeof e.onRegister)throw new Error(Ue);D[e.name]||
(D[e.name]=e,e.onRegister.call(e,h))},h.execute=Ve(D),h.memoizeContent=function(e){Re(e)&&m.set(e,{optInCookieDomain:c,optInStorageExpiry:u})},h.getMemoizedContent=function(e){var t=m.get();if(t)return t[e]},Object.defineProperties(h,{permissions:{get:function(){return A}},status:{get:function(){return y}},Categories:{get:function(){return de}},doesOptInApply:{get:function(){return!!r}},isPending:{get:function(){return h.status===le.PENDING}},isComplete:{get:function(){return h.status===le.COMPLETE}},
__plugins:{get:function(){return Object.keys(D)}},isIabContext:{get:function(){return l}}})}function g(e,t){function n(){r=null,e.call(e,new f("The call took longer than you wanted!"))}function i(){r&&(clearTimeout(r),e.apply(e,arguments))}if(void 0===t)return e;var r=setTimeout(n,t);return i}function m(){if(window.__tcfapi)return window.__tcfapi;var e=window;if(e===window.top)return void De.error("__tcfapi not found");for(var t;!t;){e=e.parent;try{e.frames.__tcfapiLocator&&(t=e)}catch(e){}if(e===
window.top)break}if(!t)return void De.error("__tcfapi not found");var n={};return window.__tcfapi=function(e,i,r,a){var o=Math.random()+"",s={__tcfapiCall:{command:e,parameter:a,version:i,callId:o}};n[o]=r,t.postMessage(s,"*")},window.addEventListener("message",function(e){var t=e.data;if("string"==typeof t)try{t=JSON.parse(e.data)}catch(e){}if(t.__tcfapiReturn){var i=t.__tcfapiReturn;"function"==typeof n[i.callId]&&(n[i.callId](i.returnValue,i.success),delete n[i.callId])}},!1),window.__tcfapi}function h(e,
t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=!0===e.vendor.consents[t],r=n.every(function(t){return!0===e.purpose.consents[t]});return i&&r}function _(){var e=this;e.name="iabPlugin",e.version="0.0.2";var t,n=he(),i={transparencyAndConsentData:null},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i[e]=t};e.fetchConsentData=function(e){var t=e.callback,n=e.timeout,i=g(t,n);a({callback:i})},e.isApproved=function(e){var t=e.callback,n=e.category,
r=e.timeout;if(i.transparencyAndConsentData)return t(null,h(i.transparencyAndConsentData,fe[n],pe[n]));var o=g(function(e,i){t(e,h(i,fe[n],pe[n]))},r);a({category:n,callback:o})},e.onRegister=function(n){t=n;var i=Object.keys(fe),r=function(e,t){!e&&t&&(i.forEach(function(e){var i=h(t,fe[e],pe[e]);n[i?"approve":"deny"](e,!0)}),n.complete())};e.fetchConsentData({callback:r})};var a=function(e){var a=e.callback;if(i.transparencyAndConsentData)return a(null,i.transparencyAndConsentData);n.add("FETCH_CONSENT_DATA",
a),o(function(e,a){if(a){var o=ke(e),s=t.getMemoizedContent("iabConsentHash"),c=ve(o.tcString).toString(32);o.consentString=e.tcString,o.hasConsentChangedSinceLastCmpPull=s!==c,r("transparencyAndConsentData",o),t.memoizeContent({iabConsentHash:c})}n.execute("FETCH_CONSENT_DATA",[null,i.transparencyAndConsentData])})},o=function(e){var t=je(fe),n=m();"function"==typeof n&&n("getTCData",2,e,t)}}var C="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?
global:"undefined"!=typeof self?self:{};Object.assign=Object.assign||function(e){for(var t,n,i=1;i<arguments.length;++i){n=arguments[i];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e};var I,S,v={HANDSHAKE:"HANDSHAKE",GETSTATE:"GETSTATE",PARENTSTATE:"PARENTSTATE"},D={MCMID:"MCMID",MCAID:"MCAID",MCAAMB:"MCAAMB",MCAAMLH:"MCAAMLH",MCOPTOUT:"MCOPTOUT",CUSTOMERIDS:"CUSTOMERIDS"},y={MCMID:"getMarketingCloudVisitorID",MCAID:"getAnalyticsVisitorID",MCAAMB:"getAudienceManagerBlob",
MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",ALLFIELDS:"getVisitorValues"},A={CUSTOMERIDS:"getCustomerIDs"},b={MCMID:"getMarketingCloudVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",MCAID:"getAnalyticsVisitorID",CUSTOMERIDS:"getCustomerIDs",ALLFIELDS:"getVisitorValues"},O={MC:"MCMID",A:"MCAID",AAM:"MCAAMB"},M={MCMID:"MCMID",MCOPTOUT:"MCOPTOUT",MCAID:"MCAID",MCAAMLH:"MCAAMLH",MCAAMB:"MCAAMB"},k={UNKNOWN:0,AUTHENTICATED:1,
LOGGED_OUT:2},E={GLOBAL:"global"},T={MESSAGES:v,STATE_KEYS_MAP:D,ASYNC_API_MAP:y,SYNC_API_MAP:A,ALL_APIS:b,FIELDGROUP_TO_FIELD:O,FIELDS:M,AUTH_STATE:k,OPT_OUT:E},P=T.STATE_KEYS_MAP,L=function(e){function t(){}function n(t,n){var i=this;return function(){var r=e(0,t),a={};return a[t]=r,i.setStateAndPublish(a),n(r),r}}this.getMarketingCloudVisitorID=function(e){e=e||t;var i=this.findField(P.MCMID,e),r=n.call(this,P.MCMID,e);return void 0!==i?i:r()},this.getVisitorValues=function(e){this.getMarketingCloudVisitorID(function(t){e({MCMID:t})})}},
R=T.MESSAGES,w=T.ASYNC_API_MAP,F=T.SYNC_API_MAP,N=function(){function e(){}function t(e,t){var n=this;return function(){return n.callbackRegistry.add(e,t),n.messageParent(R.GETSTATE),""}}function n(n){this[w[n]]=function(i){i=i||e;var r=this.findField(n,i),a=t.call(this,n,i);return void 0!==r?r:a()}}function i(t){this[F[t]]=function(){return this.findField(t,e)||{}}}Object.keys(w).forEach(n,this),Object.keys(F).forEach(i,this)},x=T.ASYNC_API_MAP,j=function(){Object.keys(x).forEach(function(e){this[x[e]]=
function(t){this.callbackRegistry.add(e,t)}},this)},V=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(t,n){n.isObjectEmpty=function(e){return e===Object(e)&&0===Object.keys(e).length},n.isValueEmpty=function(e){return""===e||n.isObjectEmpty(e)};var i=function(){var e=navigator.appName,t=navigator.userAgent;return"Microsoft Internet Explorer"===e||t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0&&t.indexOf("Windows NT 6")>=0};n.getIeVersion=function(){return document.documentMode?
document.documentMode:i()?7:null},n.encodeAndBuildRequest=function(e,t){return e.map(encodeURIComponent).join(t)},n.isObject=function(t){return null!==t&&"object"===e(t)&&!1===Array.isArray(t)},n.defineGlobalNamespace=function(){return window.adobe=n.isObject(window.adobe)?window.adobe:{},window.adobe},n.pluck=function(e,t){return t.reduce(function(t,n){return e[n]&&(t[n]=e[n]),t},Object.create(null))},n.parseOptOut=function(e,t,n){t||(t=n,e.d_optout&&e.d_optout instanceof Array&&(t=e.d_optout.join(",")));
var i=parseInt(e.d_ottl,10);return isNaN(i)&&(i=7200),{optOut:t,d_ottl:i}},n.normalizeBoolean=function(e){var t=e;return"true"===e?t=!0:"false"===e&&(t=!1),t}}),H=(V.isObjectEmpty,V.isValueEmpty,V.getIeVersion,V.encodeAndBuildRequest,V.isObject,V.defineGlobalNamespace,V.pluck,V.parseOptOut,V.normalizeBoolean,n),U=T.MESSAGES,B={0:"prefix",1:"orgID",2:"state"},G=function(e,t){this.parse=function(e){try{var t={};return e.data.split("|").forEach(function(e,n){if(void 0!==e)t[B[n]]=2!==n?e:JSON.parse(e)}),
t}catch(e){}},this.isInvalid=function(n){var i=this.parse(n);if(!i||Object.keys(i).length<2)return!0;var r=e!==i.orgID,a=!t||n.origin!==t,o=-1===Object.keys(U).indexOf(i.prefix);return r||a||o},this.send=function(n,i,r){var a=i+"|"+e;r&&r===Object(r)&&(a+="|"+JSON.stringify(r));try{n.postMessage(a,t)}catch(e){}}},Y=T.MESSAGES,q=function(e,t,n,i){function r(e){Object.assign(p,e)}function a(e){Object.assign(p.state,e),Object.assign(p.state.ALLFIELDS,e),p.callbackRegistry.executeAll(p.state)}function o(e){if(!h.isInvalid(e)){m=
!1;var t=h.parse(e);p.setStateAndPublish(t.state)}}function s(e){!m&&g&&(m=!0,h.send(i,e))}function c(){r(new L(n._generateID)),p.getMarketingCloudVisitorID(),p.callbackRegistry.executeAll(p.state,!0),C.removeEventListener("message",u)}function u(e){if(!h.isInvalid(e)){var t=h.parse(e);m=!1,C.clearTimeout(p._handshakeTimeout),C.removeEventListener("message",u),r(new N(p)),C.addEventListener("message",o),p.setStateAndPublish(t.state),p.callbackRegistry.hasCallbacks()&&s(Y.GETSTATE)}}function l(){g&&
postMessage?(C.addEventListener("message",u),s(Y.HANDSHAKE),p._handshakeTimeout=setTimeout(c,250)):c()}function d(){C.s_c_in||(C.s_c_il=[],C.s_c_in=0),p._c="Visitor",p._il=C.s_c_il,p._in=C.s_c_in,p._il[p._in]=p,C.s_c_in++}function f(){function e(e){0!==e.indexOf("_")&&"function"==typeof n[e]&&(p[e]=function(){})}Object.keys(n).forEach(e),p.getSupplementalDataID=n.getSupplementalDataID,p.isAllowed=function(){return!0}}var p=this,g=t.whitelistParentDomain;p.state={ALLFIELDS:{}},p.version=n.version,
p.marketingCloudOrgID=e,p.cookieDomain=n.cookieDomain||"",p._instanceType="child";var m=!1,h=new G(e,g);p.callbackRegistry=H(),p.init=function(){d(),f(),r(new j(p)),l()},p.findField=function(e,t){if(void 0!==p.state[e])return t(p.state[e]),p.state[e]},p.messageParent=s,p.setStateAndPublish=a},W=T.MESSAGES,X=T.ALL_APIS,K=T.ASYNC_API_MAP,J=T.FIELDGROUP_TO_FIELD,z=function(e,t){function n(){var t={};return Object.keys(X).forEach(function(n){var i=X[n],r=e[i]();V.isValueEmpty(r)||(t[n]=r)}),t}function i(){var t=
[];return e._loading&&Object.keys(e._loading).forEach(function(n){if(e._loading[n]){var i=J[n];t.push(i)}}),t.length?t:null}function r(t){return function n(r){var a=i();if(a){var o=K[a[0]];e[o](n,!0)}else t()}}function a(e,i){var r=n();t.send(e,i,r)}function o(e){c(e),a(e,W.HANDSHAKE)}function s(e){r(function(){a(e,W.PARENTSTATE)})()}function c(n){function i(i){r.call(e,i),t.send(n,W.PARENTSTATE,{CUSTOMERIDS:e.getCustomerIDs()})}var r=e.setCustomerIDs;e.setCustomerIDs=i}return function(e){if(!t.isInvalid(e))(t.parse(e).prefix===
W.HANDSHAKE?o:s)(e.source)}},Q=function(e,t){function n(e){return function(n){i[e]=n,r++,r===a&&t(i)}}var i={},r=0,a=Object.keys(e).length;Object.keys(e).forEach(function(t){var i=e[t];if(i.fn){var r=i.args||[];r.unshift(n(t)),i.fn.apply(i.context||null,r)}})},$={get:function(e){e=encodeURIComponent(e);var t=(";"+document.cookie).split(" ").join(";"),n=t.indexOf(";"+e+"\x3d"),i=n<0?n:t.indexOf(";",n+1);return n<0?"":decodeURIComponent(t.substring(n+2+e.length,i<0?t.length:i))},set:function(e,t,n){var r=
i(n,"cookieLifetime"),a=i(n,"expires"),o=i(n,"domain"),s=i(n,"secure"),c=s?"Secure":"";if(a&&"SESSION"!==r&&"NONE"!==r){var u=""!==t?parseInt(r||0,10):-60;if(u)a=new Date,a.setTime(a.getTime()+1E3*u);else if(1===a){a=new Date;var l=a.getYear();a.setYear(l+2+(l<1900?1900:0))}}else a=0;return e&&"NONE"!==r?(document.cookie=encodeURIComponent(e)+"\x3d"+encodeURIComponent(t)+"; path\x3d/;"+(a?" expires\x3d"+a.toGMTString()+";":"")+(o?" domain\x3d"+o+";":"")+c,this.get(e)===t):0},remove:function(e,t){var n=
i(t,"domain");n=n?" domain\x3d"+n+";":"",document.cookie=encodeURIComponent(e)+"\x3d; Path\x3d/; Expires\x3dThu, 01 Jan 1970 00:00:01 GMT;"+n}},Z=function(e){var t;!e&&C.location&&(e=C.location.hostname),t=e;var n,i=t.split(".");for(n=i.length-2;n>=0;n--)if(t=i.slice(n).join("."),$.set("test","cookie",{domain:t}))return $.remove("test",{domain:t}),t;return""},ee={compare:s,isLessThan:function(e,t){return s(e,t)<0},areVersionsDifferent:function(e,t){return 0!==s(e,t)},isGreaterThan:function(e,t){return s(e,
t)>0},isEqual:function(e,t){return 0===s(e,t)}},te=!!C.postMessage,ne={postMessage:function(e,t,n){var i=1;t&&(te?n.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(n.location=t.replace(/#.*$/,"")+"#"+ +new Date+i++ +"\x26"+e))},receiveMessage:function(e,t){var n;try{te&&(e&&(n=function(n){if("string"==typeof t&&n.origin!==t||"[object Function]"===Object.prototype.toString.call(t)&&!1===t(n.origin))return!1;e(n)}),C.addEventListener?C[e?"addEventListener":"removeEventListener"]("message",
n):C[e?"attachEvent":"detachEvent"]("onmessage",n))}catch(e){}}},ie=function(e){var t,n,i="0123456789",r="",a="",o=8,s=10,c=10;if(1==e){for(i+="ABCDEF",t=0;16>t;t++)n=Math.floor(Math.random()*o),r+=i.substring(n,n+1),n=Math.floor(Math.random()*o),a+=i.substring(n,n+1),o=16;return r+"-"+a}for(t=0;19>t;t++)n=Math.floor(Math.random()*s),r+=i.substring(n,n+1),0===t&&9==n?s=3:(1==t||2==t)&&10!=s&&2>n?s=10:2<t&&(s=10),n=Math.floor(Math.random()*c),a+=i.substring(n,n+1),0===t&&9==n?c=3:(1==t||2==t)&&10!=
c&&2>n?c=10:2<t&&(c=10);return r+a},re=function(e,t){return{corsMetadata:function(){var e="none",t=!0;return"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(t=!1),Object.prototype.toString.call(C.HTMLElement).indexOf("Constructor")>0&&(t=!1)),{corsType:e,corsCookiesEnabled:t}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?
null:new C[this.corsMetadata.corsType]},fireCORS:function(t,n,i){function r(e){var n;try{if((n=JSON.parse(e))!==Object(n))return void a.handleCORSError(t,null,"Response is not JSON")}catch(e){return void a.handleCORSError(t,e,"Error parsing response as JSON")}try{for(var i=t.callback,r=C,o=0;o<i.length;o++)r=r[i[o]];r(n)}catch(e){a.handleCORSError(t,e,"Error forming callback function")}}var a=this;n&&(t.loadErrorHandler=n);try{var o=this.getCORSInstance();o.open("get",t.corsUrl+"\x26ts\x3d"+(new Date).getTime(),
!0),"XMLHttpRequest"===this.corsMetadata.corsType&&(o.withCredentials=!0,o.timeout=e.loadTimeout,o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4===this.readyState&&200===this.status&&r(this.responseText)}),o.onerror=function(e){a.handleCORSError(t,e,"onerror")},o.ontimeout=function(e){a.handleCORSError(t,e,"ontimeout")},o.send(),e._log.requests.push(t.corsUrl)}catch(e){this.handleCORSError(t,e,"try-catch")}},handleCORSError:function(t,n,i){e.CORSErrors.push({corsData:t,
error:n,description:i}),t.loadErrorHandler&&("ontimeout"===i?t.loadErrorHandler(!0):t.loadErrorHandler(!1))}}},ae={POST_MESSAGE_ENABLED:!!C.postMessage,DAYS_BETWEEN_SYNC_ID_CALLS:1,MILLIS_PER_DAY:864E5,ADOBE_MC:"adobe_mc",ADOBE_MC_SDID:"adobe_mc_sdid",VALID_VISITOR_ID_REGEX:/^[0-9a-fA-F\-]+$/,ADOBE_MC_TTL_IN_MIN:5,VERSION_REGEX:/vVersion\|((\d+\.)?(\d+\.)?(\*|\d+))(?=$|\|)/,FIRST_PARTY_SERVER_COOKIE:"s_ecid"},oe=function(e,t){var n=C.document;return{THROTTLE_START:3E4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,
id:null,onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e){var t=e.split("/");return t[0]+"//"+t[2]}},subdomain:null,url:null,getUrl:function(){var t,i="http://fast.",r="?d_nsid\x3d"+e.idSyncContainerID+"#"+encodeURIComponent(n.location.origin);return this.subdomain||(this.subdomain="nosubdomainreturned"),e.loadSSL&&(i=e.idSyncSSLUseAkamai?"https://fast.":"https://"),t=i+this.subdomain+".demdex.net/dest5.html"+r,this.iframeHost=this.getIframeHost(t),this.id="destination_publishing_iframe_"+
this.subdomain+"_"+e.idSyncContainerID,t},checkDPIframeSrc:function(){var t="?d_nsid\x3d"+e.idSyncContainerID+"#"+encodeURIComponent(n.location.href);"string"==typeof e.dpIframeSrc&&e.dpIframeSrc.length&&(this.id="destination_publishing_iframe_"+(e._subdomain||this.subdomain||(new Date).getTime())+"_"+e.idSyncContainerID,this.iframeHost=this.getIframeHost(e.dpIframeSrc),this.url=e.dpIframeSrc+t)},idCallNotProcesssed:null,doAttachIframe:!1,startedAttachingIframe:!1,iframeHasLoaded:null,iframeIdChanged:null,
newIframeCreated:null,originalIframeHasLoadedAlready:null,iframeLoadedCallbacks:[],regionChanged:!1,timesRegionChanged:0,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:ae.POST_MESSAGE_ENABLED?null:100,onPageDestinationsFired:[],jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,readyToAttachIframePreliminary:function(){return!(e.idSyncDisableSyncs||e.disableIdSyncs||
e.idSyncDisable3rdPartySyncing||e.disableThirdPartyCookies||e.disableThirdPartyCalls)},readyToAttachIframe:function(){return this.readyToAttachIframePreliminary()&&(this.doAttachIframe||e._doAttachIframe)&&(this.subdomain&&"nosubdomainreturned"!==this.subdomain||e._subdomain)&&this.url&&!this.startedAttachingIframe},attachIframe:function(){function e(){r=n.createElement("iframe"),r.sandbox="allow-scripts allow-same-origin",r.title="Adobe ID Syncing iFrame",r.id=i.id,r.name=i.id+"_name",r.style.cssText=
"display: none; width: 0; height: 0;",r.src=i.url,i.newIframeCreated=!0,t(),n.body.appendChild(r)}function t(e){r.addEventListener("load",function(){r.className="aamIframeLoaded",i.iframeHasLoaded=!0,i.fireIframeLoadedCallbacks(e),i.requestToProcess()})}this.startedAttachingIframe=!0;var i=this,r=n.getElementById(this.id);r?"IFRAME"!==r.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==r.className?(this.originalIframeHasLoadedAlready=!1,t("The destination publishing iframe already exists from a different library, but hadn't loaded yet.")):
(this.originalIframeHasLoadedAlready=!0,this.iframeHasLoaded=!0,this.iframe=r,this.fireIframeLoadedCallbacks("The destination publishing iframe already exists from a different library, and had loaded alresady."),this.requestToProcess())):e(),this.iframe=r},fireIframeLoadedCallbacks:function(e){this.iframeLoadedCallbacks.forEach(function(t){"function"==typeof t&&t({message:e||"The destination publishing iframe was attached and loaded successfully."})}),this.iframeLoadedCallbacks=[]},requestToProcess:function(t){function n(){r.jsonForComparison.push(t),
r.jsonWaiting.push(t),r.processSyncOnPage(t)}var i,r=this;if(t===Object(t)&&t.ibs)if(i=JSON.stringify(t.ibs||[]),this.jsonForComparison.length){var a,o,s,c=!1;for(a=0,o=this.jsonForComparison.length;a<o;a++)if(s=this.jsonForComparison[a],i===JSON.stringify(s.ibs||[])){c=!0;break}c?this.jsonDuplicates.push(t):n()}else n();if((this.receivedThirdPartyCookiesNotification||!ae.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length){var u=this.jsonWaiting.shift();this.process(u),this.requestToProcess()}e.idSyncDisableSyncs||
e.disableIdSyncs||!this.iframeHasLoaded||!this.messages.length||this.sendingMessages||(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){r.messageSendingInterval=ae.POST_MESSAGE_ENABLED?null:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},getRegionAndCheckIfChanged:function(t,n){var i=e._getField("MCAAMLH"),r=t.d_region||t.dcs_region;return i?r&&(e._setFieldExpire("MCAAMLH",n),e._setField("MCAAMLH",r),parseInt(i,10)!==r&&(this.regionChanged=!0,this.timesRegionChanged++,
e._setField("MCSYNCSOP",""),e._setField("MCSYNCS",""),i=r)):(i=r)&&(e._setFieldExpire("MCAAMLH",n),e._setField("MCAAMLH",i)),i||(i=""),i},processSyncOnPage:function(e){var t,n,i,r;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(i=0;i<n;i++)r=t[i],r.syncOnPage&&this.checkFirstPartyCookie(r,"","syncOnPage")},process:function(e){var t,n,i,r,a,o=encodeURIComponent,s=!1;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(s=!0,i=0;i<n;i++)r=t[i],a=[o("ibs"),o(r.id||""),o(r.tag||""),V.encodeAndBuildRequest(r.url||
[],","),o(r.ttl||""),"","",r.fireURLSync?"true":"false"],r.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(a.join("|")):r.fireURLSync&&this.checkFirstPartyCookie(r,a.join("|")));s&&this.jsonProcessed.push(e)},checkFirstPartyCookie:function(t,n,i){var r="syncOnPage"===i,a=r?"MCSYNCSOP":"MCSYNCS";e._readVisitor();var o,s,c=e._getField(a),u=!1,l=!1,d=Math.ceil((new Date).getTime()/ae.MILLIS_PER_DAY);c?(o=c.split("*"),s=this.pruneSyncData(o,t.id,d),u=s.dataPresent,l=s.dataValid,u&&l||this.fireSync(r,
t,n,o,a,d)):(o=[],this.fireSync(r,t,n,o,a,d))},pruneSyncData:function(e,t,n){var i,r,a,o=!1,s=!1;for(r=0;r<e.length;r++)i=e[r],a=parseInt(i.split("-")[1],10),i.match("^"+t+"-")?(o=!0,n<a?s=!0:(e.splice(r,1),r--)):n>=a&&(e.splice(r,1),r--);return{dataPresent:o,dataValid:s}},manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort(function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)});e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(t,
n,i,r,a,o){var s=this;if(t){if("img"===n.tag){var c,u,l,d,f=n.url,p=e.loadSSL?"https:":"http:";for(c=0,u=f.length;c<u;c++){l=f[c],d=/^\/\//.test(l);var g=new Image;g.addEventListener("load",function(t,n,i,r){return function(){s.onPagePixels[t]=null,e._readVisitor();var o,c=e._getField(a),u=[];if(c){o=c.split("*");var l,d,f;for(l=0,d=o.length;l<d;l++)f=o[l],f.match("^"+n.id+"-")||u.push(f)}s.setSyncTrackingData(u,n,i,r)}}(this.onPagePixels.length,n,a,o)),g.src=(d?p:"")+l,this.onPagePixels.push(g)}}}else this.addMessage(i),
this.setSyncTrackingData(r,n,a,o)},addMessage:function(t){var n=encodeURIComponent,i=n(e._enableErrorReporting?"---destpub-debug---":"---destpub---");this.messages.push((ae.POST_MESSAGE_ENABLED?"":i)+t)},setSyncTrackingData:function(t,n,i,r){t.push(n.id+"-"+(r+Math.ceil(n.ttl/60/24))),this.manageSyncsSize(t),e._setField(i,t.join("*"))},sendMessages:function(){var e,t=this,n="",i=encodeURIComponent;this.regionChanged&&(n=i("---destpub-clear-dextp---"),this.regionChanged=!1),this.messages.length?ae.POST_MESSAGE_ENABLED?
(e=n+i("---destpub-combined---")+this.messages.join("%01"),this.postMessage(e),this.messages=[],this.sendingMessages=!1):(e=this.messages.shift(),this.postMessage(n+e),setTimeout(function(){t.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1},postMessage:function(e){ne.postMessage(e,this.url,this.iframe.contentWindow),this.messagesPosted.push(e)},receiveMessage:function(e){var t,n=/^---destpub-to-parent---/;"string"==typeof e&&n.test(e)&&(t=e.replace(n,"").split("|"),"canSetThirdPartyCookies"===
t[0]&&(this.canSetThirdPartyCookies="true"===t[1],this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(e))},processIDCallData:function(i){(null==this.url||i.subdomain&&"nosubdomainreturned"===this.subdomain)&&("string"==typeof e._subdomain&&e._subdomain.length?this.subdomain=e._subdomain:this.subdomain=i.subdomain||"",this.url=this.getUrl()),i.ibs instanceof Array&&i.ibs.length&&(this.doAttachIframe=!0),this.readyToAttachIframe()&&(e.idSyncAttachIframeOnWindowLoad?
(t.windowLoaded||"complete"===n.readyState||"loaded"===n.readyState)&&this.attachIframe():this.attachIframeASAP()),"function"==typeof e.idSyncIDCallResult?e.idSyncIDCallResult(i):this.requestToProcess(i),"function"==typeof e.idSyncAfterIDCallResult&&e.idSyncAfterIDCallResult(i)},canMakeSyncIDCall:function(t,n){return e._forceSyncIDCall||!t||n-t>ae.DAYS_BETWEEN_SYNC_ID_CALLS},attachIframeASAP:function(){function e(){t.startedAttachingIframe||(n.body?t.attachIframe():setTimeout(e,30))}var t=this;e()}}},
se={audienceManagerServer:{},audienceManagerServerSecure:{},cookieDomain:{},cookieLifetime:{},cookieName:{},doesOptInApply:{},disableThirdPartyCalls:{},discardTrackingServerECID:{},idSyncAfterIDCallResult:{},idSyncAttachIframeOnWindowLoad:{},idSyncContainerID:{},idSyncDisable3rdPartySyncing:{},disableThirdPartyCookies:{},idSyncDisableSyncs:{},disableIdSyncs:{},idSyncIDCallResult:{},idSyncSSLUseAkamai:{},isCoopSafe:{},isIabContext:{},isOptInStorageEnabled:{},loadSSL:{},loadTimeout:{},marketingCloudServer:{},
marketingCloudServerSecure:{},optInCookieDomain:{},optInStorageExpiry:{},overwriteCrossDomainMCIDAndAID:{},preOptInApprovals:{},previousPermissions:{},resetBeforeVersion:{},sdidParamExpiry:{},serverState:{},sessionCookieName:{},secureCookie:{},takeTimeoutMetrics:{},trackingServer:{},trackingServerSecure:{},whitelistIframeDomains:{},whitelistParentDomain:{}},ce={getConfigNames:function(){return Object.keys(se)},getConfigs:function(){return se},normalizeConfig:function(e){return"function"!=typeof e?
e:e()}},ue=function(e){var t={};return e.on=function(e,n,i){if(!n||"function"!=typeof n)throw new Error("[ON] Callback should be a function.");t.hasOwnProperty(e)||(t[e]=[]);var r=t[e].push({callback:n,context:i})-1;return function(){t[e].splice(r,1),t[e].length||delete t[e]}},e.off=function(e,n){t.hasOwnProperty(e)&&(t[e]=t[e].filter(function(e){if(e.callback!==n)return e}))},e.publish=function(e){if(t.hasOwnProperty(e)){var n=[].slice.call(arguments,1);t[e].slice(0).forEach(function(e){e.callback.apply(e.context,
n)})}},e.publish},le={PENDING:"pending",CHANGED:"changed",COMPLETE:"complete"},de={AAM:"aam",ADCLOUD:"adcloud",ANALYTICS:"aa",CAMPAIGN:"campaign",ECID:"ecid",LIVEFYRE:"livefyre",TARGET:"target",MEDIA_ANALYTICS:"mediaaa"},fe=(I={},t(I,de.AAM,565),t(I,de.ECID,565),I),pe=(S={},t(S,de.AAM,[1,10]),t(S,de.ECID,[1,10]),S),ge=["videoaa","iabConsentHash"],me=function(e){return Object.keys(e).map(function(t){return e[t]})}(de),he=function(){var e={};return e.callbacks=Object.create(null),e.add=function(t,n){if(!u(n))throw new Error("[callbackRegistryFactory] Make sure callback is a function or an array of functions.");
e.callbacks[t]=e.callbacks[t]||[];var i=e.callbacks[t].push(n)-1;return function(){e.callbacks[t].splice(i,1)}},e.execute=function(t,n){if(e.callbacks[t]){n=void 0===n?[]:n,n=n instanceof Array?n:[n];try{for(;e.callbacks[t].length;){var i=e.callbacks[t].shift();"function"==typeof i?i.apply(null,n):i instanceof Array&&i[1].apply(i[0],n)}delete e.callbacks[t]}catch(e){}}},e.executeAll=function(t,n){(n||t&&!c(t))&&Object.keys(e.callbacks).forEach(function(n){var i=void 0!==t[n]?t[n]:"";e.execute(n,i)},
e)},e.hasCallbacks=function(){return Boolean(Object.keys(e.callbacks).length)},e},_e=function(){},Ce=function(e){var t=window,n=t.console;return!!n&&"function"==typeof n[e]},Ie=function(e,t,n){return n()?function(){if(Ce(e)){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];console[e].apply(console,[t].concat(i))}}:_e},Se=l,ve=function(){for(var e=[],t=0;t<256;t++){for(var n=t,i=0;i<8;i++)n=1&n?3988292384^n>>>1:n>>>1;e.push(n)}return function(t,n){t=unescape(encodeURIComponent(t)),
n||(n=0),n^=-1;for(var i=0;i<t.length;i++){var r=255&(n^t.charCodeAt(i));n=n>>>8^e[r]}return(n^=-1)>>>0}}(),De=new Se("[ADOBE OPT-IN]"),ye=function(t,n){return e(t)===n},Ae=function(e,t){return e instanceof Array?e:ye(e,"string")?[e]:t||[]},be=function(e){var t=Object.keys(e);return!!t.length&&t.every(function(t){return!0===e[t]})},Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!(!e||Ee(e))&&Ae(e).every(function(e){return me.indexOf(e)>-1||t&&ge.indexOf(e)>-1})},
Me=function(e,t){return e.reduce(function(e,n){return e[n]=t,e},{})},ke=function(e){return JSON.parse(JSON.stringify(e))},Ee=function(e){return"[object Array]"===Object.prototype.toString.call(e)&&!e.length},Te=function(e){if(Re(e))return e;try{return JSON.parse(e)}catch(e){return{}}},Pe=function(e){return void 0===e||(Re(e)?Oe(Object.keys(e),!0):Le(e))},Le=function(e){try{var t=JSON.parse(e);return!!e&&ye(e,"string")&&Oe(Object.keys(t),!0)}catch(e){return!1}},Re=function(e){return null!==e&&ye(e,
"object")&&!1===Array.isArray(e)},we=function(){},Fe=function(e){return ye(e,"function")?e():e},Ne=function(e,t){Pe(e)||De.error("".concat(t))},xe=function(e){return Object.keys(e).map(function(t){return e[t]})},je=function(e){return xe(e).filter(function(e,t,n){return n.indexOf(e)===t})},Ve=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.command,i=t.params,r=void 0===i?{}:i,a=t.callback,o=void 0===a?we:a;if(!n||-1===n.indexOf("."))throw new Error("[OptIn.execute] Please provide a valid command.");
try{var s=n.split("."),c=e[s[0]],u=s[1];if(!c||"function"!=typeof c[u])throw new Error("Make sure the plugin and API name exist.");var l=Object.assign(r,{callback:o});c[u].call(c,l)}catch(e){De.error("[execute] Something went wrong: "+e.message)}}};f.prototype=Object.create(Error.prototype),f.prototype.constructor=f;var He="fetchPermissions",Ue="[OptIn#registerPlugin] Plugin is invalid.";p.Categories=de,p.TimeoutError=f;var Be=Object.freeze({OptIn:p,IabPlugin:_}),Ge=function(e,t){e.publishDestinations=
function(n){var i=arguments[1],r=arguments[2];try{r="function"==typeof r?r:n.callback}catch(e){r=function(){}}var a=t;if(!a.readyToAttachIframePreliminary())return void r({error:"The destination publishing iframe is disabled in the Visitor library."});if("string"==typeof n){if(!n.length)return void r({error:"subdomain is not a populated string."});if(!(i instanceof Array&&i.length))return void r({error:"messages is not a populated array."});var o=!1;if(i.forEach(function(e){"string"==typeof e&&e.length&&
(a.addMessage(e),o=!0)}),!o)return void r({error:"None of the messages are populated strings."})}else{if(!V.isObject(n))return void r({error:"Invalid parameters passed."});var s=n;if("string"!=typeof(n=s.subdomain)||!n.length)return void r({error:"config.subdomain is not a populated string."});var c=s.urlDestinations;if(!(c instanceof Array&&c.length))return void r({error:"config.urlDestinations is not a populated array."});var u=[];c.forEach(function(e){V.isObject(e)&&(e.hideReferrer?e.message&&
a.addMessage(e.message):u.push(e))});!function e(){u.length&&setTimeout(function(){var t=new Image,n=u.shift();t.src=n.url,a.onPageDestinationsFired.push(n),e()},100)}()}a.iframe?(r({message:"The destination publishing iframe is already attached and loaded."}),a.requestToProcess()):!e.subdomain&&e._getField("MCMID")?(a.subdomain=n,a.doAttachIframe=!0,a.url=a.getUrl(),a.readyToAttachIframe()?(a.iframeLoadedCallbacks.push(function(e){r({message:"Attempted to attach and load the destination publishing iframe through this API call. Result: "+
(e.message||"no result")})}),a.attachIframe()):r({error:"Encountered a problem in attempting to attach and load the destination publishing iframe through this API call."})):a.iframeLoadedCallbacks.push(function(e){r({message:"Attempted to attach and load the destination publishing iframe through normal Visitor API processing. Result: "+(e.message||"no result")})})}},Ye=function e(t){function n(e,t){return e>>>t|e<<32-t}for(var i,r,a=Math.pow,o=a(2,32),s="",c=[],u=8*t.length,l=e.h=e.h||[],d=e.k=e.k||
[],f=d.length,p={},g=2;f<64;g++)if(!p[g]){for(i=0;i<313;i+=g)p[i]=g;l[f]=a(g,.5)*o|0,d[f++]=a(g,1/3)*o|0}for(t+="\u0080";t.length%64-56;)t+="\x00";for(i=0;i<t.length;i++){if((r=t.charCodeAt(i))>>8)return;c[i>>2]|=r<<(3-i)%4*8}for(c[c.length]=u/o|0,c[c.length]=u,r=0;r<c.length;){var m=c.slice(r,r+=16),h=l;for(l=l.slice(0,8),i=0;i<64;i++){var _=m[i-15],C=m[i-2],I=l[0],S=l[4],v=l[7]+(n(S,6)^n(S,11)^n(S,25))+(S&l[5]^~S&l[6])+d[i]+(m[i]=i<16?m[i]:m[i-16]+(n(_,7)^n(_,18)^_>>>3)+m[i-7]+(n(C,17)^n(C,19)^
C>>>10)|0);l=[v+((n(I,2)^n(I,13)^n(I,22))+(I&l[1]^I&l[2]^l[1]&l[2]))|0].concat(l),l[4]=l[4]+v|0}for(i=0;i<8;i++)l[i]=l[i]+h[i]|0}for(i=0;i<8;i++)for(r=3;r+1;r--){var D=l[i]>>8*r&255;s+=(D<16?0:"")+D.toString(16)}return s},qe=function(e,t){return"SHA-256"!==t&&"SHA256"!==t&&"sha256"!==t&&"sha-256"!==t||(e=Ye(e)),e},We=function(e){return String(e).trim().toLowerCase()},Xe=Be.OptIn;V.defineGlobalNamespace(),window.adobe.OptInCategories=Xe.Categories;var Ke=function(t,n,i){function r(){I._customerIDsHashChanged=
!1}function a(e){var t=e;return function(e){var n=e||b.location.href;try{var i=I._extractParamFromUri(n,t);if(i)return B.parsePipeDelimetedKeyValues(i)}catch(e){}}}function o(e){function t(e,t,n){e&&e.match(ae.VALID_VISITOR_ID_REGEX)&&(n===E&&(A=!0),t(e))}t(e[E],I.setMarketingCloudVisitorID,E),I._setFieldExpire(F,-1),t(e[R],I.setAnalyticsVisitorID)}function s(e){e=e||{},I._supplementalDataIDCurrent=e.supplementalDataIDCurrent||"",I._supplementalDataIDCurrentConsumed=e.supplementalDataIDCurrentConsumed||
{},I._supplementalDataIDLast=e.supplementalDataIDLast||"",I._supplementalDataIDLastConsumed=e.supplementalDataIDLastConsumed||{}}function c(e){function t(e,t,n){return n=n?n+="|":n,n+=e+"\x3d"+encodeURIComponent(t)}function n(e,n){var i=n[0],r=n[1];return null!=r&&r!==N&&(e=t(i,r,e)),e}var i=e.reduce(n,"");return function(e){var t=B.getTimestampInSeconds();return e=e?e+="|":e,e+="TS\x3d"+t}(i)}function u(e){var t=e.minutesToLive,n="";return(I.idSyncDisableSyncs||I.disableIdSyncs)&&(n=n||"Error: id syncs have been disabled"),
"string"==typeof e.dpid&&e.dpid.length||(n=n||"Error: config.dpid is empty"),"string"==typeof e.url&&e.url.length||(n=n||"Error: config.url is empty"),void 0===t?t=20160:(t=parseInt(t,10),(isNaN(t)||t<=0)&&(n=n||"Error: config.minutesToLive needs to be a positive number")),{error:n,ttl:t}}function l(){return!!I.configs.doesOptInApply&&!(S.optIn.isComplete&&d())}function d(){return I.configs.doesOptInApply&&I.configs.isIabContext?S.optIn.isApproved(S.optIn.Categories.ECID)&&y:S.optIn.isApproved(S.optIn.Categories.ECID)}
function f(){[["getMarketingCloudVisitorID"],["setCustomerIDs",void 0],["syncIdentity",void 0],["getAnalyticsVisitorID"],["getAudienceManagerLocationHint"],["getLocationHint"],["getAudienceManagerBlob"]].forEach(function(e){var t=e[0],n=2===e.length?e[1]:"",i=I[t];I[t]=function(e){return d()&&I.isAllowed()?i.apply(I,arguments):("function"==typeof e&&I._callCallback(e,[n]),n)}})}function p(){var e=I._getAudienceManagerURLData(),t=e.url;return I._loadData(k,t,null,e)}function g(e,t){if(y=!0,e)throw new Error("[IAB plugin] : "+
e);t&&t.gdprApplies&&(v=t.consentString,D=t.hasConsentChangedSinceLastCmpPull?1:0),p(),_()}function m(e,t){if(y=!0,e)throw new Error("[IAB plugin] : "+e);t.gdprApplies&&(v=t.consentString,D=t.hasConsentChangedSinceLastCmpPull?1:0),I.init(),_()}function h(){S.optIn.isComplete&&(S.optIn.isApproved(S.optIn.Categories.ECID)?I.configs.isIabContext?S.optIn.execute({command:"iabPlugin.fetchConsentData",callback:m}):(I.init(),_()):I.configs.isIabContext?S.optIn.execute({command:"iabPlugin.fetchConsentData",
callback:g}):(f(),_()))}function _(){S.optIn.off("complete",h)}if(!i||i.split("").reverse().join("")!==t)throw new Error("Please use `Visitor.getInstance` to instantiate Visitor.");var I=this,S=window.adobe,v="",D=0,y=!1,A=!1;I.version="5.0.1";var b=C,O=b.Visitor;O.version=I.version,O.AuthState=T.AUTH_STATE,O.OptOut=T.OPT_OUT,b.s_c_in||(b.s_c_il=[],b.s_c_in=0),I._c="Visitor",I._il=b.s_c_il,I._in=b.s_c_in,I._il[I._in]=I,b.s_c_in++,I._instanceType="regular",I._log={requests:[]},I.marketingCloudOrgID=
t,I.cookieName="AMCV_"+t,I.sessionCookieName="AMCVS_"+t,I.cookieDomain=Z(),I.loadSSL=!0,I.loadTimeout=3E4,I.CORSErrors=[],I.marketingCloudServer=I.audienceManagerServer=demdexDomain,I.sdidParamExpiry=30;var M=null,k="MC",E="MCMID",P="MCIDTS",L="A",R="MCAID",w="AAM",F="MCAAMB",N="NONE",x=function(e){return!Object.prototype[e]},j=re(I);I.FIELDS=T.FIELDS,I.cookieRead=function(e){return $.get(e)},I.cookieWrite=function(e,t,n){var i=I.cookieLifetime?(""+I.cookieLifetime).toUpperCase():"",r=!1;return I.configs&&
I.configs.secureCookie&&"https:"===location.protocol&&(r=!0),$.set(e,""+t,{expires:n,domain:I.cookieDomain,cookieLifetime:i,secure:r})},I.resetState=function(e){e?I._mergeServerState(e):s()},I._isAllowedDone=!1,I._isAllowedFlag=!1,I.isAllowed=function(){return I._isAllowedDone||(I._isAllowedDone=!0,(I.cookieRead(I.cookieName)||I.cookieWrite(I.cookieName,"T",1))&&(I._isAllowedFlag=!0)),"T"===I.cookieRead(I.cookieName)&&I._helpers.removeCookie(I.cookieName),I._isAllowedFlag},I.setMarketingCloudVisitorID=
function(e){I._setMarketingCloudFields(e)},I._use1stPartyMarketingCloudServer=!1,I.getMarketingCloudVisitorID=function(e,t){I.marketingCloudServer&&I.marketingCloudServer.indexOf(".demdex.net")<0&&(I._use1stPartyMarketingCloudServer=!0);var n=I._getAudienceManagerURLData("_setMarketingCloudFields"),i=n.url;return I._getRemoteField(E,i,e,t,n)};var H=function(e,t){var n={};I.getMarketingCloudVisitorID(function(){t.forEach(function(e){n[e]=I._getField(e,!0)}),-1!==t.indexOf("MCOPTOUT")?I.isOptedOut(function(t){n.MCOPTOUT=
t,e(n)},null,!0):e(n)},!0)};I.getVisitorValues=function(e,t){var n={MCMID:{fn:I.getMarketingCloudVisitorID,args:[!0],context:I},MCOPTOUT:{fn:I.isOptedOut,args:[void 0,!0],context:I},MCAID:{fn:I.getAnalyticsVisitorID,args:[!0],context:I},MCAAMLH:{fn:I.getAudienceManagerLocationHint,args:[!0],context:I},MCAAMB:{fn:I.getAudienceManagerBlob,args:[!0],context:I}},i=t&&t.length?V.pluck(n,t):n;t&&-1===t.indexOf("MCAID")?H(e,t):Q(i,e)},I._currentCustomerIDs={},I._customerIDsHashChanged=!1,I._newCustomerIDsHash=
"",I.setCustomerIDs=function(t,n){if(!I.isOptedOut()&&t){if(!V.isObject(t)||V.isObjectEmpty(t))return!1;I._readVisitor();var i,a,o,s;for(i in t)if(x(i)&&(I._currentCustomerIDs.dataSources=I._currentCustomerIDs.dataSources||{},a=t[i],n=a.hasOwnProperty("hashType")?a.hashType:n,a))if("object"===e(a)){var c={};if(a.id){if(n){if(!(s=qe(We(a.id),n)))return;a.id=s,c.hashType=n}c.id=a.id}void 0!=a.authState&&(c.authState=a.authState),I._currentCustomerIDs.dataSources[i]=c}else if(n){if(!(s=qe(We(a),n)))return;
I._currentCustomerIDs.dataSources[i]={id:s,hashType:n}}else I._currentCustomerIDs.dataSources[i]={id:a};var u=I.getCustomerIDs(!0),l=I._getField("MCCIDH"),d="";l||(l=0);for(o in u){var f=u[o];if(!V.isObjectEmpty(f))for(i in f)x(i)&&(a=f[i],d+=(d?"|":"")+i+"|"+(a.id?a.id:"")+(a.authState?a.authState:""))}I._newCustomerIDsHash=String(I._hash(d)),I._newCustomerIDsHash!==l&&(I._customerIDsHashChanged=!0,I._mapCustomerIDs(r))}},I.syncIdentity=function(t,n){if(!I.isOptedOut()&&t){if(!V.isObject(t)||V.isObjectEmpty(t))return!1;
I._readVisitor();var i,a,o,s,c;for(i in t)if(x(i)&&(I._currentCustomerIDs.nameSpaces=I._currentCustomerIDs.nameSpaces||{},a=t[i],n=a.hasOwnProperty("hashType")?a.hashType:n,a&&"object"===e(a))){var u={};if(a.id){if(n){if(!(o=qe(We(a.id),n)))return;a.id=o,u.hashType=n}u.id=a.id}void 0!=a.authState&&(u.authState=a.authState),a.dataSource&&(I._currentCustomerIDs.dataSources=I._currentCustomerIDs.dataSources||{},s=a.dataSource,I._currentCustomerIDs.dataSources[s]=u),I._currentCustomerIDs.nameSpaces[i]=
u}var l=I.getCustomerIDs(!0),d=I._getField("MCCIDH"),f="";d||(d="0");for(c in l){var p=l[c];if(!V.isObjectEmpty(p))for(i in p)x(i)&&(a=p[i],f+=(f?"|":"")+i+"|"+(a.id?a.id:"")+(a.authState?a.authState:""))}I._newCustomerIDsHash=String(I._hash(f)),I._newCustomerIDsHash!==d&&(I._customerIDsHashChanged=!0,I._mapCustomerIDs(r))}},I.getCustomerIDs=function(e){I._readVisitor();var t,n,i={dataSources:{},nameSpaces:{}},r=I._currentCustomerIDs.dataSources;for(t in r)x(t)&&(n=r[t],n.id&&(i.dataSources[t]||(i.dataSources[t]=
{}),i.dataSources[t].id=n.id,void 0!=n.authState?i.dataSources[t].authState=n.authState:i.dataSources[t].authState=O.AuthState.UNKNOWN,n.hashType&&(i.dataSources[t].hashType=n.hashType)));var a=I._currentCustomerIDs.nameSpaces;for(t in a)x(t)&&(n=a[t],n.id&&(i.nameSpaces[t]||(i.nameSpaces[t]={}),i.nameSpaces[t].id=n.id,void 0!=n.authState?i.nameSpaces[t].authState=n.authState:i.nameSpaces[t].authState=O.AuthState.UNKNOWN,n.hashType&&(i.nameSpaces[t].hashType=n.hashType)));return e?i:i.dataSources},
I.setAnalyticsVisitorID=function(e){I._setAnalyticsFields(e)},I.getAnalyticsVisitorID=function(e,t,n){if(!B.isTrackingServerPopulated()&&!n)return I._callCallback(e,[""]),"";var i="";if(n||(i=I.getMarketingCloudVisitorID(function(t){I.getAnalyticsVisitorID(e,!0)})),i||n){var r=n?I.marketingCloudServer:I.trackingServer,a="";I.loadSSL&&(n?I.marketingCloudServerSecure&&(r=I.marketingCloudServerSecure):I.trackingServerSecure&&(r=I.trackingServerSecure));var o={};if(r){var s="http"+(I.loadSSL?"s":"")+
"://"+r+"/id",c="d_visid_ver\x3d"+I.version+"\x26mcorgid\x3d"+encodeURIComponent(I.marketingCloudOrgID)+(i?"\x26mid\x3d"+encodeURIComponent(i):"")+(I.idSyncDisable3rdPartySyncing||I.disableThirdPartyCookies?"\x26d_coppa\x3dtrue":""),u=["s_c_il",I._in,"_set"+(n?"MarketingCloud":"Analytics")+"Fields"];a=s+"?"+c+"\x26callback\x3ds_c_il%5B"+I._in+"%5D._set"+(n?"MarketingCloud":"Analytics")+"Fields",o.corsUrl=s+"?"+c,o.callback=u}return o.url=a,I._getRemoteField(n?E:R,a,e,t,o)}return""},I.getAudienceManagerLocationHint=
function(e,t){if(I.getMarketingCloudVisitorID(function(t){I.getAudienceManagerLocationHint(e,!0)})){var n=I._getField(R);if(!n&&B.isTrackingServerPopulated()&&(n=I.getAnalyticsVisitorID(function(t){I.getAudienceManagerLocationHint(e,!0)})),n||!B.isTrackingServerPopulated()){var i=I._getAudienceManagerURLData(),r=i.url;return I._getRemoteField("MCAAMLH",r,e,t,i)}}return""},I.getLocationHint=I.getAudienceManagerLocationHint,I.getAudienceManagerBlob=function(e,t){if(I.getMarketingCloudVisitorID(function(t){I.getAudienceManagerBlob(e,
!0)})){var n=I._getField(R);if(!n&&B.isTrackingServerPopulated()&&(n=I.getAnalyticsVisitorID(function(t){I.getAudienceManagerBlob(e,!0)})),n||!B.isTrackingServerPopulated()){var i=I._getAudienceManagerURLData(),r=i.url;return I._customerIDsHashChanged&&I._setFieldExpire(F,-1),I._getRemoteField(F,r,e,t,i)}}return""},I._supplementalDataIDCurrent="",I._supplementalDataIDCurrentConsumed={},I._supplementalDataIDLast="",I._supplementalDataIDLastConsumed={},I.getSupplementalDataID=function(e,t){I._supplementalDataIDCurrent||
t||(I._supplementalDataIDCurrent=I._generateID(1));var n=I._supplementalDataIDCurrent;return I._supplementalDataIDLast&&!I._supplementalDataIDLastConsumed[e]?(n=I._supplementalDataIDLast,I._supplementalDataIDLastConsumed[e]=!0):n&&(I._supplementalDataIDCurrentConsumed[e]&&(I._supplementalDataIDLast=I._supplementalDataIDCurrent,I._supplementalDataIDLastConsumed=I._supplementalDataIDCurrentConsumed,I._supplementalDataIDCurrent=n=t?"":I._generateID(1),I._supplementalDataIDCurrentConsumed={}),n&&(I._supplementalDataIDCurrentConsumed[e]=
!0)),n};var U=!1;I._liberatedOptOut=null,I.getOptOut=function(e,t){var n=I._getAudienceManagerURLData("_setMarketingCloudFields"),i=n.url;if(d())return I._getRemoteField("MCOPTOUT",i,e,t,n);if(I._registerCallback("liberatedOptOut",e),null!==I._liberatedOptOut)return I._callAllCallbacks("liberatedOptOut",[I._liberatedOptOut]),U=!1,I._liberatedOptOut;if(U)return null;U=!0;var r="liberatedGetOptOut";return n.corsUrl=n.corsUrl.replace(/\.demdex\.net\/id\?/,".demdex.net/optOutStatus?"),n.callback=[r],
C[r]=function(e){if(e===Object(e)){var t,n,i=V.parseOptOut(e,t,N);t=i.optOut,n=1E3*i.d_ottl,I._liberatedOptOut=t,setTimeout(function(){I._liberatedOptOut=null},n)}I._callAllCallbacks("liberatedOptOut",[t]),U=!1},j.fireCORS(n),null},I.isOptedOut=function(e,t,n){t||(t=O.OptOut.GLOBAL);var i=I.getOptOut(function(n){var i=n===O.OptOut.GLOBAL||n.indexOf(t)>=0;I._callCallback(e,[i])},n);return i?i===O.OptOut.GLOBAL||i.indexOf(t)>=0:null},I._fields=null,I._fieldsExpired=null,I._hash=function(e){var t,n,
i=0;if(e)for(t=0;t<e.length;t++)n=e.charCodeAt(t),i=(i<<5)-i+n,i&=i;return i},I._generateID=ie,I._generateLocalMID=function(){var e=I._generateID(0);return q.isClientSideMarketingCloudVisitorID=!0,e},I._callbackList=null,I._callCallback=function(e,t){try{"function"==typeof e?e.apply(b,t):e[1].apply(e[0],t)}catch(e){}},I._registerCallback=function(e,t){t&&(null==I._callbackList&&(I._callbackList={}),void 0==I._callbackList[e]&&(I._callbackList[e]=[]),I._callbackList[e].push(t))},I._callAllCallbacks=
function(e,t){if(null!=I._callbackList){var n=I._callbackList[e];if(n)for(;n.length>0;)I._callCallback(n.shift(),t)}},I._addQuerystringParam=function(e,t,n,i){var r=encodeURIComponent(t)+"\x3d"+encodeURIComponent(n),a=B.parseHash(e),o=B.hashlessUrl(e);if(-1===o.indexOf("?"))return o+"?"+r+a;var s=o.split("?"),c=s[0]+"?",u=s[1];return c+B.addQueryParamAtLocation(u,r,i)+a},I._extractParamFromUri=function(e,t){var n=new RegExp("[\\?\x26#]"+t+"\x3d([^\x26#]*)"),i=n.exec(e);if(i&&i.length)return decodeURIComponent(i[1])},
I._parseAdobeMcFromUrl=a(ae.ADOBE_MC),I._parseAdobeMcSdidFromUrl=a(ae.ADOBE_MC_SDID),I._attemptToPopulateSdidFromUrl=function(e){var n=I._parseAdobeMcSdidFromUrl(e),i=1E9;n&&n.TS&&(i=B.getTimestampInSeconds()-n.TS),n&&n.SDID&&n.MCORGID===t&&i<I.sdidParamExpiry&&(I._supplementalDataIDCurrent=n.SDID,I._supplementalDataIDCurrentConsumed.SDID_URL_PARAM=!0)},I._attemptToPopulateIdsFromUrl=function(){var e=I._parseAdobeMcFromUrl();if(e&&e.TS){var n=B.getTimestampInSeconds(),i=n-e.TS;if(Math.floor(i/60)>
ae.ADOBE_MC_TTL_IN_MIN||e.MCORGID!==t)return;o(e)}},I._mergeServerState=function(e){if(e)try{if(e=function(e){return B.isObject(e)?e:JSON.parse(e)}(e),e[I.marketingCloudOrgID]){var t=e[I.marketingCloudOrgID];!function(e){B.isObject(e)&&I.setCustomerIDs(e)}(t.customerIDs),s(t.sdid)}}catch(e){throw new Error("`serverState` has an invalid format.");}},I._timeout=null,I._loadData=function(e,t,n,i){t=I._addQuerystringParam(t,"d_fieldgroup",e,1),i.url=I._addQuerystringParam(i.url,"d_fieldgroup",e,1),i.corsUrl=
I._addQuerystringParam(i.corsUrl,"d_fieldgroup",e,1),q.fieldGroupObj[e]=!0,i===Object(i)&&i.corsUrl&&"XMLHttpRequest"===j.corsMetadata.corsType&&j.fireCORS(i,n,e)},I._clearTimeout=function(e){null!=I._timeout&&I._timeout[e]&&(clearTimeout(I._timeout[e]),I._timeout[e]=0)},I._settingsDigest=0,I._getSettingsDigest=function(){if(!I._settingsDigest){var e=I.version;I.audienceManagerServer&&(e+="|"+I.audienceManagerServer),I.audienceManagerServerSecure&&(e+="|"+I.audienceManagerServerSecure),I._settingsDigest=
I._hash(e)}return I._settingsDigest},I._readVisitorDone=!1,I._readVisitor=function(){if(!I._readVisitorDone){I._readVisitorDone=!0;var e,t,n,i,r,a,o=I._getSettingsDigest(),s=!1,c=I.cookieRead(I.cookieName),u=new Date;if(c||A||I.discardTrackingServerECID||(c=I.cookieRead(ae.FIRST_PARTY_SERVER_COOKIE)),null==I._fields&&(I._fields={}),c&&"T"!==c)for(c=c.split("|"),c[0].match(/^[\-0-9]+$/)&&(parseInt(c[0],10)!==o&&(s=!0),c.shift()),c.length%2==1&&c.pop(),e=0;e<c.length;e+=2)t=c[e].split("-"),n=t[0],i=
c[e+1],t.length>1?(r=parseInt(t[1],10),a=t[1].indexOf("s")>0):(r=0,a=!1),s&&("MCCIDH"===n&&(i=""),r>0&&(r=u.getTime()/1E3-60)),n&&i&&(I._setField(n,i,1),r>0&&(I._fields["expire"+n]=r+(a?"s":""),(u.getTime()>=1E3*r||a&&!I.cookieRead(I.sessionCookieName))&&(I._fieldsExpired||(I._fieldsExpired={}),I._fieldsExpired[n]=!0)));!I._getField(R)&&B.isTrackingServerPopulated()&&(c=I.cookieRead("s_vi"))&&(c=c.split("|"),c.length>1&&c[0].indexOf("v1")>=0&&(i=c[1],e=i.indexOf("["),e>=0&&(i=i.substring(0,e)),i&&
i.match(ae.VALID_VISITOR_ID_REGEX)&&I._setField(R,i)))}},I._appendVersionTo=function(e){var t="vVersion|"+I.version,n=e?I._getCookieVersion(e):null;return n?ee.areVersionsDifferent(n,I.version)&&(e=e.replace(ae.VERSION_REGEX,t)):e+=(e?"|":"")+t,e},I._writeVisitor=function(){var e,t,n=I._getSettingsDigest();for(e in I._fields)x(e)&&I._fields[e]&&"expire"!==e.substring(0,6)&&(t=I._fields[e],n+=(n?"|":"")+e+(I._fields["expire"+e]?"-"+I._fields["expire"+e]:"")+"|"+t);n=I._appendVersionTo(n),I.cookieWrite(I.cookieName,
n,1)},I._getField=function(e,t){return null==I._fields||!t&&I._fieldsExpired&&I._fieldsExpired[e]?null:I._fields[e]},I._setField=function(e,t,n){null==I._fields&&(I._fields={}),I._fields[e]=t,n||I._writeVisitor()},I._getFieldList=function(e,t){var n=I._getField(e,t);return n?n.split("*"):null},I._setFieldList=function(e,t,n){I._setField(e,t?t.join("*"):"",n)},I._getFieldMap=function(e,t){var n=I._getFieldList(e,t);if(n){var i,r={};for(i=0;i<n.length;i+=2)r[n[i]]=n[i+1];return r}return null},I._setFieldMap=
function(e,t,n){var i,r=null;if(t){r=[];for(i in t)x(i)&&(r.push(i),r.push(t[i]))}I._setFieldList(e,r,n)},I._setFieldExpire=function(e,t,n){var i=new Date;i.setTime(i.getTime()+1E3*t),null==I._fields&&(I._fields={}),I._fields["expire"+e]=Math.floor(i.getTime()/1E3)+(n?"s":""),t<0?(I._fieldsExpired||(I._fieldsExpired={}),I._fieldsExpired[e]=!0):I._fieldsExpired&&(I._fieldsExpired[e]=!1),n&&(I.cookieRead(I.sessionCookieName)||I.cookieWrite(I.sessionCookieName,"1"))},I._findVisitorID=function(t){return t&&
("object"===e(t)&&(t=t.d_mid?t.d_mid:t.visitorID?t.visitorID:t.id?t.id:t.uuid?t.uuid:""+t),t&&"NOTARGET"===(t=t.toUpperCase())&&(t=N),t&&(t===N||t.match(ae.VALID_VISITOR_ID_REGEX))||(t="")),t},I._setFields=function(t,n){if(I._clearTimeout(t),null!=I._loading&&(I._loading[t]=!1),q.fieldGroupObj[t]&&q.setState(t,!1),t===k){!0!==q.isClientSideMarketingCloudVisitorID&&(q.isClientSideMarketingCloudVisitorID=!1);var i=I._getField(E);if(!i||I.overwriteCrossDomainMCIDAndAID){if(!(i="object"===e(n)&&n.mid?
n.mid:I._findVisitorID(n))){if(I._use1stPartyMarketingCloudServer&&!I.tried1stPartyMarketingCloudServer)return I.tried1stPartyMarketingCloudServer=!0,void I.getAnalyticsVisitorID(null,!1,!0);i=I._generateLocalMID()}I._setField(E,i)}i&&i!==N||(i=""),"object"===e(n)&&((n.d_region||n.dcs_region||n.d_blob||n.blob)&&I._setFields(w,n),I._use1stPartyMarketingCloudServer&&n.mid&&I._setFields(L,{id:n.id})),I._callAllCallbacks(E,[i])}if(t===w&&"object"===e(n)){var r=604800;void 0!=n.id_sync_ttl&&n.id_sync_ttl&&
(r=parseInt(n.id_sync_ttl,10));var a=Y.getRegionAndCheckIfChanged(n,r);I._callAllCallbacks("MCAAMLH",[a]);var o=I._getField(F);(n.d_blob||n.blob)&&(o=n.d_blob,o||(o=n.blob),I._setFieldExpire(F,r),I._setField(F,o)),o||(o=""),I._callAllCallbacks(F,[o]),!n.error_msg&&I._newCustomerIDsHash&&I._setField("MCCIDH",I._newCustomerIDsHash)}if(t===L){var s=I._getField(R);s&&!I.overwriteCrossDomainMCIDAndAID||(s=I._findVisitorID(n),s?s!==N&&I._setFieldExpire(F,-1):s=N,I._setField(R,s)),s&&s!==N||(s=""),I._callAllCallbacks(R,
[s])}if(I.idSyncDisableSyncs||I.disableIdSyncs)Y.idCallNotProcesssed=!0;else{Y.idCallNotProcesssed=!1;var c={};c.ibs=n.ibs,c.subdomain=n.subdomain,Y.processIDCallData(c)}if(n===Object(n)){var u,l;d()&&I.isAllowed()&&(u=I._getField("MCOPTOUT"));var f=V.parseOptOut(n,u,N);u=f.optOut,l=f.d_ottl,I._setFieldExpire("MCOPTOUT",l,!0),I._setField("MCOPTOUT",u),I._callAllCallbacks("MCOPTOUT",[u])}},I._loading=null,I._getRemoteField=function(e,t,n,i,r){var a,o="",s=B.isFirstPartyAnalyticsVisitorIDCall(e),c=
{MCAAMLH:!0,MCAAMB:!0};if(d()&&I.isAllowed()){I._readVisitor(),o=I._getField(e,!0===c[e]);if(function(){return(!o||I._fieldsExpired&&I._fieldsExpired[e])&&(!I.disableThirdPartyCalls||s)}()){if(e===E||"MCOPTOUT"===e?a=k:"MCAAMLH"===e||e===F?a=w:e===R&&(a=L),a)return!t||null!=I._loading&&I._loading[a]||(null==I._loading&&(I._loading={}),I._loading[a]=!0,a===w&&(D=0),I._loadData(a,t,function(t){if(!I._getField(e)){t&&q.setState(a,!0);var n="";e===E?n=I._generateLocalMID():a===w&&(n={error_msg:"timeout"}),
I._setFields(a,n)}},r)),I._registerCallback(e,n),o||(t||I._setFields(a,{id:N}),"")}else o||(e===E?(I._registerCallback(e,n),o=I._generateLocalMID(),I.setMarketingCloudVisitorID(o)):e===R?(I._registerCallback(e,n),o="",I.setAnalyticsVisitorID(o)):(o="",i=!0))}return e!==E&&e!==R||o!==N||(o="",i=!0),n&&i&&I._callCallback(n,[o]),o},I._setMarketingCloudFields=function(e){I._readVisitor(),I._setFields(k,e)},I._mapCustomerIDs=function(e){I.getAudienceManagerBlob(e,!0)},I._setAnalyticsFields=function(e){I._readVisitor(),
I._setFields(L,e)},I._setAudienceManagerFields=function(e){I._readVisitor(),I._setFields(w,e)},I._getAudienceManagerURLData=function(e){var t=I.audienceManagerServer,n="",i=I._getField(E),r=I._getField(F,!0),a=I._getField(R),o=a&&a!==N?"\x26d_cid_ic\x3dAVID%01"+encodeURIComponent(a):"";if(I.loadSSL&&I.audienceManagerServerSecure&&(t=I.audienceManagerServerSecure),t){var s,c,u,l=I.getCustomerIDs(!0);if(l)for(c in l){var d=l[c];if(!V.isObjectEmpty(d)){var f="nameSpaces"===c?"\x26d_cid_ns\x3d":"\x26d_cid_ic\x3d";
for(s in d)x(s)&&(u=d[s],o+=f+encodeURIComponent(s)+"%01"+encodeURIComponent(u.id?u.id:"")+(u.authState?"%01"+u.authState:""))}}e||(e="_setAudienceManagerFields");var p="http"+(I.loadSSL?"s":"")+"://"+t+"/id",g="d_visid_ver\x3d"+I.version+(v&&-1!==p.indexOf("demdex.net")?"\x26gdpr\x3d1\x26gdpr_consent\x3d"+v:"")+(D&&-1!==p.indexOf("demdex.net")?"\x26d_cf\x3d"+D:"")+"\x26d_rtbd\x3djson\x26d_ver\x3d2"+(!i&&I._use1stPartyMarketingCloudServer?"\x26d_verify\x3d1":"")+"\x26d_orgid\x3d"+encodeURIComponent(I.marketingCloudOrgID)+
"\x26d_nsid\x3d"+(I.idSyncContainerID||0)+(i?"\x26d_mid\x3d"+encodeURIComponent(i):"")+(I.idSyncDisable3rdPartySyncing||I.disableThirdPartyCookies?"\x26d_coppa\x3dtrue":"")+(!0===M?"\x26d_coop_safe\x3d1":!1===M?"\x26d_coop_unsafe\x3d1":"")+(r?"\x26d_blob\x3d"+encodeURIComponent(r):"")+o,m=["s_c_il",I._in,e];return n=p+"?"+g+"\x26d_cb\x3ds_c_il%5B"+I._in+"%5D."+e,{url:n,corsUrl:p+"?"+g,callback:m}}return{url:n}},I.appendVisitorIDsTo=function(e){try{var t=[[E,I._getField(E)],[R,I._getField(R)],["MCORGID",
I.marketingCloudOrgID]];return I._addQuerystringParam(e,ae.ADOBE_MC,c(t))}catch(t){return e}},I.appendSupplementalDataIDTo=function(e,t){if(!(t=t||I.getSupplementalDataID(B.generateRandomString(),!0)))return e;try{var n=c([["SDID",t],["MCORGID",I.marketingCloudOrgID]]);return I._addQuerystringParam(e,ae.ADOBE_MC_SDID,n)}catch(t){return e}};var B={parseHash:function(e){var t=e.indexOf("#");return t>0?e.substr(t):""},hashlessUrl:function(e){var t=e.indexOf("#");return t>0?e.substr(0,t):e},addQueryParamAtLocation:function(e,
t,n){var i=e.split("\x26");return n=null!=n?n:i.length,i.splice(n,0,t),i.join("\x26")},isFirstPartyAnalyticsVisitorIDCall:function(e,t,n){if(e!==R)return!1;var i;return t||(t=I.trackingServer),n||(n=I.trackingServerSecure),!("string"!=typeof(i=I.loadSSL?n:t)||!i.length)&&(i.indexOf("2o7.net")<0&&i.indexOf("omtrdc.net")<0)},isObject:function(e){return Boolean(e&&e===Object(e))},removeCookie:function(e){$.remove(e,{domain:I.cookieDomain})},isTrackingServerPopulated:function(){return!!I.trackingServer||
!!I.trackingServerSecure},getTimestampInSeconds:function(){return Math.round((new Date).getTime()/1E3)},parsePipeDelimetedKeyValues:function(e){return e.split("|").reduce(function(e,t){var n=t.split("\x3d");return e[n[0]]=decodeURIComponent(n[1]),e},{})},generateRandomString:function(e){e=e||5;for(var t="",n="abcdefghijklmnopqrstuvwxyz0123456789";e--;)t+=n[Math.floor(Math.random()*n.length)];return t},normalizeBoolean:function(e){return"true"===e||"false"!==e&&e},parseBoolean:function(e){return"true"===
e||"false"!==e&&null},replaceMethodsWithFunction:function(e,t){for(var n in e)e.hasOwnProperty(n)&&"function"==typeof e[n]&&(e[n]=t);return e}};I._helpers=B;var Y=oe(I,O);I._destinationPublishing=Y,I.timeoutMetricsLog=[];var q={isClientSideMarketingCloudVisitorID:null,MCIDCallTimedOut:null,AnalyticsIDCallTimedOut:null,AAMIDCallTimedOut:null,fieldGroupObj:{},setState:function(e,t){switch(e){case k:!1===t?!0!==this.MCIDCallTimedOut&&(this.MCIDCallTimedOut=!1):this.MCIDCallTimedOut=t;break;case L:!1===
t?!0!==this.AnalyticsIDCallTimedOut&&(this.AnalyticsIDCallTimedOut=!1):this.AnalyticsIDCallTimedOut=t;break;case w:!1===t?!0!==this.AAMIDCallTimedOut&&(this.AAMIDCallTimedOut=!1):this.AAMIDCallTimedOut=t}}};I.isClientSideMarketingCloudVisitorID=function(){return q.isClientSideMarketingCloudVisitorID},I.MCIDCallTimedOut=function(){return q.MCIDCallTimedOut},I.AnalyticsIDCallTimedOut=function(){return q.AnalyticsIDCallTimedOut},I.AAMIDCallTimedOut=function(){return q.AAMIDCallTimedOut},I.idSyncGetOnPageSyncInfo=
function(){return I._readVisitor(),I._getField("MCSYNCSOP")},I.idSyncByURL=function(e){if(!I.isOptedOut()){var t=u(e||{});if(t.error)return t.error;var n,i,r=e.url,a=encodeURIComponent,o=Y;return r=r.replace(/^https:/,"").replace(/^http:/,""),n=V.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),i=["ibs",a(e.dpid),"img",a(r),t.ttl,"",n],o.addMessage(i.join("|")),o.requestToProcess(),"Successfully queued"}},I.idSyncByDataSource=function(e){if(!I.isOptedOut())return e===Object(e)&&"string"==typeof e.dpuuid&&
e.dpuuid.length?(e.url="//"+demdexDomain+"/ibs:dpid\x3d"+e.dpid+"\x26dpuuid\x3d"+e.dpuuid,I.idSyncByURL(e)):"Error: config or config.dpuuid is empty"},Ge(I,Y),I._getCookieVersion=function(e){e=e||I.cookieRead(I.cookieName);var t=ae.VERSION_REGEX.exec(e);return t&&t.length>1?t[1]:null},I._resetAmcvCookie=function(e){var t=I._getCookieVersion();t&&!ee.isLessThan(t,e)||B.removeCookie(I.cookieName)},I.setAsCoopSafe=function(){M=!0},I.setAsCoopUnsafe=function(){M=!1},function(){if(I.configs=Object.create(null),
B.isObject(n))for(var e in n)x(e)&&(I[e]=n[e],I.configs[e]=n[e])}(),f();var W;I.init=function(){l()&&(S.optIn.fetchPermissions(h,!0),!S.optIn.isApproved(S.optIn.Categories.ECID))||W||(W=!0,function(){if(B.isObject(n)){I.idSyncContainerID=I.idSyncContainerID||0,M="boolean"==typeof I.isCoopSafe?I.isCoopSafe:B.parseBoolean(I.isCoopSafe),I.resetBeforeVersion&&I._resetAmcvCookie(I.resetBeforeVersion),I._attemptToPopulateIdsFromUrl(),I._attemptToPopulateSdidFromUrl(),I._readVisitor();var e=I._getField(P),
t=Math.ceil((new Date).getTime()/ae.MILLIS_PER_DAY);I.idSyncDisableSyncs||I.disableIdSyncs||!Y.canMakeSyncIDCall(e,t)||(I._setFieldExpire(F,-1),I._setField(P,t)),I.getMarketingCloudVisitorID(),I.getAudienceManagerLocationHint(),I.getAudienceManagerBlob(),I._mergeServerState(I.serverState)}else I._attemptToPopulateIdsFromUrl(),I._attemptToPopulateSdidFromUrl()}(),function(){if(!I.idSyncDisableSyncs&&!I.disableIdSyncs){Y.checkDPIframeSrc();var e=function(){var e=Y;e.readyToAttachIframe()&&e.attachIframe()};
b.addEventListener("load",function(){O.windowLoaded=!0,e()});try{ne.receiveMessage(function(e){Y.receiveMessage(e.data)},Y.iframeHost)}catch(e){}}}(),function(){I.whitelistIframeDomains&&ae.POST_MESSAGE_ENABLED&&(I.whitelistIframeDomains=I.whitelistIframeDomains instanceof Array?I.whitelistIframeDomains:[I.whitelistIframeDomains],I.whitelistIframeDomains.forEach(function(e){var n=new G(t,e),i=z(I,n);ne.receiveMessage(i,e)}))}())}};Ke.config=ce,C.Visitor=Ke;var Je=Ke,ze=function(e){if(V.isObject(e))return Object.keys(e).filter(function(t){return""!==
e[t]}).reduce(function(t,n){var i=ce.normalizeConfig(e[n]),r=V.normalizeBoolean(i);return t[n]=r,t},Object.create(null))},Qe=Be.OptIn,$e=Be.IabPlugin;return Je.getInstance=function(e,t){if(!e)throw new Error("Visitor requires Adobe Marketing Cloud Org ID.");e.indexOf("@")<0&&(e+="@AdobeOrg");var n=function(){var t=C.s_c_il;if(t)for(var n=0;n<t.length;n++){var i=t[n];if(i&&"Visitor"===i._c&&i.marketingCloudOrgID===e)return i}}();if(n)return n;var i=ze(t);!function(e){C.adobe.optIn=C.adobe.optIn||function(){var t=
V.pluck(e,["doesOptInApply","previousPermissions","preOptInApprovals","isOptInStorageEnabled","optInStorageExpiry","isIabContext"]),n=e.optInCookieDomain||e.cookieDomain;n=n||Z(),n=n===window.location.hostname?"":n,t.optInCookieDomain=n;var i=new Qe(t,{cookies:$});if(t.isIabContext&&t.doesOptInApply){var r=new $e;i.registerPlugin(r)}return i}()}(i||{});var r=e,a=r.split("").reverse().join(""),o=new Je(e,null,a);V.isObject(i)&&i.cookieDomain&&(o.cookieDomain=i.cookieDomain),function(){C.s_c_il.splice(--C.s_c_in,
1)}();var s=V.getIeVersion();if("number"==typeof s&&s<10)return o._helpers.replaceMethodsWithFunction(o,function(){});var c=function(){try{return C.self!==C.parent}catch(e){return!0}}()&&!function(e){return e.cookieWrite("TEST_AMCV_COOKIE","T",1),"T"===e.cookieRead("TEST_AMCV_COOKIE")&&(e._helpers.removeCookie("TEST_AMCV_COOKIE"),!0)}(o)&&C.parent?new q(e,i,o,C.parent):new Je(e,i,a);return o=null,c.init(),c},function(){function e(){Je.windowLoaded=!0}C.addEventListener?C.addEventListener("load",e):
C.attachEvent&&C.attachEvent("onload",e),Je.codeLoadEnd=(new Date).getTime()}(),Je}();if(true)window.visitor=Visitor.getInstance(ensVar0.call(this),visitorObj)};if(!!__dataLayer&&!!__dataLayer.adobeConfig)Bootstrapper.fireExp();else Bootstrapper.ensEvent.add(["adobeConfigSet"],function(){Bootstrapper.fireExp()})},3773761,700339,758);